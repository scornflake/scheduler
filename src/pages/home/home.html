<ion-header>
    <ion-toolbar>
        <ion-title>Dashboard</ion-title>
        <button start ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <!--<button ion-button-->
        <!--(click)="clear_selection()"-->
        <!--[disabled]="!rootStore.ui_store.have_selection">Deselect-->
        <!--</button>-->
        <!--<button ion-button *ngIf="!rootStore.ui_store.signed_in_to_google"-->
        <!--(click)="login()">Login-->
        <!--</button>-->
        <!--<button ion-button *ngIf="rootStore.ui_store.signed_in_to_google"-->
        <!--(click)="logout()">Logout-->
        <!--</button>-->
        <!--</ion-buttons>-->
    </ion-toolbar>
    <saving-state></saving-state>
</ion-header>

<ion-content *mobxTraceAutorun="'trace'">
    <div *ngIf="store.uiStore$|async as ui; else notSignedIn">
        <div *ngIf="server">
            <div *ngIf="server.loggedIn; else notSignedIn">
                <div class="loading" *ngIf="!server.isReady; else main">
                    <ion-spinner [duration]="1000"></ion-spinner>
                </div>
                <ng-template #main>
                    <ion-grid no-padding>
                        <welcome-wizard
                                *ngIf="hasNoPlans"
                                (createPlanClicked)="createPlanWizard()"
                                (createTeamClicked)="createTeamWizard()"
                        >
                        </welcome-wizard>

                        <div *ngIf="!hasNoPlans">
                            <show-plan *ngIf="!hasNoPlans" (editPlanClicked)="editPlan($event)"></show-plan>
                            <div *ngIf="store.schedule$ | async as schedule">
                                <schedule-viewer [schedule]="schedule"
                                                 [me]="store.loggedInPerson$|async"></schedule-viewer>
                                <person-schedule [schedule]="schedule"
                                                 [person]="store.loggedInPerson$|async"></person-schedule>
                                <person-unavailable *ngIf="store.loggedInPerson$|async as p"
                                                    [person]="p"></person-unavailable>
                            </div>
                        </div>
                    </ion-grid>
                </ng-template>


                <!--<ion-grid *ngIf="store.schedule$ | async as schedule" no-padding>-->
                <!--<ion-row>-->
                <!--<ion-col *ngIf="store.ui_store.have_selection">-->
                <!--<person-editor></person-editor>-->
                <!--<reasons *ngIf="store.schedule$|async as schedule"-->
                <!--[decisions]="schedule.reasons_for(store.ui_store.selected_person, store.ui_store.selected_date)"-->
                <!--&gt;-->
                <!--</reasons>-->
                <!--</ion-col>-->
                <!--</ion-row>-->
                <!--</ion-grid>-->
            </div>
        </div>
    </div>
    <!--<ng-template #notSignedIn>-->
    <!--<div class="notSignedIn">-->
    <!--<div class="title" text-center>Please sign&nbsp;in</div>-->
    <!--<div class="buttons">-->
    <!--<button class="signInButton" col-4 offset-4 ion-button (tap)="startSignIn()">Sign In</button>-->
    <!--</div>-->
    <!--</div>-->
    <!--</ng-template>-->
</ion-content>

<!--<ion-footer>-->
<!--<div *ngIf="notSignedIn">-->
<!--<button class="signInButton" col-4 offset-4 ion-button (tap)="startSignIn()">Sign In</button>-->
<!--</div>-->

<!--<ion-buttons>-->
<!--<button small ion-button (tap)="change_state()">Test</button>-->
<!--</ion-buttons>-->


<!--<ion-buttons *ngIf="(store.saved_state$ | async) as state">-->
<!--<button small ion-button-->
<!--(click)="export_as_csv()">To CSV-->
<!--</button>-->
<!--<button small ion-button *ngIf="state.have_previous_selection"-->
<!--(click)="read_as_previous_schedule()">Read Previous...-->
<!--</button>-->
<!--<button small ion-button *ngIf="!state.have_previous_selection"-->
<!--(click)="select_previous_schedule()">Select Previous...-->
<!--</button>-->
<!--<button small ion-button *ngIf="store.ui_store.signed_in_to_google"-->
<!--(click)="export_as_sheets()">Export Sheet...-->
<!--</button>-->
<!--<button small ion-button *ngIf="store.ui_store.signed_in_to_google"-->
<!--(click)="clear_sheet_state()">Clear State-->
<!--</button>-->
<!--</ion-buttons>-->
<!--</ion-footer>-->

