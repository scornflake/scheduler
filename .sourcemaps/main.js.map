{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src/app/app.module.ts","../../src lazy","../../src/scheduling/common/date-utils.ts","../../src/scheduling/people.ts","../../src/store/root.ts","../../src/app/logging-configuration.ts","../../src/components/reasons/reasons.ts","../../src/store/UIState.ts","../../src/scheduling/organization.ts","../../src/scheduling/service.ts","../../src/common/logging-wrapper.ts","../../src/scheduling/common/base_model.ts","../../src/pages/home/home.module.ts","../../src/pages/home/home.ts","../../src/pages/sheet-selection/sheet-selection.ts","../../src/pages/tab-selection/tab-selection.ts","../../src/pages/login/login.module.ts","../../src/pages/people/people.module.ts","../../src/pages/people/people.ts","../../src/pages/sheet-selection/sheet-selection.module.ts","../../src/common/json/safe-stringify.ts","../../src/pages/tab-selection/tab-selection.module.ts","../../src/pages/tabs/tabs.ts","../../src/pages/about/about.ts","../../src/app/main.ts","../../src/scheduling/shared.ts","../../src/components/schedule-viewer/schedule-viewer.ts","../../node_modules/moment/locale ^/.//.*$","../../src/scheduling/unavailability.ts","../../src/scheduling/rule_based/rule-facts.ts","../../src/scheduling/tests/role-store.ts","../../src/providers/store/test.store.ts","../../src/scheduling/tests/sample-data.ts","../../src/components/person-editor/person-editor.ts","../../src/components/show-form-errors/show-form-errors.ts","../../src/components/person-details/person-details.ts","../../src/components/availability-options/availability-options.ts","../../src/components/role-summary/role-summary.ts","../../src/components/role-detail/role-detail.ts","../../src/components/rule-details/rule-details.ts","../../src/scheduling/exporter/csv.exporter.ts","../../src/scheduling/role.ts","../../src/common/auth-common.ts","../../src/common/interfaces.ts","../../src/common/spreadsheet_reader.ts","../../src/pages/login/login.ts","../../src/components/components.module.ts","../../src/app/app.component.ts","../../src/scheduling/rule_based/rules.ts","../../src/scheduling/rule_based/scheduler.ts","../../src/scheduling/assignment.ts","../../src/common/gapis-auth.ts","../../src/providers/server/server.ts","../../src/scheduling/availability.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,kC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVgF;AACxB;AACe;AACjC;AAES;AACH;AAEO;AACM;AACQ;AACrB;AACU;AACJ;AACP;AAC8C;AACN;AAClB;AACZ;AACK;AACA;AACD;AACG;AACpB;AACuB;AAkE/D;IAGI,mBAAY,QAAkB;QAC1B,WAAS,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAClC,CAAC;kBALQ,SAAS;IAAT,SAAS;QAhErB,uEAAQ,CAAC;YACN,YAAY,EAAE;gBACV,6DAAK;gBACL,qEAAS;gBACT,kEAAQ;aACX;YACD,OAAO,EAAE;gBACL,+EAAgB;gBAChB,gFAAa;gBACb,oEAAa;gBACb,kEAAW,CAAC,OAAO,CAAC,6DAAK,EAAE,EAAE,EACrC;oBACE,KAAK,EAAE;wBACL,EAAE,YAAY,EAAE,yFAAyF,EAAE,IAAI,EAAE,yBAAyB,EAAE,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBAClN,EAAE,YAAY,EAAE,6FAA6F,EAAE,IAAI,EAAE,gBAAgB,EAAE,OAAO,EAAE,wBAAwB,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBAC/M,EAAE,YAAY,EAAE,0CAA0C,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,MAAM,CAAC,EAAE;wBACtI,EAAE,YAAY,EAAE,6CAA6C,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,MAAM,CAAC,EAAE;wBAC3I,EAAE,YAAY,EAAE,gDAAgD,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,MAAM,CAAC,EAAE;wBAChJ,EAAE,YAAY,EAAE,gFAAgF,EAAE,IAAI,EAAE,sBAAsB,EAAE,OAAO,EAAE,mBAAmB,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBACnM,EAAE,YAAY,EAAE,uEAAuE,EAAE,IAAI,EAAE,mBAAmB,EAAE,OAAO,EAAE,gBAAgB,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBACpL,EAAE,YAAY,EAAE,8DAA8D,EAAE,IAAI,EAAE,gBAAgB,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBACrK,EAAE,YAAY,EAAE,0EAA0E,EAAE,IAAI,EAAE,oBAAoB,EAAE,OAAO,EAAE,iBAAiB,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBACzL,EAAE,YAAY,EAAE,oEAAoE,EAAE,IAAI,EAAE,kBAAkB,EAAE,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBAC/K,EAAE,YAAY,EAAE,wGAAwG,EAAE,IAAI,EAAE,4BAA4B,EAAE,OAAO,EAAE,4BAA4B,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;qBAC3O;iBACF,CAAC;gBACM,2EAAkB,CAAC,OAAO,EAAE;gBAC5B,uFAAgB;gBAChB,wGAAwB;gBACxB,kGAAsB;gBACtB,wEAAc;gBACd,2EAAe;gBACf,8EAAgB;aAEnB;YACD,SAAS,EAAE,CAAC,+DAAQ,CAAC;YACrB,eAAe,EAAE;gBACb,6DAAK;gBACL,qEAAS;gBACT,kEAAQ;aACX;YACD,SAAS,EAAE;gBACP,2EAAS;gBACT,iFAAY;gBACZ,+DAAS;gBACT,0FAAoB;gBACpB;oBACI,OAAO,EAAE,sEAAe;oBACxB,UAAU,EAAE,kFAAiB;oBAC7B,IAAI,EAAE,CAAC,0FAAoB,CAAC;oBAC5B,KAAK,EAAE,IAAI;iBACd;gBACD,EAAC,OAAO,EAAE,mEAAY,EAAE,QAAQ,EAAE,wEAAiB,EAAC;gBACpD,IAAI;gBACJ,kCAAkC;gBAClC,mCAAmC;gBACnC,+BAA+B;gBAC/B,KAAK;gBACL,8EAAc;gBACd,kEAAK;gBACL,iFAAc;aACjB;SACJ,CAAC;yCAKwB,+DAAQ;OAHrB,SAAS,CAMrB;IAAD,gBAAC;;CAAA;AANqB;;;;;;;;AC1FtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;ACrDiC;AAGjC,IAAI,qBAAqB,GAAG,UAAC,IAAY,EAAE,KAAa,EAAE,GAAW;IACjE,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;AAC1C,CAAC,CAAC;AAEF,IAAI,aAAa,GAAG,UAAC,IAAU,EAAE,IAAY;IACzC,IAAI,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9B,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IACxC,MAAM,CAAC,QAAQ,CAAC;AACpB,CAAC,CAAC;AAEF,IAAI,WAAW,GAAG,UAAC,IAAU;IACzB,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;AAClC,CAAC,CAAC;AAEF,IAAI,kBAAkB,GAAG,UAAC,IAAU,EAAE,OAAqC;IAArC,uDAAqC;IACvE,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;IAC7B,CAAC;AACL,CAAC,CAAC;AAEF,IAAI,8BAA8B,GAAG,UAAC,IAAU;IAC5C,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;AAC/B,CAAC,CAAC;AAEF,IAAI,4BAA4B,GAAG,UAAC,cAAsB;IACtD,IAAI,WAAW,GAAG,kCAAkC,CAAC,cAAc,CAAC,CAAC;IACrE,EAAE,CAAC,CAAC,WAAW,IAAI,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;IAChC,CAAC;IACD,MAAM,CAAC,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF,IAAI,kCAAkC,GAAG,UAAC,cAAsB;IAC5D,IAAI,WAAW,GAAG,oCAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;IAC5D,EAAE,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACxB,MAAM,CAAC,WAAW,CAAC;IACvB,CAAC;IACD,MAAM,CAAC,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF,IAAI,iBAAiB,GAAG,UAAC,IAAU;IAC/B,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;QACf,MAAM,CAAC,EAAE,CAAC;IACd,CAAC;IACD,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AACrG,CAAC,CAAC;AAEF,IAAI,GAAG,GAAG,qBAAqB,CAAC;AAa/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/D4E;AACf;AACP;AAGR;AACnB;AACK;AACsB;AACf;AACE;AAE1C;IAA4B,0BAAc;IAQtC,gBAAY,IAA8B;QAA9B,6CAA8B;QAA1C,YACI,iBAAO,SAIV;QAHG,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,KAAI,CAAC,KAAK,GAAG,IAAI,oEAAa,EAAE,CAAC;;IACrC,CAAC;IAED,sBAAI,gCAAY;aAAhB;YACI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;QACnC,CAAC;;;OAAA;IAGD,4BAAW,GAAX,UAAY,QAAgB,EAAE,IAAsB;QAChD,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,mEAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;IACnE,CAAC;IAGD,iCAAgB,GAAhB,UAAiB,YAA0B;QACvC,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,YAAY,CAAC;QACvC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,sBAAI,4BAAQ;aAAZ;YACI,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACjC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,CAAC,EAAJ,CAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;QACzC,CAAC;;;OAAA;IAGD,gCAAe,GAAf,UAAgB,CAAO,EAAE,MAAa;QAAb,sCAAa;QAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,sEAAa,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;IAC9D,CAAC;IAED,sCAAqB,GAArB,UAAsB,IAAU,EAAE,EAAQ,EAAE,MAAa;QAAb,sCAAa;QACrD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,sEAAa,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC;IAC/D,CAAC;IAED,mCAAkB,GAAlB,UAAmB,CAAO;QACtB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,YAAE;YACzC,MAAM,CAAC,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,6BAAY,GAAZ,UAAa,IAAU,EAAE,KAAgB,EAAE,qBAAsC;QAAtC,qEAAsC;QAC7E,mFAAmF;QACnF,sFAAkB,CAAC,IAAI,CAAC,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,qBAAqB,CAAC,CAAC;IACpF,CAAC;IAED,kCAAiB,GAAjB,UAAkB,IAAU;QACxB,yDAAyD;QACzD,GAAG,CAAC,CAAgB,UAAgB,EAAhB,SAAI,CAAC,WAAW,EAAhB,cAAgB,EAAhB,IAAgB;YAA/B,IAAI,OAAO;YACZ,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;SACJ;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED,sBAAI,uCAAmB;aAAvB;YACI,MAAM,CAAC,8CAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,WAAC,IAAI,QAAC,CAAC,SAAS,EAAX,CAAW,CAAC,CAAC;QACxD,CAAC;;;OAAA;IAED,wBAAO,GAAP;QACI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,yBAAQ,GAAR;QACI,IAAI,UAAU,GAAG,IAAI,iEAAgB,EAAE,CAAC;QACxC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACb,UAAU,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;QAC7C,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,UAAU,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;QAC9C,CAAC;QACD,MAAM,CAAC,UAAU,CAAC;IACtB,CAAC;IA9EW;QAAX,wDAAU;kCAAc,KAAK;+CAAgB;IAClC;QAAX,wDAAU;kCAAQ,oEAAa;yCAAC;IAcjC;QADC,oDAAM;;;wCACgD,MAAM;6CAE5D;IAGD;QADC,oDAAM;;yCACwB,mEAAY;wCAAG,MAAM;kDAGnD;IAQD;QADC,oDAAM;;yCACY,IAAI;;iDAEtB;IA8CL,aAAC;CAAA,CApF2B,0EAAc,GAoFzC;AApFkB;AAsFnB;IAAiC,+BAAiB;IAC9C;eACI,iBAAO;IACX,CAAC;IAGD,gCAAU,GAAV,UAAW,CAAS;QAChB,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;IACvC,CAAC;IAGD,mCAAa,GAAb,UAAc,CAAS;QACnB,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC;IAED,sBAAI,+BAAM;aAAV;YACI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;;;OAAA;IAED,iDAA2B,GAA3B,UAA4B,QAAQ;QAChC,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC9C,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,MAAM,IAAI,KAAK,CAAC,mBAAiB,IAAI,gDAA2C,6EAAQ,CAAC,SAAS,CAAC,UAAU,CAAG,CAAC,CAAC;YACtH,CAAC;YACD,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,2CAAqB,GAArB,UAAsB,IAAY,EAAE,WAA4B;QAA5B,iDAA4B;QAC5D,EAAE,CAAC,CAAC,yDAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACpB,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,IAAI,MAAM,GAAG,IAAI,CAAC,2BAA2B,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,IAAI,CAAC,iBAAiB,EAAE,EAAtD,CAAsD,CAAC,CAAC;QAC3G,EAAE,CAAC,CAAC,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC;YACzB,MAAM,GAAG,IAAI,CAAC,2BAA2B,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,EAA/D,CAA+D,CAAC,CAAC;YAChH,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACV,4CAA4C;gBAC5C,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC5B,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACnB,IAAI,QAAM,GAAG,CAAG,KAAK,CAAC,CAAC,CAAC,SAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,EAAC,iBAAiB,EAAE,CAAC;oBAC9D,4CAA4C;oBAC5C,MAAM,GAAG,IAAI,CAAC,2BAA2B,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,UAAU,CAAC,QAAM,CAAC,EAA7C,CAA6C,CAAC,CAAC;gBAClG,CAAC;YACL,CAAC;QACL,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAClB,CAAC;IA1CD;QADC,oDAAM;;yCACO,MAAM;wCAAG,MAAM;iDAE5B;IAGD;QADC,oDAAM;;yCACU,MAAM;;oDAEtB;IAoCL,kBAAC;CAAA,CAjDgC,qEAAS,GAiDzC;AAjDuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGsB;AACW;AAClB;AACsB;AACA;AAClB;AACY;AACqB;AAI5E,IAAM,eAAe,GAAG,aAAa,CAAC;AAGtC;IAUI,mBAAoB,OAAgB,EAChB,cAA8B,EAC9B,MAAsB;QAFtB,YAAO,GAAP,OAAO,CAAS;QAChB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,WAAM,GAAN,MAAM,CAAgB;QAEtC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QAErD,IAAI,CAAC,kBAAkB,GAAG,IAAI,mFAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7D,IAAI,CAAC,QAAQ,GAAG,IAAI,yDAAO,EAAE,CAAC;QAE9B,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAEO,wBAAI,GAAZ;QAAA,iBAoBC;QAnBG,IAAI,CAAC,WAAW,GAAG,2DAAU,CAAC,MAAM,CAAC,aAAG;YACpC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAC,KAAK;gBACzC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACR,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,wBAAwB,GAAG,6EAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;oBACvE,KAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,4DAAU,EAAE,EAAE,KAAK,CAAC;gBACtE,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;oBAC3C,KAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,4DAAU,EAAE,CAAC;gBACjD,CAAC;gBACD,KAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACf,kBAAkB;YACtB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,WAAC;YACxB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,gDAAgD,CAAC;QACtE,CAAC,EAAE,IAAI,EAAE;YACL,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC;QAC5C,CAAC,CAAC,CAAC;IACP,CAAC;IAED,sBAAI,mCAAY;aAAhB;YACI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC;QAChD,CAAC;;;OAAA;IAED,sBAAI,kCAAW;aAAf;YACI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC;QAC/C,CAAC;;;OAAA;IAGD,sBAAI,4BAAK;aAAT;YACI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;QACrC,CAAC;;;OAAA;IAEO,+BAAW,GAAnB;QAAA,iBAaC;QAZG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,GAAG,6DAAO,CAAC;YAClB,+EAA+E;YAC/E,0CAA0C;YAC1C,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,0DAAI,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;gBACrD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,GAAG,6EAAQ,CAAC,SAAS,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACvE,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,GAAG,6DAAO,CAAC;YACvB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACzC,KAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE,CAAC;QAChD,CAAC,CAAC,CAAC;IACP,CAAC;IArEW;QAAX,wDAAU;kCAAqB,mFAAiB;yDAAC;IACtC;QAAX,wDAAU;kCAAW,yDAAO;+CAAC;IAmD9B;QADC,sDAAQ;kCACI,4DAAU;;0CAEtB;IAvDC,SAAS;QADd,yEAAU,EAAE;yCAWoB,+DAAO;YACA,6EAAc;YACtB,qEAAc;OAZxC,SAAS,CAuEd;IAAD,gBAAC;CAAA;AAEiB;;;;;;;;;;;;;;;;;;;;;;ACvF+C;AAE3D,2BAA4B,oBAA0C;IACxE,MAAM,CAAC,cAAM,2BAAoB,CAAC,IAAI,CAAC,sBAAsB,CAAC,EAAjD,CAAiD,CAAC;AACnE,CAAC;AAED;;GAEG;AACH;IAAuC,4CAAoB;IAA3D;;IAsBA,CAAC;IAnBU,0CAAO,GAAd;QACI,IAAM,IAAI,GAAa,EAAE,CAAC;QAC1B,iCAAiC;QACjC,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAEM,2CAAQ,GAAf,UAAmB,GAAW;QAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC3B,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,SAAS,CAAC;QACrB,CAAC;IACL,CAAC;IACM,0CAAO,GAAd,UAAe,IAAQ;QACnB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;IACpC,CAAC;IACL,+BAAC;AAAD,CAAC,CAtBsC,yFAAoB,GAsB1D;AAKA;;;;;;;;;;;;;;;;;;;;ACpC8C;AAM/C;IAGI;IACA,CAAC;IAHQ;QAAR,oEAAK,EAAE;kCAAY,KAAK;uDAAS;IADzB,gBAAgB;QAJ5B,wEAAS,CAAC;YACP,QAAQ,EAAE,SAAS;WACQ;SAC9B,CAAC;;OACW,gBAAgB,CAK5B;IAAD,CAAC;AAAA;SALY,gBAAgB,U;;;;;;;;;;;;;;;;;;;;;;ACNW;AACI;AACM;AAElD;IAAA;IA4BA,CAAC;IAjBG,sBAAI,+CAAuB;aAA3B;YACI,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,IAAI,IAAI,CAAC,qBAAqB,IAAI,CAAC,CAAC;QAC7E,CAAC;;;OAAA;IAGD,mDAA8B,GAA9B;QACI,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;IACnC,CAAC;IAGD,0CAAqB,GAArB;QACI,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;QACvC,IAAI,CAAC,8BAA8B,EAAE,CAAC;IAC1C,CAAC;IA1BW;QAAX,wDAAU;;yDAA2B;IAC1B;QAAX,wDAAU;;6DAA+B;IAE9B;QAAX,wDAAU;;uDAAyB;IACxB;QAAX,wDAAU;;2DAA6B;IAC5B;QAAX,wDAAU;;iEAAoC;IAEnC;QAAX,wDAAU;;mDAAqB;IAGhC;QADC,sDAAQ;;;6DAGR;IAGD;QADC,oDAAM;;;;oEAIN;IAGD;QADC,oDAAM;;;;2DAMN;IACL,iBAAC;CAAA;AAED;IAgBI;QACI,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,WAAW,GAAG,IAAI,UAAU,EAAE,CAAC;IACxC,CAAC;IAGD,sBAAI,8BAAS;aAAb;YACI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,IAAI,CAAC,qBAAqB,CAAC;QACtE,CAAC;;;OAAA;IAGD,sBAAI,mCAAc;aAAlB;YACI,MAAM,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC;QACxC,CAAC;;;OAAA;IAGD,iCAAe,GAAf;QACI,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;IAChC,CAAC;IAGD,wBAAM,GAAN,UAAO,MAAc,EAAE,IAAU,EAAE,IAAU;QACzC,IAAI,CAAC,eAAe,GAAG,MAAM,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,mCAAiB,GAAjB;QACI,IAAI,CAAC,WAAW,CAAC,qBAAqB,EAAE,CAAC;IAC7C,CAAC;IAED,wBAAM,GAAN;QACI,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;IACrC,CAAC;IA/CW;QAAX,wDAAU;kCAAkB,kEAAM;oDAAC;IACxB;QAAX,wDAAU;kCAAgB,IAAI;kDAAC;IACpB;QAAX,wDAAU;kCAAgB,8DAAI;kDAAC;IAEpB;QAAX,wDAAU;;wDAA8B;IAC7B;QAAX,wDAAU;;0DAAgC;IAK/B;QAAX,wDAAU;kCAAc,UAAU;gDAAC;IASpC;QADC,sDAAQ;;;4CAGR;IAGD;QADC,sDAAQ;;;iDAGR;IAGD;QADC,oDAAM;;;;kDAGN;IAGD;QADC,4DAAM,CAAC,eAAe,CAAC;;yCACT,kEAAM,EAAQ,IAAI,EAAQ,8DAAI;;yCAI5C;IAUL,cAAC;CAAA;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3F6D;AACtB;AACH;AACS;AAEsB;AACX;AACjB;AACD;AAEkB;AACX;AAE9C;IAA2B,gCAAc;IAGrC,sBAAY,IAAY;QAAxB,YACI,iBAAO,SAEV;QADG,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;IACrB,CAAC;IALW;QAAX,wDAAU;;8CAAc;IAM7B,mBAAC;CAAA,CAP0B,0EAAc,GAOxC;AAED;IAAgC,qCAAuB;IAYnD,2BAAoB,MAAsB;QAA1C,YACI,iBAAO,SAcV;QAfmB,YAAM,GAAN,MAAM,CAAgB;QAGtC,KAAI,CAAC,YAAY,GAAG,IAAI,4DAAW,EAAE,CAAC;QACtC,KAAI,CAAC,WAAW,GAAG,IAAI,qEAAU,EAAE,CAAC;QACpC,0FAAqB,CAAC,UAAU,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;QACnD,0FAAqB,CAAC,WAAW,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC;QAErD,KAAI,CAAC,WAAW,GAAG,IAAI,4DAAU,EAAE,CAAC;QACpC,KAAI,CAAC,aAAa,GAAG,KAAI,CAAC,WAAW,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC;QAEvE,KAAI,CAAC,MAAM,GAAG,+EAAc,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QAEjD,0FAAqB,CAAC,UAAU,CAAC,KAAI,CAAC,YAAY,EAAE,KAAI,EAAE,KAAI,CAAC,aAAa,CAAC,CAAC;;QAC9E,+BAA+B;IACnC,CAAC;IAEO,0CAAc,GAAd,UAAe,GAAiB;QACpC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;IAClC,CAAC;IAEO,8CAAkB,GAAlB,UAAmB,GAAiB;QACxC,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,CAAC;IACvC,CAAC;IAGD,6CAAiB,GAAjB;QACI,gCAAgC;QAChC,IAAI,MAAM,GAAG,IAAI,8DAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACnD,MAAM,CAAC,UAAU,GAAG,uEAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpC,MAAM,CAAC,QAAQ,GAAG,uEAAG,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;QAEnC,IAAI,CAAC,QAAQ,GAAG,IAAI,gFAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACtE,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC;QAEhC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QACnB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,iDAAqB,GAArB,UAAsB,QAA2B;QAC7C,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;QAClC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,4BAA4B;IAChC,CAAC;IAED,uCAAW,GAAX,UAAY,YAAoB;QAC5B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;IAC1D,CAAC;IA1DW;QAAX,wDAAU;kCAAe,4DAAW;2DAAC;IAC1B;QAAX,wDAAU;kCAAc,qEAAU;0DAAC;IACxB;QAAX,wDAAU;kCAAc,4DAAU;0DAAC;IAExB;QAAX,wDAAU;kCAAW,gFAAiB;uDAAC;IAC5B;QAAX,wDAAU;kCAAoB,gFAAiB;gEAAC;IAuBzC;QAAP,oDAAM;;yCAAqB,YAAY;;2DAEvC;IAEO;QAAP,oDAAM;;yCAAyB,YAAY;;+DAE3C;IAGD;QADC,oDAAM;;;wCACc,gFAAiB;8DAWrC;IAWL,wBAAC;CAAA,CA5D+B,qEAAS,GA4DxC;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvFgF;AACjD;AAEyB;AACjB;AAEZ;AAEiD;AACzB;AAEpD;IAAsB,2BAAc;IAWhC,iBAAY,IAAY;QAAxB,YACI,iBAAO,SAKV;QAJG,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,KAAI,CAAC,WAAW,GAAG,IAAI,KAAK,EAAc,CAAC;QAC3C,KAAI,CAAC,MAAM,GAAG,+EAAc,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QACtD,KAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAQ,CAAC;;IACnC,CAAC;IAED,oCAAkB,GAAlB,UAAmB,MAAc;QAC7B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,EAA5B,CAA4B,CAAC,CAAC;IACpE,CAAC;IAED,8CAA4B,GAA5B,UAA6B,MAAc;QACvC,IAAI,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;QAC5C,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;YAChB,IAAI,UAAU,GAAG,IAAI,+DAAU,CAAC,MAAM,CAAC,CAAC;YACxC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAClC,MAAM,CAAC,UAAU,CAAC;QACtB,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED,uCAAqB,GAArB,UAAsB,IAAU;QAC5B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAU;YACrC,GAAG,CAAC,CAAoB,UAAgB,EAAhB,eAAU,CAAC,KAAK,EAAhB,cAAgB,EAAhB,IAAgB;gBAAnC,IAAI,WAAW;gBAChB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,IAAI,CAAC;gBAChB,CAAC;aACJ;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,sDAAoC,GAApC;QACI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,EAAE,EAAE,EAAE;YAChC,IAAI,MAAM,GAAG,EAAE,CAAC,wBAAwB,CAAC;YACzC,IAAI,MAAM,GAAG,EAAE,CAAC,wBAAwB,CAAC;YACzC,MAAM,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,EAAR,CAAQ,CAAC,CAAC;IAC1B,CAAC;IAED,sBAAI,2BAAM;aAAV;YACI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,EAAR,CAAQ,CAAC,CAAC;QAC/C,CAAC;;;OAAA;IAED,sBAAI,0BAAK;aAAT;YACI,IAAI,SAAS,GAAG,+CAAS,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,CAAa,IAAK,QAAC,CAAC,KAAK,EAAP,CAAO,CAAC,CAAC;YACxE,MAAM,CAAC,8CAAQ,CAAC,SAAS,EAAE,WAAC,IAAI,QAAC,CAAC,IAAI,EAAN,CAAM,CAAC,CAAC;QAC5C,CAAC;;;OAAA;IAED,2BAAS,GAAT,UAAU,SAAiB;QACvB,EAAE,CAAC,CAAC,oFAAW,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,SAAS,CAAC,WAAW,EAAE,EAA/C,CAA+C,CAAC,CAAC;IACjF,CAAC;IAED,4BAAU,GAAV,UAAW,MAAc;QACrB,MAAM,CAAC,IAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC;IACpD,CAAC;IAED,+BAAa,GAAb,UAAc,MAAc;QACxB,IAAI,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;QAC7C,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACT,qFAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;QAChD,CAAC;IACL,CAAC;IAED,sBAAI,0CAAqB;aAAzB;YACI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAC,CAAO,EAAE,CAAO;gBACpC,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;oBACxC,MAAM,CAAC,CAAC,CAAC;gBACb,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;oBAC/C,MAAM,CAAC,CAAC,CAAC,CAAC;gBACd,CAAC;gBACD,MAAM,CAAC,CAAC,CAAC;YACb,CAAC,CAAC,CAAC;QACP,CAAC;;;OAAA;IAED,4BAAU,GAAV;QACI,IAAI,QAAQ,GAAG,IAAI,GAAG,EAAqB,CAAC;QAC5C,GAAG,CAAC,CAAa,UAA0B,EAA1B,SAAI,CAAC,qBAAqB,EAA1B,cAA0B,EAA1B,IAA0B;YAAtC,IAAI,IAAI;YACT,IAAI,KAAK,GAAG,EAAE,CAAC;YAEf,yCAAyC;YACzC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YAEhD,+BAA+B;YAC/B,IAAI,GAAG,GAAG,IAAI,kFAAuB,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;YACxE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAEhB,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAC7B;QACD,MAAM,CAAC,QAAQ,CAAC;IACpB,CAAC;IAEO,gCAAc,GAAtB,UAAuB,IAAU;QAC7B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAC;YACtB,EAAE,CAAC,CAAC,CAAC,YAAY,qEAAU,CAAC,CAAC,CAAC;gBAC1B,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC;YACpC,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,6BAAW,GAAX,UAAY,IAAU;QAClB;;;UAGE;QACF,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,8DAA8D;IAClE,CAAC;IAED,sBAAI,kDAA6B;aAAjC;YACI,2BAA2B;YAC3B,IAAI,cAAc,GAAG,IAAI,CAAC,qBAAqB,CAAC;YAChD,IAAI,YAAY,GAAG,IAAI,GAAG,EAAuB,CAAC;YAClD,GAAG,CAAC,CAAa,UAAc,EAAd,iCAAc,EAAd,4BAAc,EAAd,IAAc;gBAA1B,IAAI,IAAI;gBACT,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;oBAC1C,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;gBAC/C,CAAC;gBACD,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAM,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,SAAE,IAAI,GAAE,CAAC;aAC7F;YAED,qBAAqB;YACrB,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,YAAY,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,GAAW;gBACnC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;;;OAAA;IAED,4BAAU,GAAV;QACI,IAAI,mBAAmB,GAAG,IAAI,GAAG,EAA2B,CAAC;QAC7D,GAAG,CAAC,CAAmB,UAAgB,EAAhB,SAAI,CAAC,WAAW,EAAhB,cAAgB,EAAhB,IAAgB;YAAlC,IAAI,UAAU;YACf,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC;SAChE;QACD,MAAM,CAAC,mBAAmB,CAAC;IAC/B,CAAC;IAtJW;QAAX,wDAAU;;yCAAc;IAGb;QAAX,wDAAU;kCAAQ,KAAK;0CAAO;IAoJnC,cAAC;CAAA,CAxJqB,0EAAc,GAwJnC;AAED;IAAyB,8BAAkB;IAIvC;QAAA,YACI,iBAAO,SAGV;QAFG,KAAI,CAAC,MAAM,GAAG,+EAAc,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QACtD,KAAI,CAAC,MAAM,GAAG,IAAI,KAAK,EAAW,CAAC;;IACvC,CAAC;IAED,oCAAe,GAAf,UAAgB,UAAkB;QAC9B,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,UAAU,CAAC,CAAC;QACtC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC1B,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IACL,iBAAC;AAAD,CAAC,CAfwB,qEAAS,GAejC;AAKA;;;;;;;;;;;;;ACzL2C;AACiB;AACS;AAEtE;IAAA;IAwBA,CAAC;IArBU,wBAAS,GAAhB,UAAiB,IAAY;QACzB,EAAE,CAAC,CAAC,kEAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,kEAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,6EAAc,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAClE,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBACvB,IAAI,MAAM,GAAG,IAAI,4FAAwB,CAAC,IAAI,CAAC,CAAC;gBAChD,MAAM,CAAC,OAAO,CAAC;oBACX,SAAS,EAAE;wBACP,WAAW,EAAE;4BACT;gCACI,YAAY,EAAE,MAAM;gCACpB,UAAU,EAAE,MAAM;6BACrB;yBACJ;qBACJ;iBACJ,CAAC,CAAC;gBACH,IAAI,CAAC,cAAc,GAAG,IAAI,6EAAc,CAAC,MAAM,CAAC,CAAC;YACrD,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC/C,CAAC;IACL,CAAC;IACL,qBAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BuC;AACI;AAChB;AACK;AAEjC;IAII,wBAAY,IAAmB;QAAnB,kCAAmB;QAC3B,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;YACf,IAAI,QAAQ,GAAG,IAAI,uDAAa,EAAE,CAAC;YACnC,IAAI,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;QACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IAED,2CAAkB,GAAlB,UAAmB,KAAK;QACpB,6BAA6B;QAC7B,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;QACxB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,CAAC;IAhBW;QAAX,wDAAU;;gDAAc;IAiB7B,qBAAC;CAAA;AAED;IAGI;QACI,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IACpB,CAAC;IAGS,uCAAmB,GAA7B,UAA8B,QAAW;QACrC,EAAE,CAAC,CAAC,iDAAW,CAAC,IAAI,CAAC,KAAK,EAAE,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAvB,CAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC7D,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1B,MAAM,CAAC,QAAQ,CAAC;IACpB,CAAC;IAGS,wCAAoB,GAA9B,UAA+B,UAAe;QAD9C,iBAGC;QADG,UAAU,CAAC,OAAO,CAAC,WAAC,IAAI,YAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAA3B,CAA2B,CAAC,CAAC;IACzD,CAAC;IAGS,4CAAwB,GAAlC,UAAmC,QAAW;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAvB,CAAuB,CAAC,CAAC;IACjE,CAAC;IAGS,gDAA4B,GAAtC;QACI,IAAI,CAAC,KAAK,GAAG,EAAE;IACnB,CAAC;IAED,gCAAY,GAAZ,UAAa,IAAY;QACrB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,IAAI,EAAd,CAAc,CAAC,CAAC;IAChD,CAAC;IAED,qCAAiB,GAAjB,UAAkB,GAAM;QACpB,MAAM,CAAC,iDAAW,CAAC,IAAI,CAAC,KAAK,EAAE,WAAC,IAAI,UAAG,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,EAAlB,CAAkB,CAAC,CAAC;IAC5D,CAAC;IAED,6BAAS,GAAT,UAAU,SAAS,EAAE,SAAa;QAAb,yCAAa;QAC9B,MAAM,CAAC,iDAAW,CAAC,IAAI,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;IACzD,CAAC;IAxCW;QAAX,wDAAU;kCAAkB,KAAK;4CAAI;IAOtC;QADC,oDAAM;;;;wDAON;IAGD;QADC,oDAAM;;;;yDAGN;IAGD;QADC,oDAAM;;;;6DAGN;IAGD;QADC,oDAAM;;;;iEAGN;IAaL,gBAAC;CAAA;AAED,4BAA4B,KAAK,EAAE,OAAO;IACtC,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,yDAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,KAAK,CAAC,OAAO,CAAC,CAAC;IACzB,CAAC;AACL,CAAC;AAED,2BAA8B,KAAe,EAAE,MAAS;IACpD,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;QACtB,EAAE,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;YACjB,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC3B,CAAC;IACL,CAAC,CAAC,CAAC;AACP,CAAC;AAOA;;;;;;;;;;;;;;;;;;;;;ACxFsC;AACO;AACsB;AACpC;AAWhC;IAAA;IACA,CAAC;IADY,cAAc;QAT1B,uEAAQ,CAAC;YACN,YAAY,EAAE;gBACV,uDAAQ;aACX;YACD,OAAO,EAAE;gBACL,uFAAgB;gBAChB,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACrC;SACJ,CAAC;OACW,cAAc,CAC1B;IAAD,qBAAC;CAAA;AAD0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACda;AACM;AACqB;AACrB;AACwB;AACT;AACnC;AACwC;AACL;AAClB;AACe;AAQ1D;IAGI,kBAAmB,OAAsB,EACrB,cAA8B,EAC9B,QAAe,EACf,MAAsB;QAC9B,4CAA4C;QACpC,SAAoB;QALrB,YAAO,GAAP,OAAO,CAAe;QACrB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,aAAQ,GAAR,QAAQ,CAAO;QACf,WAAM,GAAN,MAAM,CAAgB;QAEtB,cAAS,GAAT,SAAS,CAAW;QACpC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACxD,CAAC;IAED,kCAAe,GAAf;QAAA,iBAiBC;QAhBG,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QAErB,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;QAC5C,UAAU,CAAC,SAAS,CAAC,eAAK;YACtB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,IAAI,kBAAkB,GAAG,KAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,CAAC;gBAC1D,kBAAkB,CAAC,SAAS,CAAC,cAAI;oBAC7B,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0BAAwB,8EAAQ,CAAC,SAAS,CAAC,IAAI,CAAG,CAAC,CAAC;oBACrE,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;wBACrC,8BAA8B;oBAClC,CAAC;oBAAC,IAAI,CAAC,CAAC;oBAER,CAAC;gBACL,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,kCAAe,GAAf;QACI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC;IAC9C,CAAC;IAED,2CAAwB,GAAxB;QAAA,iBAUC;QATG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,4FAAkB,EAAE;YAClC,KAAK,EAAE,0CAA0C;YACjD,SAAS,EAAE,wCAAwC;YACnD,IAAI,EAAE,UAAC,WAAW,EAAE,KAAK,EAAE,KAAK;gBAC5B,OAAO,CAAC,GAAG,CAAC,wBAAwB,GAAG,WAAW,CAAC,aAAa,GAAG,aAAa,GAAG,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBAC7I,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,iBAAiB,GAAG,WAAW,CAAC,aAAa,CAAC;gBACnE,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,qBAAqB,GAAG,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC;YAC1E,CAAC;SACJ,CAAC,CAAC;IACP,CAAC;IAED,4CAAyB,GAAzB;QAAA,iBAwBC;QAvBG,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,WAAW,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAC9D,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC;YACrE,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,UAAC,WAAW;gBAC7D,IAAI,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,CAAC,OAAO,IAAI,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,qBAAqB,EAAlE,CAAkE,CAAC,CAAC;gBAC7G,KAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,SAAS,CAAC,cAAI;oBAElE,IAAI,MAAM,GAAG,IAAI,qFAAiB,CAAC,KAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;oBACtE,MAAM,CAAC,+BAA+B,CAAC,IAAI,CAAC,CAAC;oBAE7C,EAAE,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;wBACtB,IAAI,QAAQ,GAAG,EAAE,CAAC;wBAClB,GAAG,CAAC,CAAY,UAAkC,EAAlC,UAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAlC,cAAkC,EAAlC,IAAkC;4BAA7C,IAAI,GAAG;4BACR,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;yBACxD;wBACD,IAAI,QAAQ,GAAG,0DAAI,CAAC,QAAQ,CAAC,CAAC;wBAC9B,IAAI,CAAC,GAAG,8EAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;wBACrC,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAiB,CAAG,CAAC,CAAC;oBAC3C,CAAC;oBACD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;oBACnC,KAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC7E,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IAED,mCAAgB,GAAhB;QAAA,iBA4BC;QA3BG,8CAA8C;QAC9C,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC;QACnD,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,UAAC,WAAW;gBAC7D,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;gBACjC,IAAI,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,CAAC,OAAO,IAAI,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,mBAAmB,EAAhE,CAAgE,CAAC,CAAC;gBAC3G,KAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,WAAW,EAAE,KAAK,EAAE,KAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;YAC3G,CAAC,EAAE,UAAC,KAAK;gBACL,OAAO,CAAC,GAAG,CAAC,uBAAuB,GAAG,KAAK,CAAC,CAAC;YACjD,CAAC,CAAC,CAAC;QACP,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;YACjC,iEAAiE;YACjE,iCAAiC;YACjC,gBAAgB;YAChB,0EAA0E;YAC1E,MAAM;YACN,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,4FAAkB,EAAE;gBAClC,KAAK,EAAE,6BAA6B;gBACpC,SAAS,EAAE,2BAA2B;gBACtC,IAAI,EAAE,UAAC,WAAW,EAAE,KAAK,EAAE,KAAK;oBAC5B,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,eAAe,GAAG,WAAW,CAAC,aAAa,CAAC;oBACjE,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,mBAAmB,GAAG,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC;oBACpE,OAAO,CAAC,GAAG,CAAC,wBAAwB,GAAG,WAAW,CAAC,aAAa,GAAG,aAAa,GAAG,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBAC/G,CAAC;aACJ,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IAED,oCAAiB,GAAjB;QACI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;IAChD,CAAC;IAED,gCAAa,GAAb;QACI,IAAI,QAAQ,GAAG,IAAI,sFAAW,CAAC,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAC3E,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;IAC3C,CAAC;IAED,wBAAK,GAAL;QACI,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC;IACjC,CAAC;IAED,yBAAM,GAAN;QACI,6BAA6B;QAC7B,oCAAoC;QACpC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAC5B,CAAC;IAxHQ,QAAQ;QAJpB,wEAAS,CAAC;YACP,QAAQ,EAAE,WAAW;WACG;SAC3B,CAAC;0FAI2C;YACL,kEAAc;YACpB,gFAAK;YACP,gEAAc;YAEX,KAAS;OAR/B,QAAQ,CAyHpB;IAAD,CAAC;AAAA;SAzHY,QAAQ,e;;;;;;;;;;;;;;;;;;;;;;AClBmC;AACC;AACX;AAGkB;AAOhE;IAOI,4BAAmB,OAAsB,EACtB,SAAoB,EACnB,EAAkB,EAClB,GAAU;QAHX,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,OAAE,GAAF,EAAE,CAAgB;QAClB,QAAG,GAAH,GAAG,CAAO;QARvB,YAAO,GAAY,KAAK,CAAC;QACzB,UAAK,GAAW,KAAK,CAAC;QAErB,SAAI,GAAoD,IAAI,CAAC;QAMjE,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,uBAAuB,CAAC;IACnE,CAAC;IAED,4CAAe,GAAf;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,4CAAe,GAAf;IACA,CAAC;IAED,wCAAW,GAAX,UAAY,cAAc;QAA1B,iBAoBC;QAnBG,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;YACjB,iEAAiE;YACjE,4DAA4D;YAE5D,4BAA4B;YAC5B,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,mBAAmB,CAAC;YACvE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,sFAAgB,EAAE;gBAChC,UAAU,EAAE,cAAc,CAAC,EAAE;gBAC7B,OAAO,EAAG,SAAS;gBACnB,MAAM,EAAE,UAAC,EAAe,EAAE,KAAY,EAAE,KAAK;oBACzC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACR,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;oBACjC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,KAAI,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oBACzB,CAAC;oBACD,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;gBACvB,CAAC;aACJ,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IAEO,uCAAU,GAAlB;QAAA,iBAQC;QAPG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,UAAC,MAAM;YACxC,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,qEAAqE;YACrE,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;IACP,CAAC;IArDQ,kBAAkB;QAJ9B,wEAAS,CAAC;YACP,QAAQ,EAAE,sBAAsB;WACG;SACtC,CAAC;6EAQ2C;YACX,qEAAS;YACf,mEAAc;YACb,KAAK;OAVrB,kBAAkB,CAsD9B;IAAD,CAAC;AAAA;SAtDY,kBAAkB,gB;;;;;;;;;;;;;;;;;;;;;ACZyB;AACC;AACX;AAS9C;IAUI,0BAAmB,OAAsB,EACtB,SAAoB,EACnB,EAAkB,EAClB,GAAU;QAHX,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,OAAE,GAAF,EAAE,CAAgB;QAClB,QAAG,GAAH,GAAG,CAAO;QAZ9B,YAAO,GAAY,KAAK,CAAC;QAEzB,WAAM,GAAG,EAAE,CAAC;QAGJ,SAAI,GAAoD,IAAI,CAAC;QASjE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,uBAAuB,CAAC;IACnE,CAAC;IAED,yCAAc,GAAd;QAAA,iBAWC;QAVG,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,UAAC,WAAW;YAC7D,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;YACjC,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,KAAI,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;QACnB,CAAC,EAAE,aAAG;YACF,OAAO,CAAC,GAAG,CAAC,mCAAmC,GAAG,GAAG,CAAC,CAAC;YACvD,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;YAC3B,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,uCAAY,GAAZ,UAAa,KAAK;QACd,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC;QAClC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QACvC,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACvB,CAAC;IAvCQ,gBAAgB;QAJ5B,wEAAS,CAAC;YACP,QAAQ,EAAE,oBAAoB;WACG;SACpC,CAAC;6EAW2C;YACX,qEAAS;YACf,mEAAc;YACb,KAAK;OAbrB,gBAAgB,CAyC5B;IAAD,CAAC;AAAA;SAzCY,gBAAgB,gB;;;;;;;;;;;;;;;;;;;;ACXU;AACO;AACZ;AACkC;AAWpE;IAAA;IACA,CAAC;IADY,eAAe;QAT3B,uEAAQ,CAAC;YACN,YAAY,EAAE;gBACV,yDAAS;aACZ;YACD,OAAO,EAAE;gBACL,uFAAgB;gBAChB,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;aACtC;SACJ,CAAC;OACW,eAAe,CAC3B;IAAD,sBAAC;CAAA;AAD2B;;;;;;;;;;;;;;;;;;;;;ACdW;AACO;AACsB;AAChC;AAYpC;IAAA;IACA,CAAC;IADY,gBAAgB;QAV5B,uEAAQ,CAAC;YACN,YAAY,EAAE;gBACV,2DAAU;aACb;YACD,OAAO,EAAE;gBACL,uFAAgB;gBAChB,2BAA2B;gBAC3B,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACvC;SACJ,CAAC;OACW,gBAAgB,CAC5B;IAAD,uBAAC;CAAA;AAD4B;;;;;;;;;;;;;;;;;;;;;;;;ACfW;AACuB;AACpB;AACI;AACc;AAO7D;IAII,oBAAmB,OAAsB,EACtB,UAA0B,EAC1B,SAA0B,EAC1B,SAAoB;QAHpB,YAAO,GAAP,OAAO,CAAe;QACtB,eAAU,GAAV,UAAU,CAAgB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAW;QANvC,gBAAW,GAAW,EAAE,CAAC;QAOrB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;IACtD,CAAC;IAEM,2BAAM,GAAb;QAAA,iBAcC;QAbG,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC;YACtD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBAClB,MAAM,CAAC,CAAC,CAAC;YACb,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBAClB,MAAM,CAAC,CAAC,CAAC,CAAC;YACd,CAAC;YACD,MAAM,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC9B,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,KAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,EAAjE,CAAiE,CAAC,CAAC;QACnG,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAClB,CAAC;IAEM,mCAAc,GAArB;QACI,IAAI,UAAU,GAAG,IAAI,kEAAM,EAAE,CAAC;QAC9B,UAAU,CAAC,IAAI,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE;YACnC,MAAM,EAAE,UAAU;YAClB,SAAS,EAAE,IAAI;YACf,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;SACvC,CAAC;IACN,CAAC;IAEO,+BAAU,GAAlB,UAAmB,UAAkB;QACjC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAuB,UAAY,CAAC,CAAC;QACtD,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACvD,CAAC;IAEM,uCAAkB,GAAzB,UAA0B,MAAc;QACpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAC,MAAM,EAAE,MAAM,EAAC,CAAC;IAC5D,CAAC;IAED,oCAAe,GAAf;QACI,YAAY;QACZ,yBAAyB;QACzB,iGAAiG;IACrG,CAAC;IAED,kCAAa,GAAb,UAAc,MAAc;QAA5B,iBAsBC;QArBG,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAC9B,OAAO,EAAE,eAAe;YACxB,OAAO,EAAE;gBACL;oBACI,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;oBACT,CAAC;iBACJ;gBACD;oBACI,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACL,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;4BACjB,KAAI,CAAC,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;wBACtD,CAAC,CAAC,CAAC;wBACH,MAAM,CAAC,KAAK,CAAC;oBACjB,CAAC;iBACJ;aACJ;SACJ,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE;IACnB,CAAC;IA1EQ,UAAU;QAJtB,wEAAS,CAAC;YACP,QAAQ,EAAE,aAAa;WACG;SAC7B,CAAC;0FAK2C;YACV,sEAAc;YACf,gEAAe;YACf,OAAS;OAP9B,UAAU,CA2EtB;IAAD,CAAC;AAAA;SA3EY,UAAU,e;;;;;;;;;;;;;;;;;;;ACXkB;AACO;AACO;AAUvD;IAAA;IAAuC,CAAC;IAA3B,wBAAwB;QARpC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,4EAAkB;aACnB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,4EAAkB,CAAC;aAC7C;SACF,CAAC;OACW,wBAAwB,CAAG;IAAD,+BAAC;CAAA;AAAH;;;;;;;;;ACZrC;AAAA,IAAM,SAAS,GAAG,mBAAO,CAAC,GAAqB,CAAC,CAAC;AAEjD;IAAA;IAIA,CAAC;IAHiB,kBAAS,GAAvB,UAAwB,KAAU;QAC9B,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IACL,eAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;ACNwC;AACO;AACG;AAUnD;IAAA;IAAqC,CAAC;IAAzB,sBAAsB;QARlC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,wEAAgB;aACjB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC;aAC3C;SACF,CAAC;OACW,sBAAsB,CAAG;IAAD,6BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZK;AAEC;AACH;AACM;AAK5C;IAMI;QAJA,aAAQ,GAAG,4DAAQ,CAAC;QACpB,aAAQ,GAAG,kEAAU,CAAC;QACtB,aAAQ,GAAG,+DAAS,CAAC;IAIrB,CAAC;IARQ,QAAQ;QAHpB,wEAAS,CAAC;WACiB;SAC3B,CAAC;;OACW,QAAQ,CASpB;IAAD,CAAC;AAAA;SATY,QAAQ,e;;;;;;;;;;;;;;;;;;;;ACTqB;AACI;AAM9C;IAEE,mBAAmB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;IAEzC,CAAC;IAJU,SAAS;QAJrB,wEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACG;SAC1B,CAAC;kBAGyC;OAF9B,SAAS,CAMrB;IAAD,CAAC;AAAA;SANY,SAAS,e;;;;;;;;;;;;ACPqD;AAElC;AAChB;AAEzB,yDAAG,CAAC,UAAC,KAAK;IACN,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;QAC1B,kEAAkE;IACtE,CAAC;IAAC,IAAI,CAAC,EAAE,EAAC,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;QAChC,yHAAyH;IAC7H,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,yGAAsB,EAAE,CAAC,eAAe,CAAC,8DAAS,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;ACXxB;AAC0B;AAGrB;AAEjC;IAAA;QACI,WAAM,GAAa,IAAI,KAAK,EAAU,CAAC;QACvC,aAAQ,GAAa,IAAI,KAAK,EAAU,CAAC;QACzC,OAAE,GAAY,IAAI,CAAC;IAgBvB,CAAC;IAdU,oCAAS,GAAhB,UAAiB,CAAS;QACtB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACpB,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC;IACpB,CAAC;IAEM,sCAAW,GAAlB,UAAmB,CAAS;QACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC;IAEM,uBAAM,GAAb,UAAc,gBAAwB;QAClC,IAAI,UAAU,GAAG,IAAI,gBAAgB,EAAE,CAAC;QACxC,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;QACvC,MAAM,CAAC,UAAU,CAAC;IACtB,CAAC;IACL,uBAAC;AAAD,CAAC;AAED;IAMI,uBAAY,IAAU;QAClB,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,gCAAQ,GAAR,UAAS,IAAU;QACf,MAAM,CAAC,gDAAU,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,+BAAO,GAAP;QACI,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1E,CAAC;IAED,gCAAQ,GAAR,UAAS,IAAU;QACf,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1B,CAAC;IACL,oBAAC;AAAD,CAAC;AAED;IAQI,uBAAY,OAAgB;QACxB,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAAc,CAAC;QAC5C,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC;IAED,sBAAI,gCAAK;aAAT;YACI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QAC9B,CAAC;;;OAAA;IAED,sBAAI,iCAAM;aAAV;YACI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QAC/B,CAAC;;;OAAA;IAED,gCAAQ,GAAR;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,qBAAqB,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;YACjD,MAAM,KAAK,CAAC,8CAA8C,CAAC,CAAC;QAChE,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;QAC1C,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;YACvD,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;QAC/D,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;YACnD,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;QAC3D,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,IAAI,CAAC,CAAC,CAAC,CAAC;YACtC,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;QACnE,CAAC;IACL,CAAC;IAED,sBAAI,oDAAyB;aAA7B;YACI,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvD,CAAC;;;OAAA;IAEL,oBAAC;AAAD,CAAC;AAED,qBAAqB,SAAe,EAAE,OAAa;IAC/C,IAAI,QAAQ,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IACnC,MAAM,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,QAAQ,CAAC;AAChE,CAAC;AAED;IAKI,mBAAY,KAAW,EAAE,GAAS,EAAE,OAAa;QAC7C,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACpB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,MAAM,KAAK,CAAC,mDAAmD,CAAC,CAAC;QACrE,CAAC;IACL,CAAC;IAED,gCAAY,GAAZ,UAAa,KAAgB;QACzB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,CAAC;YACvC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,CAAC;YAClC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC;YACpC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC;IAED,iCAAa,GAAb,UAAc,IAAU;QACpB,MAAM,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC3D,CAAC;IAED,sBAAI,uCAAgB;aAApB;YACI,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvD,CAAC;;;OAAA;IAED,2BAAO,GAAP;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,MAAM,CAAI,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,YAAO,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAI,CAAC;QAClF,CAAC;QACD,MAAM,CAAC,KAAG,IAAI,CAAC,UAAU,CAAC,YAAY,EAAI,CAAC;IAC/C,CAAC;IACL,gBAAC;AAAD,CAAC;AAED;;;GAGG;AACH;IAII,wBAAY,IAAU;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,mBAAmB,GAAG,IAAI,GAAG,EAA6B,CAAC;IACpE,CAAC;IAED,sBAAI,oCAAQ;aAAZ;YACI,MAAM,CAAC,qFAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,CAAC;;;OAAA;IAED,sBAAI,kCAAM;aAAV;YACI,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,EAAR,CAAQ,CAAC,CAAC;QAC1E,CAAC;;;OAAA;IAED,sBAAI,uCAAW;aAAf;YACI,MAAM,CAAC,KAAK,CAAC,IAAI,CAAa,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC,CAAC;QACnE,CAAC;;;OAAA;IAED,sBAAI,0DAA8B;aAAlC;YACI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,CAAa,EAAE,CAAa;gBACtD,EAAE,CAAC,CAAC,CAAC,CAAC,4BAA4B,GAAG,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBAClE,MAAM,CAAC,CAAC,CAAC;gBACb,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,4BAA4B,GAAG,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC;oBACzE,MAAM,CAAC,CAAC,CAAC,CAAC;gBACd,CAAC;gBACD,MAAM,CAAC,CAAC,CAAC;YACb,CAAC,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,EAAR,CAAQ,CAAC,CAAC;QAC1B,CAAC;;;OAAA;IAED,kCAAS,GAAT,UAAU,CAAS;QACf,IAAI,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAChD,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,mCAAU,GAAV,UAAW,UAAsB,EAAE,IAAU;QACzC,EAAE,EAAC,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC;YACpB,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;QACtD,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACrD,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC;IACL,CAAC;IAED,uCAAc,GAAd,UAAe,IAAU;QAAzB,iBAgBC;QAfG,gEAAgE;QAChE,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;QAC/B,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,WAAC;YAC3B,IAAI,KAAK,GAAG,KAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAChC,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAC,CAAC;YAClB,EAAE,EAAC,yDAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC;YACD,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;QACpB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iDAAwB,GAAxB,UAAyB,IAAU;QAC/B,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;IAC5C,CAAC;IAED,wCAAe,GAAf,UAAgB,MAAc;QAC1B,IAAI,UAAU,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YACb,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC;QAC5B,CAAC;QACD,MAAM,CAAC,EAAE,CAAC;IACd,CAAC;IAED,8CAAqB,GAArB,UAAsB,MAAc;QAChC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,EAA5B,CAA4B,CAAC,CAAC;IACpE,CAAC;IAED,yCAAgB,GAAhB,UAAiB,MAAc;QAC3B,IAAI,UAAU,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YACb,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;QAC1D,CAAC;QACD,MAAM,CAAC,CAAC,CAAC;IACb,CAAC;IAED,gCAAO,GAAP;QAAA,iBAKC;QAJG,IAAI,gBAAgB,GAAG,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,WAAC;YAC5D,MAAM,CAAI,CAAC,CAAC,IAAI,WAAM,KAAI,CAAC,SAAS,CAAC,CAAC,CAAG,CAAC;QAC9C,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG,KAAK,GAAG,4CAAM,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;IAC5E,CAAC;IAED,sCAAa,GAAb,UAAc,UAAsB,EAAE,IAAU,EAAE,SAAwB;QACtE,IAAI,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACrD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACT,MAAM,KAAK,CAAC,mDAAmD,CAAC,CAAC;QACrE,CAAC;QACD,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;IAChC,CAAC;IAED,wCAAe,GAAf,UAAgB,MAAc;QAC1B,IAAI,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;QACnD,MAAM,CAAC,SAAS,IAAI,IAAI,CAAC;IAC7B,CAAC;IAED,oCAAW,GAAX,UAAY,KAAa,EAAE,OAAuB,EAAE,MAAqB;QAArB,sCAAqB;QACrE,uCAAuC;QACvC,IAAI,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAC5D,EAAE,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACvB,MAAM,KAAK,CAAC,eAAa,KAAK,yCAAsC,CAAC,CAAC;QAC1E,CAAC;QACD,IAAI,KAAK,GAAG,mBAAmB,CAAC,KAAK,CAAC;QACtC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACf,IAAI,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;YAC9D,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;gBACrD,IAAI,sBAAoB,GAAG,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;gBAChE,KAAK,CAAC,OAAO,CAAC,WAAC;oBACX,OAAO,CAAC,UAAU,CAAC,sBAAoB,EAAE,CAAC,CAAC,CAAC;gBAChD,CAAC,CAAC,CAAC;gBACH,IAAI,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACzC,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;gBAClE,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACT,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC;gBACpC,CAAC;YACL,CAAC;QACL,CAAC;IACL,CAAC;IAED,iDAAwB,GAAxB,UAAyB,MAAc,EAAE,IAAU;QAC/C,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;IACpE,CAAC;IACL,qBAAC;AAAD,CAAC;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5S8D;AAClC;AACkB;AACC;AACI;AACoB;AAC1C;AACa;AAO3C;IAII,iCAAoB,KAAgB,EAChB,MAAsB,EACvB,WAA8B;QAF7B,UAAK,GAAL,KAAK,CAAW;QAChB,WAAM,GAAN,MAAM,CAAgB;QACvB,gBAAW,GAAX,WAAW,CAAmB;IACjD,CAAC;IAGD,sBAAI,4CAAO;aAAX;YACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,EAAE,CAAC;YACd,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;QACtC,CAAC;;;OAAA;IAGD,sBAAI,yCAAI;aAAR;YACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,EAAE,CAAC;YACd,CAAC;YACD,+DAA+D;YAC/D,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;QACtC,CAAC;;;OAAA;IAED,gDAAc,GAAd,UAAe,OAAO;QAClB,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,0EAAgB,EAAE,EACvD,CAAC,CAAC;QACH,OAAO,CAAC,OAAO,CAAC;YACZ,EAAE,EAAE,OAAO;SACd,CAAC,CAAC;IACP,CAAC;IAED,8CAAY,GAAZ,UAAa,GAAG;QACZ,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,EAArB,CAAqB,CAAC,CAAC;QAC/D,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IAED,gDAAc,GAAd,UAAe,KAAK;QAChB,EAAE,CAAC,CAAC,qDAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjB,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;QACD,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC;IACnB,CAAC;IAED;;;;;;;;OAQG;IACH,mDAAiB,GAAjB,UAAkB,GAAG,EAAE,SAAS;QAC5B,IAAI,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC;QAClC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACV,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACvD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACR,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;QAED,IAAI,YAAY,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,MAAM,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;IACjF,CAAC;IAED;;;OAGG;IACH,sDAAoB,GAApB,UAAqB,GAAW,EAAE,SAAS;QACvC,EAAE,CAAC,CAAC,GAAG,YAAY,kEAAM,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;gBACd,OAAO,CAAC,KAAK,CAAC,kCAAkC,CAAC,CAAC;gBAClD,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,IAAI,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC;YAClC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACV,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC1B,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACvD,CAAC;IACL,CAAC;IAED,wCAAM,GAAN,UAAO,GAAW,EAAE,IAAU,EAAE,SAAiB;QAC7C,EAAE,CAAC,CAAC,GAAG,YAAY,kEAAM,CAAC,CAAC,CAAC;YACxB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACvD,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,GAAG,GAAG,MAAM,GAAG,IAAI,CAAC,YAAY,EAAE,GAAG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YAEtF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QACvB,CAAC;IACL,CAAC;IAED,yCAAO,GAAP,UAAQ,GAAW;QACf,EAAE,CAAC,CAAC,GAAG,YAAY,kEAAM,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;QACpB,CAAC;QACD,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC1B,CAAC;IAGD,sBAAI,oDAAe;aAAnB;YACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,IAAI,IAAI,CAAC,CAAC,CAAC;gBACtE,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC;QAC/C,CAAC;;;OAAA;IAED,sBAAI,0CAAK;aAAT;YACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACxB,MAAM,CAAC,SAAS,CAAC;YACrB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;QACrC,CAAC;;;OAAA;IAtHD;QADC,oEAAK,EAAE;kCACC,2FAAiB;6DAAC;IAQ3B;QADC,sDAAQ;kCACM,KAAK;;0DAKnB;IAGD;QADC,sDAAQ;kCACG,KAAK;;uDAMhB;IAoFD;QADC,sDAAQ;kCACc,kEAAM;;kEAK5B;IAjHQ,uBAAuB;QALnC,wEAAS,CAAC;YACP,mDAAmD;YACnD,QAAQ,EAAE,iBAAiB;WACQ;SACtC,CAAC;kFAKsC;YACR,wEAAc;YACV,iBAAiB;OANxC,uBAAuB,CAyHnC;IAAD,CAAC;AAAA;SAzHY,uBAAuB,W;;;;;;;ACdpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 148;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 148\n// module chunks = 6","import {APP_INITIALIZER, ErrorHandler, Injector, NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {IonicApp, IonicErrorHandler, IonicModule} from 'ionic-angular';\nimport {MyApp} from './app.component';\n\nimport {AboutPage} from '../pages/about/about';\nimport {TabsPage} from '../pages/tabs/tabs';\n\nimport {StatusBar} from '@ionic-native/status-bar';\nimport {SplashScreen} from '@ionic-native/splash-screen';\nimport {ComponentsModule} from \"../components/components.module\";\nimport {NgPipesModule} from \"angular-pipes\";\nimport {HttpClientModule} from \"@angular/common/http\";\nimport {IonicStorageModule} from \"@ionic/storage\";\nimport {GAPIS} from \"../common/gapis-auth\";\nimport {SheetSelectionPageModule} from \"../pages/sheet-selection/sheet-selection.module\";\nimport {TabSelectionPageModule} from \"../pages/tab-selection/tab-selection.module\";\nimport {ConfigurationService} from \"ionic-configuration-service\";\nimport {LoggingService} from \"ionic-logging-service\";\nimport {loadConfiguration} from \"./logging-configuration\";\nimport {ServerProvider} from \"../providers/server/server\";\nimport {HomePageModule} from \"../pages/home/home.module\";\nimport {LoginPageModule} from \"../pages/login/login.module\";\nimport {RootStore} from \"../store/root\";\nimport {PeoplePageModule} from \"../pages/people/people.module\";\n\n@NgModule({\n    declarations: [\n        MyApp,\n        AboutPage,\n        TabsPage\n    ],\n    imports: [\n        HttpClientModule,\n        BrowserModule,\n        NgPipesModule,\n        IonicModule.forRoot(MyApp),\n        IonicStorageModule.forRoot(),\n        ComponentsModule,\n        SheetSelectionPageModule,\n        TabSelectionPageModule,\n        HomePageModule,\n        LoginPageModule,\n        PeoplePageModule,\n\n    ],\n    bootstrap: [IonicApp],\n    entryComponents: [\n        MyApp,\n        AboutPage,\n        TabsPage,\n    ],\n    providers: [\n        StatusBar,\n        SplashScreen,\n        RootStore,\n        ConfigurationService,\n        {\n            provide: APP_INITIALIZER,\n            useFactory: loadConfiguration,\n            deps: [ConfigurationService],\n            multi: true\n        },\n        {provide: ErrorHandler, useClass: IonicErrorHandler},\n        // {\n        //     provide: DataStoreProvider,\n        //     useFactory: defaultDSPSetup,\n        //     deps: [Apollo, HttpLink]\n        // },\n        LoggingService,\n        GAPIS,\n        ServerProvider\n    ]\n})\n\nexport class AppModule {\n    static injector: Injector;\n\n    constructor(injector: Injector) {\n        AppModule.injector = injector;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","var map = {\n\t\"../pages/availability-options/availability-options.module\": [\n\t\t638,\n\t\t5\n\t],\n\t\"../pages/generic-list-of-things/generic-list-of-things.module\": [\n\t\t640,\n\t\t4\n\t],\n\t\"../pages/home/home.module\": [\n\t\t411\n\t],\n\t\"../pages/login/login.module\": [\n\t\t415\n\t],\n\t\"../pages/people/people.module\": [\n\t\t417\n\t],\n\t\"../pages/person-assignment/person-assignment.module\": [\n\t\t641,\n\t\t3\n\t],\n\t\"../pages/person-details/person-details.module\": [\n\t\t642,\n\t\t0\n\t],\n\t\"../pages/role-detail/role-detail.module\": [\n\t\t643,\n\t\t2\n\t],\n\t\"../pages/sheet-selection/sheet-selection.module\": [\n\t\t419\n\t],\n\t\"../pages/tab-selection/tab-selection.module\": [\n\t\t420\n\t],\n\t\"../pages/try-to-schedule-with-other/try-to-schedule-with-other.module\": [\n\t\t639,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 192;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 192\n// module chunks = 6","import * as moment from \"moment\";\nimport {Moment} from \"moment\";\n\nlet constructSensibleDate = (year: number, month: number, day: number) => {\n    return new Date(year, month - 1, day);\n};\n\nlet addDaysToDate = (date: Date, days: number): Date => {\n    let new_date = new Date(date);\n    new_date.setDate(date.getDate() + days);\n    return new_date;\n};\n\nlet isDateValid = (date: Date): boolean => {\n    return !isNaN(date.getTime());\n};\n\nlet throwOnInvalidDate = (date: Date, message: string = \"Date is not valid\") => {\n    if (!isDateValid(date)) {\n        throw new Error(message);\n    }\n};\n\nlet formatDateForGoogleSpreadsheet = (date: Date): string => {\n    return date.toDateString();\n};\n\nlet parseDateFromSpreadsheetDate = (date_as_string: string): Date => {\n    let moment_date = parseMomentDateFromSpreadsheetDate(date_as_string);\n    if (moment_date && moment_date.isValid()) {\n        return moment_date.toDate();\n    }\n    return null;\n};\n\nlet parseMomentDateFromSpreadsheetDate = (date_as_string: string): Moment => {\n    let moment_date = moment(date_as_string, \"ddd MMM DD YYYY\");\n    if (moment_date.isValid()) {\n        return moment_date;\n    }\n    return null;\n};\n\nlet dayAndHourForDate = (date: Date): string => {\n    if (date == null) {\n        return \"\";\n    }\n    return date.getFullYear() + \"/\" + date.getMonth() + \"/\" + date.getDate() + \"@\" + date.getHours();\n};\n\nlet csd = constructSensibleDate;\n\nexport {\n    constructSensibleDate,\n    addDaysToDate,\n    isDateValid,\n    throwOnInvalidDate,\n    formatDateForGoogleSpreadsheet,\n    dayAndHourForDate,\n    parseDateFromSpreadsheetDate,\n    parseMomentDateFromSpreadsheetDate,\n    csd\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/common/date-utils.ts","import {Availability, AvailabilityUnit, SchedulePrefs} from \"./availability\";\nimport {BaseStore, ObjectWithUUID} from \"./common/base_model\";\nimport {throwOnInvalidDate} from \"./common/date-utils\";\nimport {RuleFacts} from \"./rule_based/rule-facts\";\n\nimport {Unavailablity} from \"./unavailability\";\nimport * as _ from \"lodash\";\nimport {isUndefined} from \"util\";\nimport {SafeJSON} from \"../common/json/safe-stringify\";\nimport {action, observable} from \"mobx\";\nimport {ObjectValidation} from \"./shared\";\n\nexport class Person extends ObjectWithUUID {\n    name: string;\n    email: string;\n    phone: string;\n\n    @observable unavailable: Array<Unavailablity>;\n    @observable prefs: SchedulePrefs;\n\n    constructor(name: string = \"put name here\") {\n        super();\n        this.name = name;\n        this.unavailable = [];\n        this.prefs = new SchedulePrefs();\n    }\n\n    get availability(): Availability {\n        return this.prefs.availability;\n    }\n\n    @action\n    avail_every(a_number: number, unit: AvailabilityUnit): Person {\n        return this.set_availability(new Availability(a_number, unit));\n    }\n\n    @action\n    set_availability(availability: Availability): Person {\n        this.prefs.availability = availability;\n        return this;\n    }\n\n    get initials() {\n        let words = this.name.split(\" \");\n        return words.map(w => w[0]).join(\".\")\n    }\n\n    @action\n    add_unavailable(d: Date, reason = null) {\n        this.unavailable.push(new Unavailablity(d, null, reason));\n    }\n\n    add_unavailable_range(from: Date, to: Date, reason = null) {\n        this.unavailable.push(new Unavailablity(from, to, reason));\n    }\n\n    remove_unavailable(d: Date) {\n        this.unavailable = this.unavailable.filter(ud => {\n            return !ud.matches_single_date(d);\n        });\n    }\n\n    is_available(date: Date, facts: RuleFacts, record_unavailability: boolean = false) {\n        // console.log(\"Testing availability with: \" + this.availability.constructor.name);\n        throwOnInvalidDate(date);\n        return this.availability.is_available(this, date, facts, record_unavailability);\n    }\n\n    is_unavailable_on(date: Date) {\n        // See if this date is inside the unavailable date ranges\n        for (let unavail of this.unavailable) {\n            if (unavail.contains_date(date)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    get unavailable_by_date(): Array<Unavailablity> {\n        return _.sortBy(this.unavailable, u => u.from_date);\n    }\n\n    valueOf() {\n        return this.name;\n    }\n\n    validate(): ObjectValidation {\n        let validation = new ObjectValidation();\n        if (!this.name) {\n            validation.add_error(\"Name is required\");\n        }\n        if (!this.email) {\n            validation.add_error(\"Email is required\");\n        }\n        return validation;\n    }\n}\n\nexport class PeopleStore extends BaseStore<Person> {\n    constructor() {\n        super();\n    }\n\n    @action\n    add_person(p: Person): Person {\n        return this.add_object_to_array(p);\n    }\n\n    @action\n    remove_person(p: Person) {\n        this.remove_object_from_array(p);\n    }\n\n    get people(): Array<Person> {\n        return this.items;\n    }\n\n    try_find_single_person_with(callback) {\n        let all_people = this.people.filter(callback);\n        if (all_people.length) {\n            if (all_people.length > 1) {\n                throw new Error(`Searching for ${name} returns more than one person. Returns: ${SafeJSON.stringify(all_people)}`);\n            }\n            return all_people[0];\n        }\n        return null;\n    }\n\n    find_person_with_name(name: string, fuzzy_match: boolean = false) {\n        if (isUndefined(name)) {\n            return null;\n        }\n        let person = this.try_find_single_person_with(p => p.name.toLocaleLowerCase() == name.toLocaleLowerCase());\n        if (!person && fuzzy_match) {\n            person = this.try_find_single_person_with(p => p.name.toLocaleLowerCase().startsWith(name.toLocaleLowerCase()));\n            if (!person) {\n                // Try first word and first char of 2nd word\n                let terms = name.split(' ');\n                if (terms.length > 1) {\n                    let search = `${terms[0]} ${terms[1][0]}`.toLocaleLowerCase();\n                    // console.log(`Try ${search} for ${name}`);\n                    person = this.try_find_single_person_with(p => p.name.toLocaleLowerCase().startsWith(search));\n                }\n            }\n        }\n        return person;\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/people.ts","import {SavedState, UIStore} from \"./UIState\";\nimport {ApplicationRef, Injectable} from \"@angular/core\";\nimport {Storage} from \"@ionic/storage\";\nimport {OrganizationStore} from \"../scheduling/organization\";\nimport {Logger, LoggingService} from \"ionic-logging-service\";\nimport {Observable} from \"rxjs/Observable\";\nimport {SafeJSON} from \"../common/json/safe-stringify\";\nimport {autorun, computed, IReactionDisposer, observable, toJS} from \"mobx\";\nimport {PeopleStore} from \"../scheduling/people\";\nimport {RolesStore} from \"../scheduling/tests/role-store\";\n\nconst SAVED_STATE_KEY = 'saved_state';\n\n@Injectable()\nclass RootStore {\n    @observable organization_store: OrganizationStore;\n    @observable ui_store: UIStore;\n\n    ready_event: Observable<boolean>;\n\n    private regenerator: IReactionDisposer;\n    private saving: IReactionDisposer;\n    private logger: Logger;\n\n    constructor(private storage: Storage,\n                private loggingService: LoggingService,\n                private appRef: ApplicationRef) {\n\n        this.logger = this.loggingService.getLogger(\"store\");\n\n        this.organization_store = new OrganizationStore(this.appRef);\n        this.ui_store = new UIStore();\n\n        this.load();\n    }\n\n    private load() {\n        this.ready_event = Observable.create(obs => {\n            this.storage.get(SAVED_STATE_KEY).then((state) => {\n                if (state) {\n                    this.logger.info(\"Restored saved state: \" + SafeJSON.stringify(state));\n                    this.ui_store.saved_state = Object.assign(new SavedState(), state)\n                } else {\n                    this.logger.info(\"Setup state first time\");\n                    this.ui_store.saved_state = new SavedState();\n                }\n                this.setupSaving();\n                obs.next(true);\n                // obs.complete();\n            });\n        });\n        this.ready_event.subscribe(v => {\n            this.logger.info(\"Root object 'ready' fired. App is ready to go!\")\n        }, null, () => {\n            this.logger.info(\"Ready event complete\")\n        });\n    }\n\n    get people_store(): PeopleStore {\n        return this.organization_store.people_store;\n    }\n\n    get roles_store(): RolesStore {\n        return this.organization_store.roles_store;\n    }\n\n    @computed\n    get state(): SavedState {\n        return this.ui_store.saved_state;\n    }\n\n    private setupSaving() {\n        this.logger.info(\"Setting up state auto-saving...\");\n        this.saving = autorun(() => {\n            // toJS creates a deep clone, thus accesses all of the properties of this.state\n            // so: we SHOULD respond to state changes.\n            this.storage.set(SAVED_STATE_KEY, toJS(this.state)).then(() => {\n                this.logger.info(\"Saved state: \" + SafeJSON.stringify(this.state));\n            });\n        });\n        this.regenerator = autorun(() => {\n            this.logger.info(\"Generate schedule...\");\n            this.organization_store.generate_schedule();\n        });\n    }\n}\n\nexport {RootStore}\n\n\n// WEBPACK FOOTER //\n// ./src/store/root.ts","import {ConfigurationService} from \"ionic-configuration-service\";\n\nexport function loadConfiguration(configurationService: ConfigurationService): () => Promise<void> {\n    return () => configurationService.load(\"assets/settings.json\");\n}\n\n/*\nNote: had to completely override the class since it doesn't have a setter for the values, and it's private.\n */\nclass MockConfigurationService extends ConfigurationService {\n    private mocked_configValues: { [key: string]: any };\n\n    public getKeys(): string[] {\n        const keys: string[] = [];\n        // tslint:disable-next-line:forin\n        for (const key in this.mocked_configValues) {\n            keys.push(key);\n        }\n        return keys;\n    }\n\n    public getValue<T>(key: string): T {\n        if (this.mocked_configValues) {\n            return this.mocked_configValues[key];\n        } else {\n            return undefined;\n        }\n    }\n    public setVars(vars:any) {\n        this.mocked_configValues = vars;\n    }\n}\n\n\nexport {\n    MockConfigurationService\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/logging-configuration.ts","import {Component, Input} from '@angular/core';\n\n@Component({\n    selector: 'reasons',\n    templateUrl: 'reasons.html'\n})\nexport class ReasonsComponent {\n    @Input() decisions: Array<string>;\n\n    constructor() {\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/reasons/reasons.ts","import {Role} from \"../scheduling/role\";\nimport {Person} from \"../scheduling/people\";\nimport {action, computed, observable} from \"mobx\";\n\nclass SavedState {\n    @observable previous_sheet_id: string;\n    @observable previous_sheet_tab_id: number;\n\n    @observable google_sheet_id: string;\n    @observable google_sheet_tab_id: number;\n    @observable google_sheet_id_retrieved: boolean;\n\n    @observable login_token: string;\n\n    @computed\n    get have_previous_selection(): boolean {\n        return this.previous_sheet_id != null && this.previous_sheet_tab_id != 0;\n    }\n\n    @action\n    clear_previous_sheet_selection() {\n        this.previous_sheet_id = null;\n        this.previous_sheet_tab_id = 0;\n    }\n\n    @action\n    clear_all_sheet_state() {\n        this.google_sheet_id = \"\";\n        this.google_sheet_tab_id = 0;\n        this.google_sheet_id_retrieved = false;\n        this.clear_previous_sheet_selection();\n    }\n}\n\nclass UIStore {\n    /*\n    Transient state\n     */\n    @observable selected_person: Person;\n    @observable selected_date: Date;\n    @observable selected_role: Role;\n\n    @observable signed_in_to_google: boolean;\n    @observable login_token_validated: boolean;\n\n    /*\n    Saved state\n     */\n    @observable saved_state: SavedState;\n\n    constructor() {\n        this.login_token_validated = false;\n        this.signed_in_to_google = false;\n        this.saved_state = new SavedState();\n    }\n\n    @computed\n    get signed_in(): boolean {\n        return this.saved_state.login_token && this.login_token_validated;\n    }\n\n    @computed\n    get have_selection(): boolean {\n        return this.selected_person != null;\n    }\n\n    @action\n    clear_selection() {\n        this.selected_person = null;\n    }\n\n    @action(\"Select Person\")\n    select(person: Person, date: Date, role: Role) {\n        this.selected_person = person;\n        this.selected_date = date;\n        this.selected_role = role;\n    }\n\n    clear_sheet_state() {\n        this.saved_state.clear_all_sheet_state();\n    }\n\n    logout() {\n        this.saved_state.login_token = null;\n        this.signed_in_to_google = false;\n    }\n}\n\nexport {\n    UIStore,\n    SavedState\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/UIState.ts","import {BaseStore, ObjectWithUUID} from \"./common/base_model\";\nimport {action, observable} from \"mobx\";\nimport {PeopleStore} from \"./people\";\nimport {RolesStore} from \"./tests/role-store\";\nimport {Logger} from \"ionic-logging-service\";\nimport {NPBCStoreConstruction} from \"../providers/store/test.store\";\nimport {ScheduleWithRules} from \"./rule_based/scheduler\";\nimport {csd} from \"./common/date-utils\";\nimport {ScheduleInput} from \"./shared\";\nimport {ApplicationRef} from \"@angular/core\";\nimport {LoggingWrapper} from \"../common/logging-wrapper\";\nimport {EventStore, Service} from \"./service\";\n\nclass Organization extends ObjectWithUUID {\n    @observable name: string;\n\n    constructor(name: string) {\n        super();\n        this.name = name;\n    }\n}\n\nclass OrganizationStore extends BaseStore<Organization> {\n    @observable people_store: PeopleStore;\n    @observable roles_store: RolesStore;\n    @observable event_store: EventStore;\n\n    @observable schedule: ScheduleWithRules;\n    @observable previous_schedule: ScheduleWithRules;\n\n    draft_service: Service;\n\n    private logger: Logger;\n\n    constructor(private appRef: ApplicationRef) {\n        super();\n\n        this.people_store = new PeopleStore();\n        this.roles_store = new RolesStore();\n        NPBCStoreConstruction.SetupRoles(this.roles_store);\n        NPBCStoreConstruction.SetupPeople(this.people_store);\n\n        this.event_store = new EventStore();\n        this.draft_service = this.event_store.add_event_named(\"Draft Service\");\n\n        this.logger = LoggingWrapper.getLogger(\"google\");\n\n        NPBCStoreConstruction.SetupStore(this.people_store, this, this.draft_service);\n        // ThamesTest.SetupStore(this);\n    }\n\n    @action addOrganizaton(org: Organization) {\n        this.add_object_to_array(org);\n    }\n\n    @action removeOrganization(org: Organization) {\n        this.remove_object_from_array(org);\n    }\n\n    @action\n    generate_schedule(): ScheduleWithRules {\n        // for testing, create some fake\n        let params = new ScheduleInput(this.draft_service);\n        params.start_date = csd(2018, 6, 3);\n        params.end_date = csd(2018, 9, 30);\n\n        this.schedule = new ScheduleWithRules(params, this.previous_schedule);\n        this.schedule.create_schedule();\n\n        this.appRef.tick();\n        return this.schedule;\n    }\n\n    set_previous_schedule(schedule: ScheduleWithRules) {\n        this.previous_schedule = schedule;\n        this.schedule = null;\n        // this.generate_schedule();\n    }\n\n    add_service(service_name: string) {\n        return this.event_store.add_event_named(service_name);\n    }\n}\n\nexport {\n    Organization,\n    OrganizationStore\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/organization.ts","import {BaseStore, delete_from_array, ObjectWithUUID} from \"./common/base_model\";\nimport {observable} from \"mobx\";\nimport {Logger} from \"ionic-logging-service\";\nimport {LoggingWrapper} from \"../common/logging-wrapper\";\nimport {Assignment} from \"./assignment\";\nimport {Role} from \"./role\";\nimport * as _ from \"lodash\";\nimport {Person} from \"./people\";\nimport {OnThisDate, Rule, UsageWeightedSequential} from \"./rule_based/rules\";\nimport {isUndefined} from \"ionic-angular/util/util\";\n\nclass Service extends ObjectWithUUID {\n    @observable name: string;\n\n    // These are the rules applied to the people doing this service/event\n    @observable rules: Array<Rule>;\n\n    // This is the people available for this service/event\n    assignments: Array<Assignment>;\n\n    private logger: Logger;\n\n    constructor(name: string) {\n        super();\n        this.name = name;\n        this.assignments = new Array<Assignment>();\n        this.logger = LoggingWrapper.getLogger(\"model.event\");\n        this.rules = new Array<Rule>();\n    }\n\n    get_assignment_for(person: Person) {\n        return this.assignments.find(a => a.person.uuid == person.uuid);\n    }\n\n    get_or_create_assignment_for(person: Person): Assignment {\n        let found = this.get_assignment_for(person);\n        if (found == null) {\n            let assignment = new Assignment(person);\n            this.assignments.push(assignment);\n            return assignment;\n        }\n        return found;\n    }\n\n    assignments_with_role(role: Role): Array<Assignment> {\n        return this.assignments.filter(assignment => {\n            for (let person_role of assignment.roles) {\n                if (role.uuid == person_role.uuid) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n\n    order_people_by_role_layout_priority() {\n        return this.assignments.sort((a1, a2) => {\n            let maxlp1 = a1.max_role_layout_priority;\n            let maxlp2 = a2.max_role_layout_priority;\n            return maxlp1 < maxlp2 ? 1 : maxlp1 > maxlp2 ? -1 : 0;\n        }).map(a => a.person);\n    }\n\n    get people(): Array<Person> {\n        return this.assignments.map(a => a.person);\n    }\n\n    get roles(): Array<Role> {\n        let all_roles = _.flatMap(this.assignments, (a: Assignment) => a.roles);\n        return _.uniqBy(all_roles, r => r.uuid);\n    }\n\n    find_role(role_name: string) {\n        if (isUndefined(role_name)) {\n            return null;\n        }\n        return this.roles.find(r => r.name.toLowerCase() == role_name.toLowerCase());\n    }\n\n    add_person(person: Person): Assignment {\n        return this.get_or_create_assignment_for(person)\n    }\n\n    remove_person(person: Person) {\n        let assign = this.get_assignment_for(person);\n        if (assign) {\n            delete_from_array(this.assignments, assign);\n        }\n    }\n\n    get roles_in_layout_order(): Array<Role> {\n        return this.roles.sort((a: Role, b: Role) => {\n            if (a.layout_priority < b.layout_priority) {\n                return 1;\n            } else if (a.layout_priority > b.layout_priority) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n\n    pick_rules(): Map<Role, Array<Rule>> {\n        let rule_map = new Map<Role, Array<Rule>>();\n        for (let role of this.roles_in_layout_order) {\n            let rules = [];\n\n            // Find any specific rules for this date.\n            rules = rules.concat(this.rules_for_role(role));\n\n            // Ordering people sequentially\n            let uws = new UsageWeightedSequential(this.assignments_with_role(role));\n            rules.push(uws);\n\n            rule_map.set(role, rules);\n        }\n        return rule_map;\n    }\n\n    private rules_for_role(role: Role) {\n        return this.rules.filter(r => {\n            if (r instanceof OnThisDate) {\n                return r.role.uuid == role.uuid;\n            }\n            return false;\n        });\n    }\n\n    addPickRule(rule: Rule) {\n        /*\n        When putting rules together, user specified pick rules must come before the\n        UWS rules when executing. So we make sure they have a higher priority.\n        */\n        rule.priority = 10;\n        this.rules.push(rule);\n        // console.log(\"Rules now \" + SafeJSON.stringify(this.rules));\n    }\n\n    get roles_in_layout_order_grouped(): Array<Array<Role>> {\n        // Add all roles into a map\n        let roles_in_order = this.roles_in_layout_order;\n        let intermediate = new Map<number, Array<Role>>();\n        for (let role of roles_in_order) {\n            if (!intermediate.has(role.layout_priority)) {\n                intermediate.set(role.layout_priority, []);\n            }\n            intermediate.set(role.layout_priority, [...intermediate.get(role.layout_priority), role]);\n        }\n\n        // Turn into an array\n        let result = [];\n        intermediate.forEach((list, key: number) => {\n            result.push(list);\n        });\n        return result;\n    }\n\n    role_rules(): Map<Assignment, Array<Rule>> {\n        let assignment_rule_map = new Map<Assignment, Array<Rule>>();\n        for (let assignment of this.assignments) {\n            assignment_rule_map.set(assignment, assignment.role_rules());\n        }\n        return assignment_rule_map;\n    }\n}\n\nclass EventStore extends BaseStore<Service> {\n    private logger: Logger;\n    events: Array<Service>;\n\n    constructor() {\n        super();\n        this.logger = LoggingWrapper.getLogger(\"store.event\");\n        this.events = new Array<Service>();\n    }\n\n    add_event_named(event_name: string): Service {\n        let service = new Service(event_name);\n        this.events.push(service);\n        return service;\n    }\n}\n\nexport {\n    Service,\n    EventStore\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/service.ts","import {AppModule} from \"../app/app.module\";\nimport {Logger, LoggingService} from \"ionic-logging-service\";\nimport {MockConfigurationService} from \"../app/logging-configuration\";\n\nexport class LoggingWrapper {\n    static loggingService: LoggingService;\n\n    static getLogger(name: string): Logger {\n        if (AppModule.injector) {\n            return AppModule.injector.get(LoggingService).getLogger(name);\n        } else {\n            if (!this.loggingService) {\n                let config = new MockConfigurationService(null);\n                config.setVars({\n                    \"logging\": {\n                        \"logLevels\": [\n                            {\n                                \"loggerName\": \"root\",\n                                \"logLevel\": \"INFO\"\n                            }\n                        ]\n                    }\n                });\n                this.loggingService = new LoggingService(config);\n            }\n            return this.loggingService.getLogger(name);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/logging-wrapper.ts","import {action, observable} from \"mobx\";\nimport ShortUniqueId from 'short-unique-id';\nimport * as _ from 'lodash';\nimport {isUndefined} from \"util\";\n\nclass ObjectWithUUID {\n    @observable uuid: string;\n    is_new: boolean;\n\n    constructor(uuid: string = null) {\n        if (uuid == null) {\n            let uuid_gen = new ShortUniqueId();\n            uuid = uuid_gen.randomUUID(8);\n            this.is_new = true;\n        }\n        this.uuid = uuid;\n    }\n\n    update_from_server(state) {\n        // migrate properties to this\n        this.uuid = state['id'];\n        this.is_new = false;\n    }\n}\n\nclass BaseStore<T extends ObjectWithUUID> {\n    @observable protected items: Array<T>;\n\n    constructor() {\n        this.items = [];\n    }\n\n    @action\n    protected add_object_to_array(instance: T): T {\n        if (_.findIndex(this.items, o => o.uuid == instance.uuid) >= 0) {\n            return null;\n        }\n        this.items.push(instance);\n        return instance;\n    }\n\n    @action\n    protected add_objects_to_array(many_items: T[]) {\n        many_items.forEach(i => this.add_object_to_array(i));\n    }\n\n    @action\n    protected remove_object_from_array(instance: T) {\n        this.items = this.items.filter(o => o.uuid != instance.uuid);\n    }\n\n    @action\n    protected clear_all_objects_from_array() {\n        this.items = []\n    }\n\n    find_by_uuid(uuid: string): T {\n        return this.items.find(v => v.uuid == uuid);\n    }\n\n    findIndexOfObject(obj: T): number {\n        return _.findIndex(this.items, o => obj.uuid == o.uuid);\n    }\n\n    findIndex(predicate, fromIndex = 0) {\n        return _.findIndex(this.items, predicate, fromIndex);\n    }\n}\n\nfunction check_if_undefined(thing, message) {\n    if (thing == null || isUndefined(thing)) {\n        throw Error(message);\n    }\n}\n\nfunction delete_from_array<T>(array: Array<T>, object: T) {\n    array.forEach((item, index) => {\n        if (item == object) {\n            array.splice(index, 1);\n        }\n    });\n}\n\nexport {\n    ObjectWithUUID,\n    BaseStore,\n    check_if_undefined,\n    delete_from_array\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/common/base_model.ts","import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {ComponentsModule} from \"../../components/components.module\";\nimport {HomePage} from \"./home\";\n\n@NgModule({\n    declarations: [\n        HomePage,\n    ],\n    imports: [\n        ComponentsModule,\n        IonicPageModule.forChild(HomePage),\n    ],\n})\nexport class HomePageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import {Component} from '@angular/core';\nimport {IonicPage, NavController} from 'ionic-angular';\nimport {CSVExporter} from \"../../scheduling/exporter/csv.exporter\";\nimport {GAPIS} from \"../../common/gapis-auth\";\nimport {SheetSelectionPage} from \"../sheet-selection/sheet-selection\";\nimport {Logger, LoggingService} from \"ionic-logging-service\";\nimport {toJS} from \"mobx\";\nimport {SpreadsheetReader} from \"../../common/spreadsheet_reader\";\nimport {ServerProvider} from \"../../providers/server/server\";\nimport {RootStore} from \"../../store/root\";\nimport {SafeJSON} from \"../../common/json/safe-stringify\";\n\n\n@IonicPage({\n    defaultHistory: ['home'],\n    name: 'home'\n})\n@Component({\n    selector: 'page-home',\n    templateUrl: 'home.html'\n})\nexport class HomePage {\n    private logger: Logger;\n\n    constructor(public navCtrl: NavController,\n                private loggingService: LoggingService,\n                private sheetAPI: GAPIS,\n                private server: ServerProvider,\n                // private modalController: ModalController,\n                private rootStore: RootStore) {\n        this.logger = this.loggingService.getLogger(\"home\");\n    }\n\n    ionViewDidEnter() {\n        this.sheetAPI.init();\n\n        let readyEvent = this.rootStore.ready_event;\n        readyEvent.subscribe(value => {\n            if (value) {\n                let validateLoginToken = this.server.validateLoginToken();\n                validateLoginToken.subscribe(resp => {\n                    this.logger.info(`Validation returned: ${SafeJSON.stringify(resp)}`);\n                    if (!this.rootStore.ui_store.signed_in) {\n                        // this.navCtrl.push('login');\n                    } else {\n\n                    }\n                });\n            }\n        });\n    }\n\n    clear_selection() {\n        this.rootStore.ui_store.clear_selection();\n    }\n\n    select_previous_schedule() {\n        this.navCtrl.push(SheetSelectionPage, {\n            title: \"Select sheet to use as previous schedule\",\n            tab_title: \"Select tab to use as previous schedule\",\n            done: (spreadsheet, sheet, error) => {\n                console.log(\"Done. Selected sheet: \" + spreadsheet.spreadsheetId + \", and tab: \" + sheet.properties.title + \", \" + sheet.properties.sheetId);\n                this.rootStore.state.previous_sheet_id = spreadsheet.spreadsheetId;\n                this.rootStore.state.previous_sheet_tab_id = sheet.properties.sheetId;\n            }\n        });\n    }\n\n    read_as_previous_schedule() {\n        if (this.rootStore.ui_store.saved_state.have_previous_selection) {\n            let sheet_id = this.rootStore.ui_store.saved_state.previous_sheet_id;\n            this.sheetAPI.load_sheet_with_id(sheet_id).subscribe((spreadsheet) => {\n                let sheet = spreadsheet.sheets.find(s => s.properties.sheetId == this.rootStore.state.previous_sheet_tab_id);\n                this.sheetAPI.read_spreadsheet_data(spreadsheet, sheet).subscribe(rows => {\n\n                    let reader = new SpreadsheetReader(this.rootStore.organization_store);\n                    reader.parse_schedule_from_spreadsheet(rows);\n\n                    if (reader.has_problems) {\n                        let dump_map = {};\n                        for (let key of Array.from(reader.problems.keys())) {\n                            dump_map[key] = Array.from(reader.problems.get(key));\n                        }\n                        let problems = toJS(dump_map);\n                        let s = SafeJSON.stringify(problems);\n                        this.logger.info(`Had problems: ${s}`);\n                    }\n                    this.logger.info(\"Made schedule!\");\n                    this.rootStore.organization_store.set_previous_schedule(reader.schedule);\n                });\n            });\n        }\n    }\n\n    export_as_sheets() {\n        // Get the sheet and make sure we can read it.\n        let sheet_id = this.sheetAPI.state.google_sheet_id;\n        if (sheet_id) {\n            this.sheetAPI.load_sheet_with_id(sheet_id).subscribe((spreadsheet) => {\n                console.log(\"Loaded the sheet!\");\n                let sheet = spreadsheet.sheets.find(s => s.properties.sheetId == this.rootStore.state.google_sheet_tab_id);\n                this.sheetAPI.clear_and_write_schedule(spreadsheet, sheet, this.rootStore.organization_store.schedule);\n            }, (error) => {\n                console.log(\"Error loading sheet: \" + error);\n            });\n        } else {\n            console.log(\"No sheet selected\");\n            // let popover = this.modalController.create(SheetSelectionPage);\n            // popover.present().then(() => {\n            // page is done.\n            // console.log(\"Done. Sheet: \" + this.rootStore.ui_store.google_sheet_id);\n            // });\n            this.navCtrl.push(SheetSelectionPage, {\n                title: \"Select sheet to export into\",\n                tab_title: \"Select tab to export into\",\n                done: (spreadsheet, sheet, error) => {\n                    this.rootStore.state.google_sheet_id = spreadsheet.spreadsheetId;\n                    this.rootStore.state.google_sheet_tab_id = sheet.properties.sheetId;\n                    console.log(\"Done. Selected sheet: \" + spreadsheet.spreadsheetId + \", and tab: \" + sheet.properties.title);\n                }\n            });\n        }\n    }\n\n    clear_sheet_state() {\n        this.rootStore.ui_store.clear_sheet_state();\n    }\n\n    export_as_csv() {\n        let exporter = new CSVExporter(this.rootStore.organization_store.schedule);\n        exporter.write_to_file(\"schedule.csv\");\n    }\n\n    login() {\n        this.sheetAPI.authenticate();\n    }\n\n    logout() {\n        // Throw away our login token\n        // this.rootStore.ui_store.logout();\n        this.sheetAPI.signout();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import {ApplicationRef, Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {GAPIS} from \"../../common/gapis-auth\";\nimport Spreadsheet = gapi.client.sheets.Spreadsheet;\nimport Sheet = gapi.client.sheets.Sheet;\nimport {TabSelectionPage} from \"../tab-selection/tab-selection\";\n\n@IonicPage()\n@Component({\n    selector: 'page-sheet-selection',\n    templateUrl: 'sheet-selection.html',\n})\nexport class SheetSelectionPage {\n    public sheets: Array<any>;\n    public loading: boolean = false;\n    public title: string = \"foo\";\n\n    private done: (ss: Spreadsheet, sheet: Sheet, error?) => void = null;\n\n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,\n                private ar: ApplicationRef,\n                private api: GAPIS) {\n        this.sheets = [];\n        this.done = navParams.get('done');\n        this.title = navParams.get('title') || \"Select a sheet to use\";\n    }\n\n    ionViewDidEnter() {\n        this.loadSheets();\n    }\n\n    ionViewDidLeave() {\n    }\n\n    selectSheet(sheet_metadata) {\n        if (sheet_metadata) {\n            // console.log(\"Clicked: \" + SafeJSON.stringify(sheet_metadata));\n            // this.rootStore.state.google_sheet_id = sheet_metadata.id;\n\n            // Push on the tab navigator\n            let tab_title = this.navParams.get('tab_title') || 'Select tab to use';\n            this.navCtrl.push(TabSelectionPage, {\n                'sheet_id': sheet_metadata.id,\n                'title' : tab_title,\n                'done': (ss: Spreadsheet, sheet: Sheet, error) => {\n                    if (error) {\n                        this.done(null, null, error);\n                    } else {\n                        this.done(ss, sheet);\n                    }\n                    this.navCtrl.pop();\n                }\n            });\n        }\n    }\n\n    private loadSheets() {\n        this.loading = true;\n        this.api.list_all_sheets().subscribe((sheets) => {\n            this.sheets = Array.from(sheets);\n            // console.log(\"Finished loading: \" + this.sheets.length + \" items\");\n            this.loading = false;\n            this.ar.tick();\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sheet-selection/sheet-selection.ts","import {ApplicationRef, Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {GAPIS} from \"../../common/gapis-auth\";\nimport Spreadsheet = gapi.client.sheets.Spreadsheet;\nimport Sheet = gapi.client.sheets.Sheet;\n\n@IonicPage()\n@Component({\n    selector: 'page-tab-selection',\n    templateUrl: 'tab-selection.html',\n})\nexport class TabSelectionPage {\n    loading: boolean = false;\n\n    sheets = [];\n    sheet_id: string;\n\n    private done: (ss: Spreadsheet, sheet: Sheet, error?) => void = null;\n    private spreadsheet: gapi.client.sheets.Spreadsheet;\n    private title: string;\n\n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,\n                private ar: ApplicationRef,\n                private api: GAPIS) {\n\n        this.sheet_id = navParams.get('sheet_id');\n        this.done = navParams.get('done');\n        this.title = navParams.get('title') || \"Select a sheet to use\";\n    }\n\n    ionViewDidLoad() {\n        this.api.load_sheet_with_id(this.sheet_id).subscribe((spreadsheet) => {\n            this.loading = false;\n            this.sheets = spreadsheet.sheets;\n            this.spreadsheet = spreadsheet;\n            this.ar.tick();\n        }, err => {\n            console.log(\"Can't load the spreadsheet. Arg: \" + err);\n            this.done(null, null, err);\n            this.navCtrl.pop();\n        });\n    }\n\n    select_sheet(sheet) {\n        console.log(\"Selected: \" + sheet);\n        if (this.done) {\n            this.done(this.spreadsheet, sheet);\n        }\n        this.navCtrl.pop();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tab-selection/tab-selection.ts","import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {LoginPage} from './login';\nimport {ComponentsModule} from \"../../components/components.module\";\n\n@NgModule({\n    declarations: [\n        LoginPage,\n    ],\n    imports: [\n        ComponentsModule,\n        IonicPageModule.forChild(LoginPage),\n    ],\n})\nexport class LoginPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {ComponentsModule} from \"../../components/components.module\";\nimport {PeoplePage} from \"./people\";\n\n@NgModule({\n    declarations: [\n        PeoplePage,\n    ],\n    imports: [\n        ComponentsModule,\n        // PersonDetailsPageModule,\n        IonicPageModule.forChild(PeoplePage),\n    ],\n})\nexport class PeoplePageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/people/people.module.ts","import {Component} from '@angular/core';\nimport {AlertController, IonicPage, NavController} from 'ionic-angular';\nimport {RootStore} from \"../../store/root\";\nimport {Person} from \"../../scheduling/people\";\nimport {Logger, LoggingService} from \"ionic-logging-service\";\n\n@IonicPage({\n    name: 'people',\n    defaultHistory: ['home']\n})\n@Component({\n    selector: 'page-people',\n    templateUrl: 'people.html'\n})\nexport class PeoplePage {\n    name_filter: string = \"\";\n    private logger: Logger;\n\n    constructor(public navCtrl: NavController,\n                public logService: LoggingService,\n                public alertCtrl: AlertController,\n                public rootStore: RootStore) {\n        this.logger = logService.getLogger('page.people');\n    }\n\n    public people(): Array<Person> {\n        let people = this.rootStore.people_store.people.sort((a, b) => {\n            if (a.name > b.name) {\n                return 1;\n            }\n            if (a.name < b.name) {\n                return -1;\n            }\n            return 0;\n        });\n        if (this.name_filter.length > 0) {\n            people = people.filter(p => p.name.toLowerCase().indexOf(this.name_filter.toLowerCase()) >= 0);\n        }\n        return people;\n    }\n\n    public add_new_person() {\n        let new_object = new Person();\n        new_object.name = \"\";\n        this.navCtrl.push('PersonDetailsPage', {\n            person: new_object,\n            is_create: true,\n            callback: this.add_person.bind(this)\n        })\n    }\n\n    private add_person(new_person: Person) {\n        this.logger.info(`Guess I should add: ${new_person}`);\n        this.rootStore.people_store.add_person(new_person);\n    }\n\n    public show_person_detail(person: Person) {\n        this.navCtrl.push('PersonDetailsPage', {person: person})\n    }\n\n    ngAfterViewInit() {\n        // for debug\n        // this.add_new_person();\n        // this.show_person_detail(this.rootStore.people_store.find_person_with_name(\"Stuart Campbell\"));\n    }\n\n    delete_person(person: Person) {\n        let alert = this.alertCtrl.create({\n            message: \"Are you sure?\",\n            buttons: [\n                {\n                    text: 'Cancel',\n                    handler: () => {\n                    }\n                },\n                {\n                    text: 'Delete',\n                    role: 'cancel',\n                    handler: () => {\n                        alert.dismiss().then(() => {\n                            this.rootStore.people_store.remove_person(person);\n                        });\n                        return false;\n                    },\n                }\n            ]\n        });\n        alert.present()\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/people/people.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SheetSelectionPage } from './sheet-selection';\n\n@NgModule({\n  declarations: [\n    SheetSelectionPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SheetSelectionPage),\n  ],\n})\nexport class SheetSelectionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sheet-selection/sheet-selection.module.ts","const stringify = require('json-stringify-safe');\n\nexport class SafeJSON {\n    public static stringify(thing: any) {\n        return stringify(thing);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/json/safe-stringify.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TabSelectionPage } from './tab-selection';\n\n@NgModule({\n  declarations: [\n    TabSelectionPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TabSelectionPage),\n  ],\n})\nexport class TabSelectionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tab-selection/tab-selection.module.ts","import {Component} from '@angular/core';\n\nimport {AboutPage} from '../about/about';\nimport {HomePage} from '../home/home';\nimport {PeoplePage} from \"../people/people\";\n\n@Component({\n    templateUrl: 'tabs.html'\n})\nexport class TabsPage {\n\n    tab1Root = HomePage;\n    tab2Root = PeoplePage;\n    tab3Root = AboutPage;\n\n    constructor() {\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\n\n@Component({\n  selector: 'page-about',\n  templateUrl: 'about.html'\n})\nexport class AboutPage {\n\n  constructor(public navCtrl: NavController) {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/about.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\nimport {spy} from \"mobx\";\n\nspy((event) => {\n    if (event.type === 'action') {\n        // console.log(`SPY: ${event.name} with args: ${event.arguments}`)\n    } else if(event.type === 'update') {\n        // console.log(`SPY: update ${event.object.constructor.name}.${event.name}  from ${event.oldValue} to ${event.newValue}`)\n    }\n});\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import {Role} from \"./role\";\nimport {Person} from \"./people\";\nimport * as _ from 'lodash';\nimport {dayAndHourForDate} from \"./common/date-utils\";\nimport {Service} from \"./service\";\nimport {Assignment} from \"./assignment\";\nimport {isUndefined} from \"util\";\n\nclass ObjectValidation {\n    errors: string[] = new Array<string>();\n    warnings: string[] = new Array<string>();\n    ok: boolean = true;\n\n    public add_error(e: string) {\n        this.errors.push(e);\n        this.ok = false;\n    }\n\n    public add_warning(e: string) {\n        this.warnings.push(e);\n    }\n\n    static simple(personIsRequired: string) {\n        let validation = new ObjectValidation();\n        validation.add_error(personIsRequired);\n        return validation;\n    }\n}\n\nclass ScheduleScore {\n    person?: Person;\n    roles: Array<Role>;\n    decisions: Array<string>;\n    score: number;\n\n    constructor(role: Role) {\n        this.roles = [role];\n        this.score = 0;\n        this.decisions = [];\n    }\n\n    has_role(role: Role) {\n        return _.includes(this.roles, role);\n    }\n\n    valueOf() {\n        return \"Score: \" + this.score + \" for role: \" + this.roles.join(\", \");\n    }\n\n    add_role(role: Role) {\n        this.roles.push(role);\n    }\n}\n\nclass ScheduleInput {\n    start_date: Date;\n    end_date: Date;\n    days_per_period: number;\n\n    manual_layouts: Map<Date, Role>;\n    service: Service;\n\n    constructor(service: Service) {\n        this.manual_layouts = new Map<Date, Role>();\n        this.days_per_period = 7;\n        this.service = service;\n    }\n\n    get roles() {\n        return this.service.roles;\n    }\n\n    get people() {\n        return this.service.people;\n    }\n\n    validate() {\n        if (this.service.roles_in_layout_order.length == 0) {\n            throw Error(\"The dates parameters don't define any roles.\");\n        }\n\n        if (this.days_per_period < 1) {\n            throw new Error(\"Period must be > 1\");\n        }\n\n        if (!this.start_date || isNaN(this.start_date.valueOf())) {\n            throw new Error(\"No start date, or start date is invalid\");\n        }\n        if (!this.end_date || isNaN(this.end_date.valueOf())) {\n            throw new Error(\"No end date, or end date is invalid\");\n        }\n\n        if (this.schedule_duration_in_days <= 0) {\n            throw new Error(\"The dates has no sensible length (0 or -ve)\");\n        }\n    }\n\n    get schedule_duration_in_days(): number {\n        return daysBetween(this.start_date, this.end_date);\n    }\n\n}\n\nfunction daysBetween(startDate: Date, endDate: Date): number {\n    let msPerDay = 1000 * 60 * 60 * 24;\n    return (endDate.valueOf() - startDate.valueOf()) / msPerDay;\n}\n\nclass Exclusion {\n    start_date: Date;\n    end_date: Date;\n    role: Role;\n\n    constructor(start: Date, end: Date, because: Role) {\n        this.start_date = start;\n        this.end_date = end;\n        this.role = because;\n        if (this.duration_in_days < 0) {\n            throw Error(\"Cannot have an exclusion zone with a -ve duration\");\n        }\n    }\n\n    overlap_with(other: Exclusion) {\n        return this.includes_date(other.start_date) ||\n            this.includes_date(other.end_date) ||\n            other.includes_date(this.start_date) ||\n            other.includes_date(this.end_date);\n    }\n\n    includes_date(date: Date) {\n        return this.start_date <= date && date < this.end_date;\n    }\n\n    get duration_in_days(): number {\n        return daysBetween(this.start_date, this.end_date);\n    }\n\n    valueOf() {\n        if (this.duration_in_days > 1) {\n            return `${this.start_date.toDateString()} => ${this.end_date.toDateString()}`;\n        }\n        return `${this.start_date.toDateString()}`;\n    }\n}\n\n/*\n A line in the schedule, for a given date.\n People are in various roles on a date.\n */\nclass ScheduleAtDate {\n    date: Date;\n    assignment_by_score: Map<Assignment, ScheduleScore>;\n\n    constructor(date: Date) {\n        this.date = date;\n        this.assignment_by_score = new Map<Assignment, ScheduleScore>();\n    }\n\n    get date_key(): string {\n        return dayAndHourForDate(this.date);\n    }\n\n    get people(): Array<Person> {\n        return Array.from(this.assignment_by_score.keys()).map(a => a.person);\n    }\n\n    get assignments(): Array<Assignment> {\n        return Array.from<Assignment>(this.assignment_by_score.keys());\n    }\n\n    get people_sorted_by_role_priority(): Array<Person> {\n        return this.assignments.sort((a: Assignment, b: Assignment) => {\n            if (a.highest_role_layout_priority > b.highest_role_layout_priority) {\n                return 1;\n            } else if (a.highest_role_layout_priority < b.highest_role_layout_priority) {\n                return -1;\n            }\n            return 0;\n        }).map(a => a.person);\n    }\n\n    score_for(p: Person): ScheduleScore {\n        let assign = this.assignment_for_person(p);\n        if (assign) {\n            return this.assignment_by_score.get(assign);\n        }\n        return null;\n    }\n\n    add_person(assignment: Assignment, role: Role) {\n        if(assignment == null) {\n            throw new Error(\"Cannot add a 'null' assignment\");\n        }\n        if (!this.assignment_by_score.get(assignment)) {\n            this.assignment_by_score.set(assignment, new ScheduleScore(role));\n        } else {\n            let score = this.assignment_by_score.get(assignment);\n            score.add_role(role);\n        }\n    }\n\n    people_in_role(role: Role): Array<Person> {\n        // Return all people that have some score that records this role\n        let assigns = this.assignments;\n        let filterer = assigns.filter(a => {\n            let score = this.assignment_by_score.get(a);\n            if (score) {\n                return score.has_role(role);\n            }\n            return false;\n        });\n        return filterer.map((a) => {\n            if(isUndefined(a)) {\n                console.log(\"panic\");\n            }\n            return a.person;\n        });\n    }\n\n    number_of_people_in_role(role: Role): number {\n        return this.people_in_role(role).length;\n    }\n\n    roles_of_person(person: Person): Array<Role> {\n        let assignment = this.assignment_for_person(person);\n        if (assignment) {\n            return assignment.roles;\n        }\n        return [];\n    }\n\n    assignment_for_person(person: Person): Assignment {\n        return this.assignments.find(a => a.person.uuid == person.uuid);\n    }\n\n    score_for_person(person: Person) {\n        let assignment = this.assignment_for_person(person);\n        if (assignment) {\n            return this.assignment_by_score.get(assignment).score;\n        }\n        return 0;\n    }\n\n    valueOf() {\n        let names_with_tasks = this.people_sorted_by_role_priority.map(p => {\n            return `${p.name} = ${this.score_for(p)}`;\n        });\n        return this.date.toDateString() + \" - \" + _.join(names_with_tasks, ',');\n    }\n\n    set_decisions(assignment: Assignment, role: Role, decisions: Array<string>) {\n        let score = this.assignment_by_score.get(assignment);\n        if (!score) {\n            throw Error(\"Cant set facts, no person/assignment in this date\");\n        }\n        score.decisions = decisions;\n    }\n\n    includes_person(person: Person) {\n        let assigment = this.assignment_for_person(person);\n        return assigment != null;\n    }\n\n    move_person(owner: Person, to_date: ScheduleAtDate, reason: string = null) {\n        // Find the roles this person was doing\n        let assignment_of_owner = this.assignment_for_person(owner);\n        if (!assignment_of_owner) {\n            throw Error(`Cant move ${owner}, they are not assigned to this date`);\n        }\n        let roles = assignment_of_owner.roles;\n        if (roles.length) {\n            let score = this.assignment_by_score.get(assignment_of_owner);\n            if (score) {\n                this.assignment_by_score.delete(assignment_of_owner);\n                let assignment_at_target = to_date.assignment_for_person(owner);\n                roles.forEach(r => {\n                    to_date.add_person(assignment_at_target, r);\n                });\n                let new_score = to_date.score_for(owner);\n                new_score.decisions = new_score.decisions.concat(score.decisions);\n                if (reason) {\n                    new_score.decisions.push(reason)\n                }\n            }\n        }\n    }\n\n    can_place_person_in_role(person: Person, role: Role) {\n        return this.number_of_people_in_role(role) < role.maximum_count;\n    }\n}\n\n\nexport {\n    Exclusion,\n    ScheduleInput,\n    ScheduleScore,\n    ScheduleAtDate,\n    daysBetween,\n    ObjectValidation\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/shared.ts","import {ApplicationRef, Component, Input} from '@angular/core';\nimport {isArray} from \"util\";\nimport {Person} from \"../../scheduling/people\";\nimport {PopoverController} from \"ionic-angular\";\nimport {ReasonsComponent} from \"../reasons/reasons\";\nimport {ScheduleWithRules} from \"../../scheduling/rule_based/scheduler\";\nimport {computed} from \"mobx\";\nimport {RootStore} from \"../../store/root\";\n\n@Component({\n    // changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'schedule-viewer',\n    templateUrl: 'schedule-viewer.html'\n})\nexport class ScheduleViewerComponent {\n    @Input()\n    schedule:ScheduleWithRules;\n\n    constructor(private store: RootStore,\n                private appRef: ApplicationRef,\n                public popoverCtrl: PopoverController) {\n    }\n\n    @computed\n    get headers(): Array<string> {\n        if (!this.schedule) {\n            return [];\n        }\n        return this.schedule.jsonFields();\n    }\n\n    @computed\n    get rows(): Array<Object> {\n        if (!this.schedule) {\n            return [];\n        }\n        // console.log(SafeJSON.stringify(this.schedule.jsonResult()));\n        return this.schedule.jsonResult();\n    }\n\n    presentPopover(myEvent) {\n        let popover = this.popoverCtrl.create(ReasonsComponent, {\n        });\n        popover.present({\n            ev: myEvent\n        });\n    }\n\n    keys_for_row(row) {\n        let keys = Object.keys(row).filter(v => !v.startsWith('date'));\n        return Array.from(keys);\n    }\n\n    value_as_array(value): any[] {\n        if (isArray(value)) {\n            return value;\n        }\n        return [value];\n    }\n\n    /*\n    Want to paint a rectangle, from the person@slot, to the end of their exclusion zone\n    Every time we place someone, we do create an exclusion that says \"jeremy, excluded 2 wks, due to guitar'\n\n    We can use this.\n    This method is called every cell. We're asking if this cell:\n    a) sits in an exclusion zone, for the selected person\n    b) where that exclusion zone includes the date of the row\n     */\n    in_exclusion_zone(row, role_name): boolean {\n        let person = this.selected_person;\n        if (!person) {\n            return false;\n        }\n        let role = this.store.roles_store.find_role(role_name);\n        if (!role) {\n            return false;\n        }\n\n        let date_for_row = row['date'];\n        return this.schedule.is_person_in_exclusion_zone(person, role, date_for_row);\n    }\n\n    /*\n    Want to mark if:\n    a) The person within this cell == the selected person\n     */\n    selected_and_in_role(obj: Object, role_name) {\n        if (obj instanceof Person) {\n            if (obj == null) {\n                console.error(\"a_person is null. This seems bad\");\n                return false;\n            }\n            let person = this.selected_person;\n            if (!person) {\n                return false;\n            }\n            if (obj.uuid != person.uuid) {\n                return false;\n            }\n            return this.store.roles_store.find_role(role_name);\n        }\n    }\n\n    select(obj: Object, date: Date, role_name: string) {\n        if (obj instanceof Person) {\n            let role = this.store.roles_store.find_role(role_name);\n            console.log(\"Selecting: \" + obj + \" on \" + date.toDateString() + \" for \" + role.name);\n\n            this.store.ui_store.select(obj, date, role);\n            this.appRef.tick();\n        }\n    }\n\n    textFor(obj: Object): string {\n        if (obj instanceof Person) {\n            return obj.name;\n        }\n        return obj.toString();\n    }\n\n    @computed\n    get selected_person(): Person {\n        if (!this.store.ui_store || this.store.ui_store.selected_person == null) {\n            return null;\n        }\n        return this.store.ui_store.selected_person;\n    }\n\n    get hover(): string {\n        if (!this.selected_person) {\n            return \"Nothing\";\n        }\n        return this.selected_person.name;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/schedule-viewer/schedule-viewer.ts","var map = {\n\t\"./af\": 193,\n\t\"./af.js\": 193,\n\t\"./ar\": 194,\n\t\"./ar-dz\": 195,\n\t\"./ar-dz.js\": 195,\n\t\"./ar-kw\": 196,\n\t\"./ar-kw.js\": 196,\n\t\"./ar-ly\": 197,\n\t\"./ar-ly.js\": 197,\n\t\"./ar-ma\": 198,\n\t\"./ar-ma.js\": 198,\n\t\"./ar-sa\": 199,\n\t\"./ar-sa.js\": 199,\n\t\"./ar-tn\": 200,\n\t\"./ar-tn.js\": 200,\n\t\"./ar.js\": 194,\n\t\"./az\": 201,\n\t\"./az.js\": 201,\n\t\"./be\": 202,\n\t\"./be.js\": 202,\n\t\"./bg\": 203,\n\t\"./bg.js\": 203,\n\t\"./bm\": 204,\n\t\"./bm.js\": 204,\n\t\"./bn\": 205,\n\t\"./bn.js\": 205,\n\t\"./bo\": 206,\n\t\"./bo.js\": 206,\n\t\"./br\": 207,\n\t\"./br.js\": 207,\n\t\"./bs\": 208,\n\t\"./bs.js\": 208,\n\t\"./ca\": 209,\n\t\"./ca.js\": 209,\n\t\"./cs\": 210,\n\t\"./cs.js\": 210,\n\t\"./cv\": 211,\n\t\"./cv.js\": 211,\n\t\"./cy\": 212,\n\t\"./cy.js\": 212,\n\t\"./da\": 213,\n\t\"./da.js\": 213,\n\t\"./de\": 214,\n\t\"./de-at\": 215,\n\t\"./de-at.js\": 215,\n\t\"./de-ch\": 216,\n\t\"./de-ch.js\": 216,\n\t\"./de.js\": 214,\n\t\"./dv\": 217,\n\t\"./dv.js\": 217,\n\t\"./el\": 218,\n\t\"./el.js\": 218,\n\t\"./en-au\": 219,\n\t\"./en-au.js\": 219,\n\t\"./en-ca\": 220,\n\t\"./en-ca.js\": 220,\n\t\"./en-gb\": 221,\n\t\"./en-gb.js\": 221,\n\t\"./en-ie\": 222,\n\t\"./en-ie.js\": 222,\n\t\"./en-il\": 223,\n\t\"./en-il.js\": 223,\n\t\"./en-nz\": 224,\n\t\"./en-nz.js\": 224,\n\t\"./eo\": 225,\n\t\"./eo.js\": 225,\n\t\"./es\": 226,\n\t\"./es-do\": 227,\n\t\"./es-do.js\": 227,\n\t\"./es-us\": 228,\n\t\"./es-us.js\": 228,\n\t\"./es.js\": 226,\n\t\"./et\": 229,\n\t\"./et.js\": 229,\n\t\"./eu\": 230,\n\t\"./eu.js\": 230,\n\t\"./fa\": 231,\n\t\"./fa.js\": 231,\n\t\"./fi\": 232,\n\t\"./fi.js\": 232,\n\t\"./fo\": 233,\n\t\"./fo.js\": 233,\n\t\"./fr\": 234,\n\t\"./fr-ca\": 235,\n\t\"./fr-ca.js\": 235,\n\t\"./fr-ch\": 236,\n\t\"./fr-ch.js\": 236,\n\t\"./fr.js\": 234,\n\t\"./fy\": 237,\n\t\"./fy.js\": 237,\n\t\"./gd\": 238,\n\t\"./gd.js\": 238,\n\t\"./gl\": 239,\n\t\"./gl.js\": 239,\n\t\"./gom-latn\": 240,\n\t\"./gom-latn.js\": 240,\n\t\"./gu\": 241,\n\t\"./gu.js\": 241,\n\t\"./he\": 242,\n\t\"./he.js\": 242,\n\t\"./hi\": 243,\n\t\"./hi.js\": 243,\n\t\"./hr\": 244,\n\t\"./hr.js\": 244,\n\t\"./hu\": 245,\n\t\"./hu.js\": 245,\n\t\"./hy-am\": 246,\n\t\"./hy-am.js\": 246,\n\t\"./id\": 247,\n\t\"./id.js\": 247,\n\t\"./is\": 248,\n\t\"./is.js\": 248,\n\t\"./it\": 249,\n\t\"./it.js\": 249,\n\t\"./ja\": 250,\n\t\"./ja.js\": 250,\n\t\"./jv\": 251,\n\t\"./jv.js\": 251,\n\t\"./ka\": 252,\n\t\"./ka.js\": 252,\n\t\"./kk\": 253,\n\t\"./kk.js\": 253,\n\t\"./km\": 254,\n\t\"./km.js\": 254,\n\t\"./kn\": 255,\n\t\"./kn.js\": 255,\n\t\"./ko\": 256,\n\t\"./ko.js\": 256,\n\t\"./ky\": 257,\n\t\"./ky.js\": 257,\n\t\"./lb\": 258,\n\t\"./lb.js\": 258,\n\t\"./lo\": 259,\n\t\"./lo.js\": 259,\n\t\"./lt\": 260,\n\t\"./lt.js\": 260,\n\t\"./lv\": 261,\n\t\"./lv.js\": 261,\n\t\"./me\": 262,\n\t\"./me.js\": 262,\n\t\"./mi\": 263,\n\t\"./mi.js\": 263,\n\t\"./mk\": 264,\n\t\"./mk.js\": 264,\n\t\"./ml\": 265,\n\t\"./ml.js\": 265,\n\t\"./mn\": 266,\n\t\"./mn.js\": 266,\n\t\"./mr\": 267,\n\t\"./mr.js\": 267,\n\t\"./ms\": 268,\n\t\"./ms-my\": 269,\n\t\"./ms-my.js\": 269,\n\t\"./ms.js\": 268,\n\t\"./mt\": 270,\n\t\"./mt.js\": 270,\n\t\"./my\": 271,\n\t\"./my.js\": 271,\n\t\"./nb\": 272,\n\t\"./nb.js\": 272,\n\t\"./ne\": 273,\n\t\"./ne.js\": 273,\n\t\"./nl\": 274,\n\t\"./nl-be\": 275,\n\t\"./nl-be.js\": 275,\n\t\"./nl.js\": 274,\n\t\"./nn\": 276,\n\t\"./nn.js\": 276,\n\t\"./pa-in\": 277,\n\t\"./pa-in.js\": 277,\n\t\"./pl\": 278,\n\t\"./pl.js\": 278,\n\t\"./pt\": 279,\n\t\"./pt-br\": 280,\n\t\"./pt-br.js\": 280,\n\t\"./pt.js\": 279,\n\t\"./ro\": 281,\n\t\"./ro.js\": 281,\n\t\"./ru\": 282,\n\t\"./ru.js\": 282,\n\t\"./sd\": 283,\n\t\"./sd.js\": 283,\n\t\"./se\": 284,\n\t\"./se.js\": 284,\n\t\"./si\": 285,\n\t\"./si.js\": 285,\n\t\"./sk\": 286,\n\t\"./sk.js\": 286,\n\t\"./sl\": 287,\n\t\"./sl.js\": 287,\n\t\"./sq\": 288,\n\t\"./sq.js\": 288,\n\t\"./sr\": 289,\n\t\"./sr-cyrl\": 290,\n\t\"./sr-cyrl.js\": 290,\n\t\"./sr.js\": 289,\n\t\"./ss\": 291,\n\t\"./ss.js\": 291,\n\t\"./sv\": 292,\n\t\"./sv.js\": 292,\n\t\"./sw\": 293,\n\t\"./sw.js\": 293,\n\t\"./ta\": 294,\n\t\"./ta.js\": 294,\n\t\"./te\": 295,\n\t\"./te.js\": 295,\n\t\"./tet\": 296,\n\t\"./tet.js\": 296,\n\t\"./tg\": 297,\n\t\"./tg.js\": 297,\n\t\"./th\": 298,\n\t\"./th.js\": 298,\n\t\"./tl-ph\": 299,\n\t\"./tl-ph.js\": 299,\n\t\"./tlh\": 300,\n\t\"./tlh.js\": 300,\n\t\"./tr\": 301,\n\t\"./tr.js\": 301,\n\t\"./tzl\": 302,\n\t\"./tzl.js\": 302,\n\t\"./tzm\": 303,\n\t\"./tzm-latn\": 304,\n\t\"./tzm-latn.js\": 304,\n\t\"./tzm.js\": 303,\n\t\"./ug-cn\": 305,\n\t\"./ug-cn.js\": 305,\n\t\"./uk\": 306,\n\t\"./uk.js\": 306,\n\t\"./ur\": 307,\n\t\"./ur.js\": 307,\n\t\"./uz\": 308,\n\t\"./uz-latn\": 309,\n\t\"./uz-latn.js\": 309,\n\t\"./uz.js\": 308,\n\t\"./vi\": 310,\n\t\"./vi.js\": 310,\n\t\"./x-pseudo\": 311,\n\t\"./x-pseudo.js\": 311,\n\t\"./yo\": 312,\n\t\"./yo.js\": 312,\n\t\"./zh-cn\": 313,\n\t\"./zh-cn.js\": 313,\n\t\"./zh-hk\": 314,\n\t\"./zh-hk.js\": 314,\n\t\"./zh-tw\": 315,\n\t\"./zh-tw.js\": 315\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 509;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 509\n// module chunks = 6","import {ObjectWithUUID} from \"./common/base_model\";\nimport {dayAndHourForDate} from \"./common/date-utils\";\n\nexport {Unavailablity};\n\nimport * as moment from \"moment\";\n\nclass Unavailablity extends ObjectWithUUID {\n    from_date: Date = null;\n    to_date: Date = null;\n    reason: string = null;\n\n    constructor(from: Date, to: Date = null, reason = null) {\n        super();\n        if (from == null) {\n            throw new Error(\"From date cannot be null\");\n        }\n        this.from_date = from;\n        this.to_date = to;\n        this.reason = reason;\n    }\n\n    get is_date_range(): boolean {\n        return this.from_date != null && this.to_date != null;\n    }\n\n    matches_single_date(d: Date) {\n        if (this.to_date != null) {\n            return false;\n        }\n        let thisDate = dayAndHourForDate(this.from_date);\n        let otherDate = dayAndHourForDate(d);\n        return thisDate == otherDate;\n    }\n\n    contains_date(date: Date) {\n        let start = moment(this.from_date).startOf('day');\n\n        // By default, be one day in length\n        let the_end_date = moment(this.from_date).endOf('day');\n\n        if (this.is_date_range) {\n            the_end_date = moment(this.to_date).endOf('day');\n        }\n\n        let date_as_moment = moment(date);\n        // console.log(\"Test for \" + date_as_moment + \" being between \" + start + \" and \" + the_end_date);\n        return date_as_moment.isBetween(start, the_end_date, null, \"[]\");\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/unavailability.ts","import {FixedRoleOnDate, OnThisDate, Rule, UsageWeightedSequential, WeightedRoles} from \"./rules\";\nimport {Role} from \"../role\";\nimport {Logger} from \"ionic-logging-service\";\nimport {dayAndHourForDate, throwOnInvalidDate} from \"../common/date-utils\";\nimport {Person} from \"../people\";\nimport {Exclusion, ScheduleAtDate} from \"../shared\";\nimport {isUndefined} from \"ionic-angular/util/util\";\nimport {LoggingWrapper} from \"../../common/logging-wrapper\";\nimport {Service} from \"../service\";\nimport {Assignment} from \"../assignment\";\n\nexport class RuleFacts {\n    current_date: Date;\n    decisions_for_date: Array<string>;\n    service: Service;\n\n    private all_pick_rules: Map<Role, Array<Rule>>;\n    private all_role_rules: Map<Assignment, Array<Rule>>;\n\n    private exclusion_zones: Map<Person, Array<Exclusion>>;\n\n    private usage_counts: Map<Role, Map<Assignment, number>>;\n\n    // This is the schedule, as it's being built\n    private dates: Map<string, ScheduleAtDate>;\n    private decision_depth: number;\n\n    private logger: Logger;\n\n    constructor(service: Service) {\n        this.service = service;\n        this.begin();\n\n        this.exclusion_zones = new Map<Person, Array<Exclusion>>();\n        this.usage_counts = new Map<Role, Map<Assignment, number>>();\n\n        this.logger = LoggingWrapper.getLogger(\"scheduler.rules.facts\");\n    }\n\n    copyUsageDataFrom(previous_facts: RuleFacts) {\n        this.usage_counts = new Map<Role, Map<Assignment, number>>();\n        for (let person of Array.from(previous_facts.exclusion_zones.keys())) {\n            let zones = previous_facts.exclusion_zones.get(person);\n            this.exclusion_zones.set(person, zones);\n        }\n\n        for (let key of Array.from(previous_facts.usage_counts.keys())) {\n            let usage_count = previous_facts.usage_counts.get(key);\n            this.usage_counts.set(key, usage_count);\n        }\n    }\n\n    get schedule_dates(): Array<ScheduleAtDate> {\n        return Array.from(this.dates.values());\n    }\n\n    exec_sub_decision(callback) {\n        this.decision_depth++;\n        try {\n            callback();\n        } finally {\n            this.decision_depth--;\n        }\n    }\n\n    get_schedule_for_date(date: Date): ScheduleAtDate {\n        if (isUndefined(date)) {\n            this.logger.error(\"Cannot return a schedule for a null date\");\n            return null;\n        }\n        let dateAtHour = dayAndHourForDate(date);\n        let schedule = this.dates.get(dateAtHour);\n        if (schedule == null) {\n            this.logger.info(\"Create new schedule for \" + dateAtHour);\n            schedule = new ScheduleAtDate(date);\n            this.dates.set(dateAtHour, schedule);\n            return schedule;\n        } else {\n            // this.logger.info(\"Reuse schedule for \" + dateAtHour + \" = \" + date);\n            return schedule;\n        }\n    }\n\n    begin() {\n        // This is all PickRules, for all roles\n        this.all_pick_rules = this.service.pick_rules();\n        this.decision_depth = 0;\n        // this.logPickRules();\n\n        this.all_role_rules = this.service.role_rules();\n        this.dates = new Map<string, ScheduleAtDate>();\n    }\n\n    // private logPickRules() {\n    //     this.logger.info(\"Pick rules:\");\n    //     this.all_pick_rules.forEach((list, role) => {\n    //         this.logger.info(\" - \" + role.name);\n    //         list.forEach(r => {\n    //             this.logger.info(\" --- \" + r.constructor.name + \" = \" + SafeJSON.Stringify(r));\n    //         })\n    //     });\n    // }\n\n    begin_new_role_group(role_group: Array<Role>) {\n    }\n\n    begin_new_role(date: Date) {\n        this.current_date = date;\n        this.decisions_for_date = [];\n    }\n\n    add_decision(text: string, log: boolean = true) {\n        if (!text) {\n            return;\n        }\n        text = \"--- \".repeat(this.decision_depth) + text;\n        if (log) {\n            this.logger.debug(text);\n        }\n        if (!this.decisions_for_date) {\n            this.decisions_for_date = [];\n        }\n        this.decisions_for_date.push(text);\n    }\n\n    has_exclusion_for(date: Date, person: Person, role: Role): any[] {\n        // Is this person unavailable on this date?\n        if (person.is_unavailable_on(date)) {\n            return [true, \"unavailable\"];\n        }\n\n        // Is this person excluded for this date?\n        let exclusions_for_person = this.exclusion_zones.get(person);\n        if (!exclusions_for_person) {\n            return [false, \"no exclusions for \" + person.name];\n        }\n\n        // Does the exclusion zone for this person overlap with any existing?\n        let availability = person.prefs.availability;\n        let end_date = availability.get_end_date_from(date);\n        let new_exclusion = new Exclusion(date, end_date, role);\n\n        for (let exclusion of exclusions_for_person) {\n            if (exclusion.overlap_with(new_exclusion)) {\n                return [true, \"overlap with existing \" + exclusion];\n            }\n        }\n        return [false, \"clear!\"];\n    }\n\n    get_next_suitable_assignment_for(role: Role): Assignment {\n        // runs the pick rules for this role\n        let pick_rules = this.all_pick_rules.get(role);\n        if (!pick_rules) {\n            return null;\n        }\n        for (let rule of pick_rules) {\n            // this.logger.info(\"Using rule \" + rule.constructor.name + \", \" + SafeJSON.Stringify(rule) + \" next...\");\n            if (rule instanceof OnThisDate) {\n                let result = rule.execute(this);\n                if (result) return result;\n            }\n            if (rule instanceof UsageWeightedSequential) {\n                let assignments = rule.execute(this, role);\n                if (assignments.length) {\n                    for (let possible_assignment of assignments) {\n                        // can't already be in the role on this date\n                        let [has_exclusion, reason] = this.has_exclusion_for(this.current_date, possible_assignment.person, role);\n                        if (has_exclusion) {\n\n                            this.add_decision(possible_assignment.name + \" cant do it, they have an exclusion: \" + reason);\n                            continue;\n                        }\n\n                        // Must be available\n                        if (!this.is_person_available(possible_assignment.person, this.current_date, true)) {\n                            // No need to add decision. This will be done automatically.\n                            continue;\n                        }\n\n                        return possible_assignment;\n                    }\n                }\n                return null;\n            }\n        }\n    }\n\n    get_next_suitable_role_for_assignment(assignment: Assignment) {\n        let role_rules = this.all_role_rules.get(assignment);\n        if (!role_rules) {\n            return null;\n        }\n        for (let rule of role_rules) {\n            if (rule instanceof FixedRoleOnDate) {\n                let result = rule.execute(this);\n                if (result) return result;\n            }\n            if (rule instanceof WeightedRoles) {\n                let result = rule.execute(this, assignment);\n                return result[0];\n            }\n        }\n        return null;\n    }\n\n    private get_person_count_for_role(role: Role, assignment: Assignment): Map<Assignment, number> {\n        if (role == null) {\n            throw new Error(\"Role cannot be null here\");\n        }\n        if (assignment == null) {\n            throw new Error(\"Person cannot be null here\");\n        }\n        if (!this.usage_counts.has(role)) {\n            this.logger.debug(\"Creating new role counter for \" + role.name);\n            let new_count = new Map<Assignment, number>();\n            this.usage_counts.set(role, new_count);\n        }\n\n        let by_person = this.usage_counts.get(role);\n        if (!by_person.has(assignment)) {\n            this.logger.info(\"Starting count at 0 for \" + assignment.person.name);\n            by_person.set(assignment, 0);\n        }\n        return by_person;\n    }\n\n    number_of_times_role_used_by_person(role: Role, assignment: Assignment): number {\n        if (role == null) {\n            throw new Error(\"Role cannot be null here\");\n        }\n        if (assignment == null) {\n            throw new Error(\"Assignment cannot be null here\");\n        }\n        return this.get_person_count_for_role(role, assignment).get(assignment);\n    }\n\n    total_number_of_times_person_placed_in_roles(assignment: Assignment, roles: Array<Role>): number {\n        let total = 0;\n        for (let role of roles) {\n            let person_counter_for_role = this.get_person_count_for_role(role, assignment);\n            total = total + person_counter_for_role.get(assignment);\n        }\n        return total;\n    }\n\n    is_person_available(person: Person, date: Date, record_unavailability: boolean = false) {\n        throwOnInvalidDate(date);\n        if (person.is_unavailable_on(date)) {\n            return false;\n        }\n\n        // Check for specific availability based on past placements\n        return person.is_available(date, this, record_unavailability);\n    }\n\n    placements_for_person(person: Person, start_date: Date, end_date: Date) {\n        let facts = this.filter(start_date, end_date);\n        // this.logger.info(\" - facts: \" + SafeJSON.Stringify(facts));\n        return facts.filter(fact => fact.includes_person(person));\n    }\n\n    index_of_person_in_role_group(person: Person, role: Role) {\n        return 0;\n    }\n\n    use_this_person_in_role(assignment: Assignment, role: Role) {\n        let person_counter = this.get_person_count_for_role(role, assignment);\n        let current_count = person_counter.get(assignment);\n        person_counter.set(assignment, (current_count + 1));\n        // this.logger.info(\"Up to \" + person_counter.get(person));\n    }\n\n    add_exclusion_for(person: Person, role: Role, date: Date) {\n        let exclusions_for_person = this.exclusion_zones.get(person);\n        if (!exclusions_for_person) {\n            exclusions_for_person = [];\n        }\n\n        // make the exclusion\n        let availability = person.prefs.availability;\n        let end_date = availability.get_end_date_from(date);\n\n        let exclusion = new Exclusion(date, end_date, role);\n        exclusions_for_person.push(exclusion);\n        this.add_decision(\"Recorded exclusion for \" + person.name + \", \" + role.name + \" for \" + Math.floor(exclusion.duration_in_days) + \" days\");\n        this.exclusion_zones.set(person, exclusions_for_person);\n    }\n\n    is_person_in_exclusion_zone(person: Person, role: Role, date_for_row: Date) {\n        let exclusion_zones = this.exclusion_zones.get(person);\n        if (!exclusion_zones) {\n            return false;\n        }\n\n        // lets find those zones relating directly to this role\n        let zones_matching_role = exclusion_zones.filter(z => z.role.uuid == role.uuid);\n        if (!zones_matching_role.length) {\n            return false;\n        }\n\n        let containining_this_date = zones_matching_role.filter(z => z.includes_date(date_for_row));\n        return containining_this_date.length > 0;\n    }\n\n    place_person_in_role(assignment: Assignment,\n                         role: Role,\n                         date: Date,\n                         record_usage_stats = true,\n                         execute_conditionals = true,\n                         decision_override: string = null): boolean {\n        let specific_day = this.get_schedule_for_date(date);\n\n        let person = assignment.person;\n        if (!specific_day.can_place_person_in_role(person, role)) {\n            return false;\n        }\n\n        this.add_exclusion_for(person, role, date);\n        specific_day.add_person(assignment, role);\n        this.add_decision(decision_override == null ? \"Placing \" + person.name + \" into \" + role : decision_override);\n\n        if (record_usage_stats) {\n            this.use_this_person_in_role(assignment, role);\n        }\n\n        // Execute any conditional actions on the person\n        if (execute_conditionals) {\n            assignment.conditional_rules.forEach(r => {\n                this.exec_sub_decision(() => {\n                    r.run(this, person, role);\n                });\n            });\n        }\n        return true;\n    }\n\n    set_decisions_for(assignment: Assignment, role: Role, date: Date, clear_decisions: boolean = true) {\n        let specific_day = this.get_schedule_for_date(date);\n        specific_day.set_decisions(assignment, role, this.decisions_for_date);\n        if (clear_decisions) {\n            this.clear_decisions();\n        }\n    }\n\n    clear_decisions() {\n        this.decisions_for_date = [];\n    }\n\n    filter(start_date: Date, end_date: Date) {\n        return Array.from(this.dates.values()).filter((schedule) => {\n            return schedule.date >= start_date && schedule.date <= end_date;\n        }).sort((s1, s2) => {\n            return s1.date > s2.date ? 1 : (s1.date < s2.date ? -1 : 0);\n        });\n    }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/rule_based/rule-facts.ts","import {BaseStore} from \"../common/base_model\";\nimport {isUndefined} from \"ionic-angular/util/util\";\nimport {Role} from \"../role\";\nimport {action} from \"mobx\";\n\nexport class RolesStore extends BaseStore<Role> {\n    constructor() {\n        super();\n    }\n\n    get roles(): Array<Role> {\n        return this.items.sort((a, b) => {\n            if (a.name < b.name) {\n                return -1;\n            }\n            if (a.name > b.name) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    @action\n    removeAllRoles() {\n        this.clear_all_objects_from_array();\n    }\n\n    @action\n    addRole(r: Role): Role {\n        return this.add_object_to_array(r);\n    }\n\n    @action\n    addRoles(roles: Array<Role>) {\n        this.add_objects_to_array(roles);\n    }\n\n    @action\n    removeRole(r: Role) {\n        this.remove_object_from_array(r);\n    }\n\n    find_role(role_name: string) {\n        if (isUndefined(role_name) || role_name == null) {\n            return null;\n        }\n        return this.roles.find(r => r.name.toLowerCase() == role_name.toLowerCase());\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/tests/role-store.ts","import {PeopleStore, Person} from \"../../scheduling/people\";\nimport {Availability, AvailabilityEveryNOfM, AvailabilityUnit} from \"../../scheduling/availability\";\nimport {ScheduleOn, TryToScheduleWith} from \"../../scheduling/rule_based/rules\";\nimport {Organization, OrganizationStore} from \"../../scheduling/organization\";\nimport {csd} from \"../../scheduling/common/date-utils\";\nimport {RootStore} from \"../../store/root\";\nimport {\n    defaultAcousticGuitar, defaultBass, defaultComputerRole, defaultDrumsRole, defaultElectricGuitar,\n    defaultKeysRole,\n    defaultLeaderRole,\n    defaultSaxRole,\n    defaultSoundRole,\n    defaultVocalsRole\n} from \"../../scheduling/tests/sample-data\";\nimport {RolesStore} from \"../../scheduling/tests/role-store\";\nimport {Service} from \"../../scheduling/service\";\n\n\nexport class NPBCStoreConstruction {\n    constructor() {\n    }\n\n    static SetupStore(person_store: PeopleStore, org_store: OrganizationStore, service: Service) {\n        let neil = person_store.find_person_with_name(\"Neil Clayton\");\n        let cherilyn = person_store.find_person_with_name(\"Cherilyn Clayton\");\n        let kylie = person_store.find_person_with_name(\"Kylie Welch-Herekiuha\");\n        let christine = person_store.find_person_with_name(\"Christine Edlin\");\n        let stuart = person_store.find_person_with_name(\"Stuart Campbell\");\n        let jeremy_selfe = person_store.find_person_with_name(\"Jeremy Selfe\");\n\n        let daniel = person_store.find_person_with_name(\"Daniel Gibbs\");\n        let ben = person_store.find_person_with_name(\"Ben Watson\");\n        let courtney = person_store.find_person_with_name(\"Courtney Anderson\");\n        let robs = person_store.find_person_with_name(\"Rob Sweeney\");\n        let robp = person_store.find_person_with_name(\"Rob Penhey\");\n        let dave = person_store.find_person_with_name(\"Dave Humphries\");\n        let ralph = person_store.find_person_with_name(\"Ralph Lambert\");\n        let anita = person_store.find_person_with_name(\"Anita Lambert\");\n        let annie = person_store.find_person_with_name(\"Annie McMullen\");\n        let jo = person_store.find_person_with_name(\"Jo Marquet\");\n        let allie = person_store.find_person_with_name(\"Allie Pope\");\n        let craig = person_store.find_person_with_name(\"Craig Campbell\");\n\n        let chris = person_store.find_person_with_name(\"Chris Evans\");\n        let jeremy_l = person_store.find_person_with_name(\"Jeremy Legg\");\n        let andre_l = person_store.find_person_with_name(\"Andre Legg\");\n        let suzie_l = person_store.find_person_with_name(\"Suzie Legg\");\n        let jeremy_w = person_store.find_person_with_name(\"Jeremy Watson\");\n        let john_sutherland = person_store.find_person_with_name(\"John Sutherland\");\n\n        /*\n        Add unavailability here\n         */\n        chris.add_unavailable(csd(2018, 7, 15));\n\n        jeremy_selfe.add_unavailable(csd(2018, 6, 3));\n        jeremy_selfe.add_unavailable(csd(2018, 7, 1));\n\n        cherilyn.add_unavailable_range(csd(2018, 7, 14), csd(2018, 7, 29));\n        cherilyn.add_unavailable(csd(2018, 6, 17), 'ob meeting');\n        cherilyn.add_unavailable(csd(2018, 7, 1), 'ob meeting');\n        cherilyn.add_unavailable(csd(2018, 8, 19), 'mental health!');\n\n        christine.add_unavailable(csd(2018, 5, 6));\n        christine.add_unavailable(csd(2018, 6, 17));\n        christine.add_unavailable(csd(2018, 7, 22));\n\n        jeremy_l.add_unavailable(csd(2018, 6, 17));\n\n        jeremy_w.add_unavailable(csd(2018, 6, 3));\n        jeremy_w.add_unavailable(csd(2018, 7, 8));\n        jeremy_w.add_unavailable(csd(2018, 7, 22));\n\n        stuart.add_unavailable_range(csd(2018, 8, 12), csd(2018, 9, 9));\n\n        allie.add_unavailable(csd(2018, 6, 3));\n        allie.add_unavailable(csd(2018, 7, 22));\n\n        craig.add_unavailable_range(csd(2018, 8, 12), csd(2018, 9, 9));\n\n        /*\n        Add specifics here\n        */\n        // daniel.put_on_specific_role_for_date(defaultComputerRole, csd(2018, 6, 17));\n\n\n        org_store.addOrganizaton(new Organization(\"North Porirua Baptist Church\"));\n\n        neil.avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n        cherilyn.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        christine.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        stuart.avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n        kylie.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        jeremy_selfe.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        ralph.avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n        craig.set_availability(new AvailabilityEveryNOfM(1, 3));\n        ben.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        courtney.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        robp.avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n        robs.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        dave.avail_every(2.2, AvailabilityUnit.EVERY_N_WEEKS);\n        annie.avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n        anita.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        jo.avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n        allie.avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n        chris.avail_every(3, AvailabilityUnit.EVERY_N_WEEKS);\n        jeremy_l.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        andre_l.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        suzie_l.avail_every(4, AvailabilityUnit.EVERY_N_WEEKS);\n        jeremy_w.avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        john_sutherland.avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n\n\n        service.add_person(neil)\n            .add_role(defaultSoundRole, 1)\n            .add_role(defaultSaxRole, 3)\n            .add_secondary_action(new TryToScheduleWith(cherilyn, new Availability(1, AvailabilityUnit.EVERY_N_WEEKS), 2));\n\n        service.add_person(cherilyn)\n            .add_role(defaultKeysRole)\n            .if_assigned_to(defaultLeaderRole).then(new ScheduleOn(cherilyn, defaultKeysRole));\n\n        service.add_person(christine)\n            .add_role(defaultVocalsRole);\n        // christine.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(christine, defaultVocalsRole));\n\n        let stuart_assignment = service.add_person(stuart);\n        stuart_assignment\n            .add_role(defaultAcousticGuitar)\n            .add_role(defaultVocalsRole)\n            .if_assigned_to(defaultLeaderRole).then(new ScheduleOn(stuart, defaultAcousticGuitar));\n        stuart_assignment.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(stuart, defaultVocalsRole));\n\n        service.add_person(kylie)\n            .add_role(defaultAcousticGuitar)\n            .if_assigned_to(defaultAcousticGuitar).then(new ScheduleOn(kylie, defaultVocalsRole));\n\n        service.add_person(jeremy_selfe)\n            .add_role(defaultLeaderRole, 2)\n            .add_role(defaultElectricGuitar)\n            .if_assigned_to(defaultLeaderRole).then(new ScheduleOn(jeremy_selfe, defaultElectricGuitar));\n\n        service.add_person(ralph)\n            .add_role(defaultAcousticGuitar)\n            .if_assigned_to(defaultAcousticGuitar).then(new ScheduleOn(anita, defaultVocalsRole));\n\n        service.add_person(daniel)\n            .add_role(defaultDrumsRole, 3)\n            .add_role(defaultBass);\n\n        service.add_person(craig)\n            .add_role(defaultDrumsRole);\n\n        service.add_person(ben)\n            .add_role(defaultBass, 1);\n\n        service.add_person(courtney)\n            .add_role(defaultVocalsRole);\n\n        service.add_person(robp)\n            .add_role(defaultBass, 3)\n            .add_role(defaultSoundRole);\n\n        service.add_person(robs)\n            .add_role(defaultBass);\n\n        service.add_person(dave)\n            .add_role(defaultAcousticGuitar)\n            .add_role(defaultVocalsRole)\n            .if_assigned_to(defaultAcousticGuitar).then(new ScheduleOn(dave, defaultVocalsRole));\n\n        service.add_person(anita)\n            .add_role(defaultVocalsRole);\n\n        service.add_person(annie)\n            .add_role(defaultVocalsRole);\n\n        service.add_person(jo)\n            .add_role(defaultVocalsRole);\n\n        service.add_person(allie)\n            .add_role(defaultVocalsRole);\n\n        service.add_person(chris)\n            .add_role(defaultSoundRole)\n            .add_role(defaultElectricGuitar);\n\n        service.add_person(jeremy_l)\n            .add_role(defaultSoundRole, 2)\n            .add_role(defaultComputerRole);\n\n        service.add_person(andre_l)\n            .add_role(defaultSoundRole)\n            .add_role(defaultElectricGuitar);\n\n        service.add_person(suzie_l)\n            .add_role(defaultElectricGuitar);\n\n        service.add_person(jeremy_w)\n            .add_role(defaultSoundRole, 2)\n            .add_role(defaultComputerRole);\n\n        service.add_person(john_sutherland)\n            .add_role(defaultSoundRole)\n            .add_role(defaultComputerRole, 2)\n    }\n\n    static SetupPeople(people_store: PeopleStore) {\n        people_store.add_person(new Person(\"Neil Clayton\"));\n        people_store.add_person(new Person(\"Cherilyn Clayton\"));\n        people_store.add_person(new Person(\"Kylie Welch-Herekiuha\"));\n        people_store.add_person(new Person(\"Christine Edlin\"));\n        people_store.add_person(new Person(\"Stuart Campbell\"));\n        people_store.add_person(new Person(\"Jeremy Selfe\"));\n\n        people_store.add_person(new Person(\"Daniel Gibbs\"));\n        people_store.add_person(new Person(\"Ben Watson\"));\n        people_store.add_person(new Person(\"Courtney Anderson\"));\n        people_store.add_person(new Person(\"Rob Sweeney\"));\n        people_store.add_person(new Person(\"Rob Penhey\"));\n        people_store.add_person(new Person(\"Dave Humphries\"));\n        people_store.add_person(new Person(\"Ralph Lambert\"));\n        people_store.add_person(new Person(\"Anita Lambert\"));\n        people_store.add_person(new Person(\"Annie McMullen\"));\n        people_store.add_person(new Person(\"Jo Marquet\"));\n        people_store.add_person(new Person(\"Allie Pope\"));\n        people_store.add_person(new Person(\"Craig Campbell\"));\n\n        people_store.add_person(new Person(\"Chris Evans\"));\n        people_store.add_person(new Person(\"Jeremy Legg\"));\n        people_store.add_person(new Person(\"Andre Legg\"));\n        people_store.add_person(new Person(\"Suzie Legg\"));\n        people_store.add_person(new Person(\"Jeremy Watson\"));\n        people_store.add_person(new Person(\"John Sutherland\"));\n\n\n    }\n\n    static SetupRoles(roles_store: RolesStore) {\n        roles_store.addRoles([\n            // defaultSpeakerRole,\n            // defaultThemeRole,\n            defaultLeaderRole,\n            defaultSoundRole,\n            defaultComputerRole,\n            defaultKeysRole,\n            defaultVocalsRole,\n            defaultDrumsRole,\n            defaultBass,\n            defaultAcousticGuitar,\n            defaultElectricGuitar,\n            defaultSaxRole\n        ]);\n    }\n}\n\n\nexport class ThamesTest {\n    constructor() {\n    }\n\n    static SetupStore(root_store: RootStore) {\n        // let lynette = new Person(\"Lynette Mill\");\n        // let eddie = new Person(\"Eddie\");\n        // let donald = new Person(\"Donald\");\n        // let levi = new Person(\"Levi\");\n        // let brian = new Person(\"Brian\");\n        // let zoe = new Person(\"Zoe\");\n        // let paul = new Person(\"Paul\");\n        // let shaz = new Person(\"Shaz\");\n        // let aria = new Person(\"Aria\");\n        // let bronwyn = new Person(\"Bronwyn\");\n        // let foster = new Person(\"Foster\");\n        // let elizabeth = new Person(\"Elizabeth\");\n        // let gael = new Person(\"Gael\");\n        // let bernard = new Person(\"Bernard\");\n        // let felicia = new Person(\"Felicia\");\n        // let henryk = new Person(\"Henryk\");\n        // let rose = new Person(\"Rose\");\n        //\n        // let org_store = root_store.organization_store;\n        //\n        // org_store.addOrganizaton(new Organization(\"Thames Baptist Church\"));\n\n        // person_store.add_person(foster)\n        //     .add_role(defaultComputerRole)\n        //     .avail_every(12, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(lynette)\n        //     .add_role(defaultLeaderRole)\n        //     .set_availability(new AvailabilityEveryNOfM(2, 3));\n        //\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(lynette, defaultKeysRole));\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(eddie, defaultVocalsRole));\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(donald, defaultVocalsRole));\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(henryk, defaultSoundRole));\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(donald, defaultSaxRole));\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(donald, defaultAcousticGuitar));\n        // lynette.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(levi, defaultBass));\n        //\n        // person_store.add_person(eddie)\n        //     .add_role(defaultVocalsRole)\n        //     .add_role(defaultSoundRole)\n        //     .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(donald)\n        //     .add_role(defaultSoundRole)\n        //     .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(levi)\n        //     .add_role(defaultBass)\n        //     .avail_every(2, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(elizabeth)\n        //     .add_role(defaultComputerRole)\n        //     .avail_every(6, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(gael)\n        //     .add_role(defaultComputerRole)\n        //     .avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(felicia)\n        //     .add_role(defaultComputerRole)\n        //     .avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(rose)\n        //     .add_role(defaultComputerRole)\n        //     .avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // person_store.add_person(bernard);\n        //\n        // person_store.add_person(henryk)\n        //     .add_role(defaultSoundRole)\n        //     .avail_every(10, AvailabilityUnit.EVERY_N_WEEKS);\n        // henryk.if_assigned_to(defaultSoundRole).then(new ScheduleOn(felicia, defaultComputerRole));\n        //\n        // person_store.add_person(shaz)\n        //     .add_role(defaultLeaderRole)\n        //     .avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n        //\n        // shaz.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(shaz, defaultAcousticGuitar));\n        // shaz.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(bronwyn, defaultVocalsRole));\n        // shaz.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(aria, defaultDrumsRole));\n        // shaz.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(bernard, defaultSoundRole));\n        //\n        // person_store.add_person(brian)\n        //     .add_role(defaultLeaderRole)\n        //     .avail_every(1, AvailabilityUnit.EVERY_N_WEEKS);\n        // brian.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(zoe, defaultLeaderRole));\n        // brian.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(bronwyn, defaultVocalsRole));\n        // brian.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(donald, defaultSoundRole));\n        // brian.if_assigned_to(defaultLeaderRole).then(new ScheduleOn(paul, defaultSaxRole));\n        //\n        // /*\n        // 2 levels of availability.\n        // 1) Always on when leader X is on (which is what we do now)\n        // 2) Alternating people in a dependent role (weighting), when leader X is on\n        //  */\n        //\n        // gael.add_unavailable(csd(2018, 3, 4), \"trip\");\n        // brian.add_unavailable_range(csd(2018, 2, 10), csd(2018, 3, 4));\n        // lynette.add_unavailable_range(csd(2017, 12, 24), csd(2018, 1, 28));\n        // // lynette.add_unavailable(csd(2018, 2, 11))\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/store/test.store.ts","import {Role} from \"../role\";\n\nlet speakerPriority = 12;\nlet leaderPriority = 11;\nlet soundPriority = 10;\nlet instrumentPriority = 10;\n\nlet defaultSpeakerRole = new Role(\"Speaker\", speakerPriority);\nlet defaultThemeRole = new Role(\"Theme\", speakerPriority);\nlet defaultLeaderRole = new Role(\"Worship Leader\", leaderPriority);\nlet defaultSoundRole = new Role(\"Sound\", soundPriority);\nlet defaultComputerRole = new Role(\"Computer\", soundPriority);\nlet defaultBass = new Role(\"Bass\", instrumentPriority);\nlet defaultDrumsRole = new Role(\"Drums\", instrumentPriority);\nlet defaultKeysRole = new Role(\"Keys\", instrumentPriority);\nlet defaultAcousticGuitar = new Role(\"Guitar (Acoustic)\", instrumentPriority);\nlet defaultElectricGuitar = new Role(\"Guitar (Electric)\", instrumentPriority);\nlet defaultVocalsRole = new Role(\"Vocals\", instrumentPriority);\nlet defaultSaxRole = new Role(\"Sax\", instrumentPriority);\n\ndefaultAcousticGuitar.maximum_count = 2;\ndefaultVocalsRole.maximum_count = 3;\n\nexport {\n    defaultSpeakerRole,\n    defaultThemeRole,\n    defaultLeaderRole,\n    defaultSoundRole,\n    defaultComputerRole,\n    defaultBass,\n    defaultDrumsRole,\n    defaultKeysRole,\n    defaultAcousticGuitar,\n    defaultElectricGuitar,\n    defaultVocalsRole,\n    defaultSaxRole,\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/tests/sample-data.ts","import {Component} from '@angular/core';\nimport includes from 'lodash/includes';\nimport {ScheduleWithRules} from \"../../scheduling/rule_based/scheduler\";\nimport {computed} from \"mobx\";\nimport {Person} from \"../../scheduling/people\";\nimport {RootStore} from \"../../store/root\";\nimport {UIStore} from \"../../store/UIState\";\n\n@Component({\n    selector: 'person-editor',\n    templateUrl: 'person-editor.html'\n})\nexport class PersonEditorComponent {\n    constructor(private store: RootStore) {\n    }\n\n    @computed\n    get schedule(): ScheduleWithRules {\n        return this.store.organization_store.schedule;\n    }\n\n    @computed\n    get ui(): UIStore {\n        return this.store.ui_store;\n    }\n\n    @computed\n    get person(): Person {\n        return this.store.ui_store.selected_person;\n    }\n\n    scheduled_dates() {\n        // Find a list of schedules for this person\n        return Array.from(this.schedule.dates.values()).filter(v => {\n            return includes(v.people, this.ui.selected_person);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/person-editor/person-editor.ts","import {Component, Input} from '@angular/core';\nimport {FormGroup} from \"@angular/forms\";\nimport * as to from \"to-case\";\n\n@Component({\n    selector: 'show-form-errors',\n    templateUrl: 'show-form-errors.html'\n})\nexport class ShowFormErrorsComponent {\n    @Input() control: FormGroup;\n\n    private errorMessages = {\n        'required': (name) => `${name} is required`,\n        'email': (name) => `${name} should be a valid email address`,\n        'minlength': (name, params) => `${name} should be at least ${params.requiredLength} characters`,\n        'maxlength': (name, params) => `${name} should be at most ${params.requiredLength} characters`,\n        'pattern': (name, params) => `The required pattern is: ${params.requiredPattern}`,\n    };\n\n    constructor() {\n    }\n\n    public addMessage(type: string, callback: object) {\n        this.errorMessages[type] = callback;\n    }\n\n    get showErrors(): boolean | null {\n        // console.log(`Invalid: ${this.control.invalid}, Dirty: ${this.control.dirty}, Touched: ${this.control.touched}`);\n        return this.errors.length > 0 && (this.control.dirty || this.control.touched);\n    }\n\n    get errors(): string[] {\n        let errors: Array<string> = [];\n        for (let fieldName of Object.keys(this.control.controls)) {\n            let ctrl = this.control.get(fieldName);\n            if (ctrl && ctrl.invalid) {\n                if (ctrl.errors) {\n                    // console.log(fieldName + \" has errors: \" + SafeJSON.Stringify(ctrl.errors));\n                    for (let errorType of Object.keys(ctrl.errors)) {\n                        let theError = ctrl.errors[errorType];\n                        let message = this.getMessage(fieldName, errorType, theError);\n                        // console.log(\"Add \" + message + \" for \" + fieldName + \"/\" + errorType);\n                        errors.push(message)\n                    }\n                }\n            }\n        }\n        // console.log(`Errors: ${errors}`);\n        return errors;\n    }\n\n    private getMessage(fieldName: string, type: string, params: any): string {\n        fieldName = to.capital(fieldName);\n        if (this.errorMessages[type]) {\n            // console.log(`Calling func for ${type}`);\n            return this.errorMessages[type](fieldName, params);\n        }\n        return params.message;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/show-form-errors/show-form-errors.ts","import {Component, EventEmitter, Input, Output} from '@angular/core';\nimport {NavController} from \"ionic-angular\";\nimport {RootStore} from \"../../store/root\";\nimport {Person} from \"../../scheduling/people\";\n\n@Component({\n    selector: 'person-details',\n    templateUrl: 'person-details.html'\n})\nexport class PersonDetailsComponent {\n    @Input() person: Person;\n\n    @Output() show_availability = new EventEmitter();\n\n    constructor(public navCtrl: NavController,\n                public rootStore: RootStore) {\n    }\n\n    ngOnInit() {\n        // for debugging\n        if (this.person != null) {\n            // this.role_tapped(this.person.roles[0]);\n            // this.add_if_in_role_rule();\n            // this.add_try_to_be_on_with_rule();\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/person-details/person-details.ts","import {Component, EventEmitter, Input, Output} from '@angular/core';\nimport {Availability, AvailabilityEveryNOfM, AvailabilityUnit} from \"../../scheduling/availability\";\nimport {clamp} from \"ionic-angular/util/util\";\n\n@Component({\n    selector: 'availability-options',\n    templateUrl: 'availability-options.html'\n})\nexport class AvailabilityOptionsComponent {\n    _availability: Availability;\n    _state = {};\n    type: string;\n\n    get availability(): Availability {\n        return this._availability;\n    }\n\n    @Input('availability')\n    set availability(value: Availability) {\n        this._availability = value;\n        if (this._availability) {\n            this.type = this._availability instanceof AvailabilityEveryNOfM ? \"fraction\" : \"regular\";\n            let state = this.state;\n            state['days'] = this._availability.period.toString();\n            state['unit'] = this._availability.unit;\n            if (this._availability instanceof AvailabilityEveryNOfM) {\n                state['weeks'] = this._availability.period_to_look_at.toString();\n            }\n        }\n    }\n\n    @Output() availabilityChange = new EventEmitter<Availability>();\n\n    constructor() {\n    }\n\n    get state_key(): string {\n        return this.is_regular ? \"regular\" : \"fraction\";\n    }\n\n    get state() {\n        let key = this.state_key;\n        if (!this._state.hasOwnProperty(key)) {\n            this._state[key] = {}\n        }\n        return this._state[key]\n    }\n\n    get is_regular(): boolean {\n        return this.type == \"regular\";\n    }\n\n    get days(): string {\n        return this.state['days'];\n    }\n\n    set days(value: string) {\n        let state = this.state;\n        state['days'] = value;\n\n        let days_number = parseInt(state['days']);\n        let weeks_number = parseInt(state['weeks']);\n        if (!this.is_regular) {\n            // Weeks must be at least days. Can't do 3 of 2, for example.\n            let valid_weeks = Math.max(weeks_number, days_number);\n            state['weeks'] = clamp(1, valid_weeks, 4).toString();\n        }\n    }\n\n    get weeks(): string {\n        return this.state['weeks']\n    }\n\n    set weeks(value: string) {\n        let state = this.state;\n        state['weeks'] = value;\n        let days_number = parseInt(state['days']);\n        let weeks_number = parseInt(state['weeks']);\n        if (!this.is_regular) {\n            // Days must be <= weeks. Can't do 3 in 2 for example.\n            let valid_days = Math.min(days_number, weeks_number);\n            valid_days = clamp(1, valid_days, 4);\n            state['days'] = valid_days.toString()\n        }\n    }\n\n    regular_days_options(tag = '') {\n        if (!this.availability) {\n            return []\n        }\n        let weeks = [\"1\", \"2\", \"3\", \"4\"];\n        if (this.type == \"fractional\") {\n            return weeks\n        }\n\n        if (this.availability.unit == AvailabilityUnit.EVERY_N_DAYS) {\n            return [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]\n        }\n        return weeks\n    }\n\n    build_availability() {\n        let days_number: number = parseInt(this.state['days']) || 2;\n        if (this.type == \"fraction\") {\n            // \"this.unit\" isn't used here\n            let weeks_number: number = parseInt(this.state['weeks']) || 3;\n            this.availability = new AvailabilityEveryNOfM(days_number, weeks_number)\n        } else {\n            this.availability = new Availability(days_number, this.state['unit'])\n        }\n        this.availabilityChange.emit(this.availability);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/availability-options/availability-options.ts","import {Component, EventEmitter, Input, Output} from '@angular/core';\nimport {Role} from \"../../scheduling/role\";\nimport {Assignment} from \"../../scheduling/assignment\";\n\n@Component({\n    selector: 'role-summary',\n    templateUrl: 'role-summary.html'\n})\nexport class RoleSummaryComponent {\n    @Input() assignment: Assignment;\n    @Output() tapped = new EventEmitter<Role>();\n\n    constructor() {\n    }\n\n    get roles(): Array<Role> {\n        if (this.assignment) {\n            return this.assignment.roles;\n        }\n        return [];\n    }\n\n    weight_for(role: Role): string {\n        return this.assignment.weight_for_role(role).toString();\n    }\n\n    delete_role(role) {\n        this.assignment.remove_role(role);\n    }\n\n    show_role_detail(role:Role) {\n        this.tapped.emit(role);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/role-summary/role-summary.ts","import {Component, Input} from '@angular/core';\nimport {Role} from \"../../scheduling/role\";\nimport {NavController} from \"ionic-angular\";\nimport {Assignment} from \"../../scheduling/assignment\";\n\n@Component({\n    selector: 'role-detail',\n    templateUrl: 'role-detail.html'\n})\nexport class RoleDetailComponent {\n    @Input('assignment') assignment: Assignment;\n    @Input('role') role: Role;\n\n    constructor(public navCtrl: NavController) {\n    }\n\n    get role_weightings() {\n        return [1, 2, 3, 4, 5]\n    }\n\n    weight_for(role: Role): string {\n        return this.assignment.weight_for_role(role).toString();\n    }\n\n    set_weight_for(role, new_weight: any) {\n        console.log(`Set r: ${role} to new weight: ${new_weight}`);\n        let weight_number = parseFloat(new_weight);\n        this.assignment.set_weight_for_role(role, weight_number);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/role-detail/role-detail.ts","import {Component, Input} from '@angular/core';\nimport {Rule} from \"../../scheduling/rule_based/rules\";\nimport {Assignment} from \"../../scheduling/assignment\";\n\n@Component({\n    selector: 'rule-details',\n    templateUrl: 'rule-details.html'\n})\nexport class RuleDetailsComponent {\n    @Input('assignment') assignment: Assignment;\n\n    constructor() {\n    }\n\n    rules_for_role() {\n        if (!this.assignment) {\n            return [];\n        }\n        let rules: Array<Rule> = this.assignment.conditional_rules;\n        let actions = this.assignment.secondary_actions;\n        return rules.concat(actions);\n    }\n\n    delete_rule(rule: any | Rule) {\n        this.assignment.delete_rule(rule);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/rule-details/rule-details.ts","import json2csv from \"json2csv\";\nimport fileSaver from \"file-saver\";\nimport {ScheduleWithRules} from \"../rule_based/scheduler\";\nimport * as _ from 'lodash';\n\nclass CSVExporter {\n    private schedule: ScheduleWithRules;\n\n    constructor(schedule: ScheduleWithRules) {\n        this.schedule = schedule;\n    }\n\n    valueOf() {\n        let {fields, rows} = this.generate_rows();\n        return json2csv({\n            data: rows,\n            fields: fields\n        });\n    }\n\n    generate_rows() {\n        let fields = this.schedule.jsonFields();\n        let rows = this.schedule.jsonResult().map(row => {\n            // Want to remap this structure\n            let new_row = {\n                Date: row.date.toDateString()\n            };\n            for (let field of fields) {\n                if (field == 'Date') continue;\n                let all_names = _.map(row[field], p => p.name);\n                new_row[field] = _.join(all_names, \", \");\n            }\n            return new_row;\n        });\n        return {\n            fields: fields,\n            rows: rows\n        }\n    }\n\n    write_to_file(filename: string) {\n        let {fields, rows} = this.generate_rows();\n        let result = json2csv({\n            data: rows,\n            fields: fields\n        });\n\n        let data = new Blob([result], {type: 'text/csv'});\n        fileSaver.saveAs(data, filename);\n    }\n}\n\nexport {\n    CSVExporter\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/exporter/csv.exporter.ts","import {ObjectWithUUID} from \"./common/base_model\";\nimport {observable} from \"mobx\";\n\nexport class Role extends ObjectWithUUID {\n    @observable name: string;\n    @observable maximum_count: number;\n    @observable layout_priority: number;\n\n    constructor(name: string, priority: number = 0, max_in_role: number = 1) {\n        super();\n        this.name = name;\n        this.maximum_count = max_in_role;\n        this.layout_priority = priority;\n    }\n\n    valueOf() {\n        return this.name;\n    }\n\n    toString() {\n        return this.valueOf();\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/role.ts","const DISCOVERY_DOCS = [\"https://sheets.googleapis.com/$discovery/rest?version=v4\"];\nconst SCOPES = [\n    \"https://www.googleapis.com/auth/spreadsheets\",\n    \"https://www.googleapis.com/auth/drive\"\n];\n\nlet credentials = {\n    \"installed\":\n        {\n            \"client_id\": \"323446159269-e3nf5h9l69uvbcmnm0ve8vfd03das5vq.apps.googleusercontent.com\",\n            \"project_id\": \"role-scheduler\",\n            \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n            \"token_uri\": \"https://accounts.google.com/o/oauth2/token\",\n            \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n            \"client_secret\": \"I5yPbU_NU2l43lqFatO-g_gu\",\n            \"javascript_origins\": [\n                \"http://localhost:8000\"\n            ]\n        }\n};\n\nexport {\n    credentials,\n    SCOPES,\n    DISCOVERY_DOCS\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/auth-common.ts","export interface ValidationResponse {\n    user?: string,\n    ok: boolean,\n    detail: string\n}\n\nexport class LoginResponse implements ValidationResponse {\n    user?: string;\n    ok: boolean;\n    detail: string;\n\n    constructor(ok: boolean = true, reason: string = \"\", user: string = null) {\n        this.ok = ok;\n        this.detail = reason;\n        this.user = user;\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/interfaces.ts","import {parseDateFromSpreadsheetDate, parseMomentDateFromSpreadsheetDate} from \"../scheduling/common/date-utils\";\nimport {isDefined, isUndefined} from \"ionic-angular/util/util\";\nimport {ScheduleWithRules} from \"../scheduling/rule_based/scheduler\";\nimport * as moment from \"moment\";\nimport {Moment} from \"moment\";\nimport {ScheduleInput} from \"../scheduling/shared\";\nimport {Logger} from \"ionic-logging-service\";\nimport {OrganizationStore} from \"../scheduling/organization\";\nimport {LoggingWrapper} from \"./logging-wrapper\";\nimport {SafeJSON} from \"./json/safe-stringify\";\nimport {Service} from \"../scheduling/service\";\n\nexport class SpreadsheetReader {\n    problems: Map<string, Set<string>>;\n    schedule: ScheduleWithRules;\n    private logger: Logger;\n    private organization_store: OrganizationStore;\n\n    constructor(org_store: OrganizationStore) {\n        this.problems = new Map<string, Set<string>>();\n        this.logger = LoggingWrapper.getLogger(\"spreadsheet.reader\");\n        this.organization_store = org_store;\n    }\n\n    parse_schedule_from_spreadsheet(rowData: Array<any>) {\n        // OK, we will preload a schedule using a previous schedule\n        // To do this we need to derive the start and end date (so it's duration is valid)\n        let fake_service = new Service(`From spreadsheet`);\n        let input = new ScheduleInput(fake_service);\n\n        // NPBCStoreConstruction.SetupStore(input.people, new OrganizationStore());\n\n        this.logger.info(\"Parsing schedule...\");\n        // First, we validate we have the expected column names\n        let column_names = rowData[0];\n        if (\"Date\" in column_names) {\n            throw new Error(\"No date!\");\n        }\n\n        let dataRows = rowData.slice(1);\n        let allDates = dataRows\n            .map<Moment>(v => parseMomentDateFromSpreadsheetDate(v[0]))\n            .filter(v => moment(v).isValid());\n\n        // let min_date = allDates.reduce((prev, currentValue) => prev && prev.isBefore(currentValue) ? prev : currentValue);\n        // let max_date = allDates.reduce((prev, currentValue) => prev && prev.isAfter(currentValue) ? prev : currentValue);\n        let min_date: Moment = allDates[0];\n        let max_date: Moment = allDates[allDates.length - 1];\n\n        input.start_date = min_date.toDate();\n        input.end_date = max_date.toDate();\n        // this.logger.info(`Starting ${input.start_date} and ending ${input.end_date}`);\n\n        this.schedule = new ScheduleWithRules(input);\n\n        // Now we read each row and add people into various roles/positions\n        let roles_store = this.organization_store.roles_store;\n        let people_store = this.organization_store.people_store;\n\n        for (let row of dataRows) {\n            // Iterate all the roles that we know of\n            let current_date = null;\n            let facts = this.schedule.facts;\n            let for_this_date = facts.get_schedule_for_date(current_date);\n\n            row.forEach((col, index) => {\n                if (index == 0) {\n                    if (isDefined(col) && col.toString().length > 0) {\n                        current_date = parseDateFromSpreadsheetDate(col);\n                    } else {\n                        current_date = null;\n                    }\n                    return;\n                }\n\n                // Check we have a valid date for this row\n                if (!current_date) {\n                    return;\n                }\n\n                // Dump out logging only if we're going to process this row\n                if (index == 0) {\n                    this.logger.info(\"Process: \" + col);\n                }\n\n                // Lookup the role!\n                let role_name = column_names[index];\n                if (role_name) {\n                    let global_role = roles_store.find_role(role_name);\n                    if (global_role) {\n                        this.logger.info(` - Role: ${global_role}`);\n\n                        let peoples_names = col.split(\",\").map(v => v.trim());\n                        this.logger.info(`   - people: ${SafeJSON.stringify(peoples_names)}`);\n\n                        if (for_this_date) {\n                            // Go through people and add them to this role\n                            for (let persons_name of peoples_names) {\n                                if (isUndefined(persons_name)) {\n                                    continue;\n                                }\n                                if (persons_name.length == 0) {\n                                    continue;\n                                }\n\n                                let person = people_store.find_person_with_name(persons_name, true);\n                                if (person == null) {\n                                    this.add_problem(\"person\", `cannot find ${persons_name}`);\n                                } else {\n                                    let assignment = fake_service.add_person(person).add_role(global_role);\n                                    this.schedule.facts.place_person_in_role(assignment, global_role, current_date, true, false);\n                                    // this.schedule.facts.place_person_in_role(person, global_role, current_date, true, false);\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    get has_problems(): boolean {\n        return this.problems.size > 0;\n    }\n\n    private add_problem(key: string, problem_description: string) {\n        let array_of_things = this.problems.get(key);\n        if (!array_of_things) {\n            // noinspection JSPrimitiveTypeWrapperUsage\n            array_of_things = new Set<string>();\n            this.problems.set(key, array_of_things);\n        }\n        array_of_things.add(problem_description);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/spreadsheet_reader.ts","import {Component} from '@angular/core';\nimport {AlertController, IonicPage, Loading, LoadingController, NavController} from 'ionic-angular';\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {ServerProvider} from \"../../providers/server/server\";\nimport {isDefined} from \"ionic-angular/util/util\";\nimport {Subject} from \"rxjs/Subject\";\nimport \"rxjs/add/operator/debounceTime\";\nimport {Logger, LoggingService} from \"ionic-logging-service\";\nimport {SafeJSON} from \"../../common/json/safe-stringify\";\n\nclass AbstractLoginPage {\n    loginForm: FormGroup;\n    loading: Loading;\n\n    username_usability: string;\n    registration_password: string;\n    registration_error: string;\n\n    private _registration_username: string;\n    private username_checker: Subject<any>;\n    private logger: Logger;\n\n    constructor(protected nav: NavController,\n                protected alertCtrl: AlertController,\n                protected logService: LoggingService,\n                protected server: ServerProvider,\n                protected loadingCtrl: LoadingController) {\n        this.registration_error = \"\";\n        this.logger = this.logService.getLogger(\"page.login.abstract\");\n\n        this.username_checker = new Subject();\n        this.username_checker.debounceTime(500).subscribe(v => {\n            this.check_username()\n        });\n    }\n\n    get registration_username(): string {\n        return this._registration_username;\n    }\n\n    set_registration_username(value: string) {\n        this._registration_username = value;\n        if (this.registration_error) {\n            this.registration_error = \"\";\n        }\n        this.username_checker.next(value)\n    }\n\n    private async check_username() {\n        let username = this._registration_username;\n        this.logger.info(`Checking that ${username} is ok...`);\n        if (isDefined(username)) {\n            try {\n                this.username_usability = await this.server.isUsernameAvailableAndGood(username).toPromise();\n            } catch (e) {\n                this.registration_error = SafeJSON.stringify(e);\n                console.log(e);\n            }\n        }\n    }\n\n    showPopup(title, subtitle, buttonText = \"OK\", handler = (data) => {\n    }) {\n        let options = {\n            title: title,\n            subTitle: subtitle,\n        };\n        if (buttonText.length) {\n            options['buttons'] = [\n                {\n                    text: buttonText,\n                    handler: handler\n                }\n            ];\n        }\n        let alert = this.alertCtrl.create(options);\n        alert.present();\n        return alert;\n    }\n\n    showLoading() {\n        this.loading = this.loadingCtrl.create({\n            content: 'Please wait [login]...',\n            dismissOnPageChange: true\n        });\n        this.loading.present();\n    }\n\n    showError(text) {\n        this.loading.dismiss();\n\n        let alert = this.alertCtrl.create({\n            title: 'Opps!',\n            subTitle: text,\n            buttons: ['OK']\n        });\n        alert.present(prompt);\n    }\n\n    // setupTestUser(users: IPersonStore, deleteUser = false): any {\n    //     try {\n    //         users.clearRegistrationState();\n    //         users.setRegistrationUsername(\"neil@cloudnine.net.nz\");\n    //         users.setRegistrationPassword(\"testing59\");\n    //         if (deleteUser) {\n    //             users.deletePerson(\"neil@cloudnine.net.nz\");\n    //         }\n    //     } catch (error) {\n    //         console.log(error);\n    //     }\n    // }\n}\n\n@IonicPage({\n    defaultHistory: ['home'],\n    name: 'login'\n})\n@Component({\n    selector: 'page-login',\n    templateUrl: 'login.html',\n})\nexport class LoginPage extends AbstractLoginPage {\n    constructor(protected nav: NavController,\n                protected alert: AlertController,\n                protected logService: LoggingService,\n                protected server: ServerProvider,\n                loading: LoadingController,\n                private formBuilder: FormBuilder) {\n        super(nav, alert, logService, server, loading);\n        this.loginForm = this.formBuilder.group({\n            'email': [\"\", [Validators.email, Validators.required]],\n            'password': [\"\", [Validators.required, Validators.minLength(8)]],\n        });\n    }\n\n    ngAfterViewInit() {\n        // For debug/testing\n        // this.createAccount();\n        // this.setupTestUser(this.store.s.users);\n    }\n\n    public createAccount() {\n        // this.nav.push('RegisterPage');\n    }\n\n    public login() {\n        this.showLoading();\n        let username = this.registration_username;\n\n        // let password = this.registration_password;\n        let password = this.loginForm.get('password').value;\n        console.log(`Starting login... using ${username} and ${password}`);\n        this.server.loginUser(username, password).subscribe(({user, ok, detail}) => {\n            console.log(`Login completed ${ok}: ${detail}`);\n            if (!ok) {\n                this.showError(detail);\n            } else {\n                // Using this rather that this.nav.pop(), so it works\n                // when the page is hit directly as a deep link\n                this.nav.setRoot('home')\n            }\n        }, (error) => {\n            console.error(error);\n            this.showError(error);\n        });\n    }\n\n}\n\nexport {\n    AbstractLoginPage\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import {NgModule} from '@angular/core';\nimport {ScheduleViewerComponent} from './schedule-viewer/schedule-viewer';\nimport {IonicModule} from \"ionic-angular\";\nimport {NgPipesModule} from \"angular-pipes\";\nimport {PersonEditorComponent} from './person-editor/person-editor';\nimport {ReasonsComponent} from './reasons/reasons';\nimport {ShowFormErrorsComponent} from \"./show-form-errors/show-form-errors\";\nimport {PersonDetailsComponent} from './person-details/person-details';\nimport {AvailabilityOptionsComponent} from './availability-options/availability-options';\nimport {RoleSummaryComponent} from './role-summary/role-summary';\nimport {RoleDetailComponent} from './role-detail/role-detail';\nimport {RuleDetailsComponent} from './rule-details/rule-details';\n\n@NgModule({\n    declarations: [\n        ScheduleViewerComponent,\n        PersonEditorComponent,\n        ShowFormErrorsComponent,\n        ReasonsComponent,\n        PersonDetailsComponent,\n        AvailabilityOptionsComponent,\n        RoleSummaryComponent,\n        RoleDetailComponent,\n        RuleDetailsComponent,\n    ],\n    imports: [\n        IonicModule,\n        NgPipesModule,\n    ],\n    exports: [\n        ScheduleViewerComponent,\n        PersonEditorComponent,\n        ReasonsComponent,\n        ShowFormErrorsComponent,\n        PersonDetailsComponent,\n        AvailabilityOptionsComponent,\n        RoleSummaryComponent,\n        RoleDetailComponent,\n        RuleDetailsComponent,\n    ]\n})\nexport class ComponentsModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import {Component} from '@angular/core';\nimport {Platform} from 'ionic-angular';\nimport {StatusBar} from '@ionic-native/status-bar';\nimport {SplashScreen} from '@ionic-native/splash-screen';\n\nimport {TabsPage} from '../pages/tabs/tabs';\n\n@Component({\n    templateUrl: 'app.html'\n})\nexport class MyApp {\n    rootPage: any = TabsPage;\n\n    constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n        platform.ready().then(() => {\n            // Okay, so the platform is ready and our plugins are available.\n            // Here you can do any higher level native things you might need.\n            statusBar.styleDefault();\n            splashScreen.hide();\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import * as _ from 'lodash';\nimport {Role} from \"../role\";\nimport {Person} from \"../people\";\nimport {Logger} from \"ionic-logging-service\";\nimport {RuleFacts} from \"./rule-facts\";\nimport {LoggingWrapper} from \"../../common/logging-wrapper\";\nimport {Availability} from \"../availability\";\nimport {daysBetween, ScheduleAtDate} from \"../shared\";\nimport {ScheduleWithRules} from \"./scheduler\";\nimport {Assignment} from \"../assignment\";\n\nclass RuleExecution {\n    object: any;\n    trigger: Rule;\n\n    private logger: Logger;\n\n    constructor(obj, trigger: Rule) {\n        this.object = obj;\n        this.trigger = trigger;\n        this.logger = LoggingWrapper.getLogger(\"scheduler.rules\");\n    }\n\n    get empty(): boolean {\n        return this.object == null && this.trigger == null;\n    }\n\n    public static EMPTY() {\n        return new RuleExecution(null, null);\n    }\n}\n\nclass Rule {\n    priority: number;\n\n    constructor(priority: number = 0) {\n        this.priority = priority;\n    }\n\n    get title() {\n        return \"title\";\n    }\n\n    get description() {\n        return \"description\";\n    }\n\n    toString() {\n        return this.description;\n    }\n}\n\nclass FixedRoleOnDate extends Rule {\n    date: Date;\n    role: Role;\n\n    constructor(date: Date, r: Role, priority = 0) {\n        super(priority);\n        this.date = date;\n        this.role = r;\n    }\n\n    execute(state: RuleFacts): Role {\n        if (this.date == state.current_date) {\n            return this.role;\n        }\n        return null;\n    }\n}\n\nclass WeightedRoles extends Rule {\n    weightedRoles: Map<Role, number>;\n\n    constructor(weightedRules: Map<Role, number>) {\n        super();\n        this.weightedRoles = new Map<Role, number>(weightedRules);\n        this.normalize_weights();\n    }\n\n    get roles_sorted_by_weight(): Array<Role> {\n        return _.sortBy(Array.from(this.weightedRoles.keys()), (o) => {\n            return this.weightedRoles.get(o);\n        });\n    }\n\n    execute(state: RuleFacts, assignment: Assignment): Array<Role> {\n        // sort by current score, highest first.\n        let roles_in_weight_order = this.roles_sorted_by_weight;\n\n        let roles = Array.from(this.weightedRoles.keys());\n        let total_usages = state.total_number_of_times_person_placed_in_roles(assignment, roles);\n        if (total_usages == 0) {\n            return roles_in_weight_order;\n        }\n\n        // Sort based on realtime score\n        return _.sortBy(roles_in_weight_order, role => {\n            let role_weighting = this.weightedRoles.get(role);\n\n            let current_score = state.number_of_times_role_used_by_person(role, assignment);\n            let runtime_weighting = current_score / total_usages;\n            // this.logger.info(role.name + \", weight: \" + role_weighting + \". Has score: \" + current_score + \". Runtime weight: \" + runtime_weighting);\n\n            if (runtime_weighting < role_weighting) {\n                return -1;\n            } else if (runtime_weighting > role_weighting) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    private normalize_weights() {\n        let total_weight: number = _.sum(Array.from(this.weightedRoles.values()));\n        // this.logger.info(\"Total weights: \" + total_weight);\n        this.weightedRoles.forEach((num, key) => {\n            this.weightedRoles.set(key, num / total_weight);\n        });\n    }\n}\n\nclass OnThisDate extends Rule {\n    role: Role;\n    date: Date;\n    assignment: Assignment;\n\n    constructor(date: Date, assignment: Assignment, role: Role, priority: number = 0) {\n        super(priority);\n        this.date = date;\n        this.role = role;\n        this.assignment = assignment;\n    }\n\n    execute(state: RuleFacts): Assignment {\n        let hasPrimaryRole = this.assignment.has_primary_role(this.role);\n        if (state.current_date == this.date && hasPrimaryRole) {\n            return this.assignment;\n        }\n        return null;\n    }\n}\n\nclass UsageWeightedSequential extends Rule {\n    private usages: Map<Assignment, number>;\n    private original_index: Map<Assignment, number>;\n\n    constructor(assignments: Array<Assignment>, priority: number = 0) {\n        super(priority);\n        this.usages = new Map<Assignment, number>();\n        this.original_index = new Map<Assignment, number>();\n\n        assignments.forEach((p, index) => {\n            this.usages.set(p, 0);\n            this.original_index.set(p, index);\n        });\n    }\n\n    execute(state: RuleFacts, role: Role): Array<Assignment> {\n        // Sort by number\n        return Array.from(this.usages.keys()).sort((a1, a2) => {\n            let usageForP1 = state.number_of_times_role_used_by_person(role, a1);\n            let usageForP2 = state.number_of_times_role_used_by_person(role, a2);\n            if (usageForP1 < usageForP2) {\n                return -1;\n            } else if (usageForP1 > usageForP2) {\n                return 1;\n            }\n\n            // Compare by index\n            let p1Index = state.index_of_person_in_role_group(a1.person, role);\n            let p2Index = state.index_of_person_in_role_group(a2.person, role);\n            if (p1Index < p2Index) {\n                return -1;\n            } else if (p1Index > p2Index) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n}\n\nclass ConditionalRule extends Rule {\n    actions: Array<ConditionAction>;\n\n    constructor() {\n        super();\n        this.actions = [];\n    }\n\n    condition(stat: RuleFacts, person: Person, role: Role) {\n        return false;\n    }\n\n    run(stat: RuleFacts, person: Person, role: Role) {\n        if (this.condition(stat, person, role)) {\n            _.sortBy(this.actions, o => o.priority).forEach(r => {\n                r.executeAction(stat, person, role);\n            });\n        }\n    }\n\n    then(action: ConditionAction) {\n        this.actions.push(action);\n    }\n}\n\nclass AssignedToRoleCondition extends ConditionalRule {\n    private role: Role;\n\n    constructor(role: Role) {\n        super();\n        this.role = role;\n    }\n\n    condition(stat: RuleFacts, person: Person, role: Role): boolean {\n        return this.role.uuid == role.uuid;\n    }\n\n    get title() {\n        return `When on ${this.role}`\n    }\n\n    get description() {\n        return this.actions.join(\", \")\n    }\n}\n\nclass ConditionAction extends Rule {\n    executeAction(stat: RuleFacts, person: Person, role: Role) {\n    }\n}\n\nclass ScheduleOn extends ConditionAction {\n    private person: Person;\n    private role: Role;\n\n    constructor(person: Person, role: Role) {\n        super();\n        this.person = person;\n        this.role = role;\n    }\n\n    executeAction(stat: RuleFacts, person: Person, role: Role) {\n        let assignment = stat.service.get_assignment_for(person);\n        if (stat.place_person_in_role(assignment, this.role, stat.current_date)) {\n            stat.add_decision(`${this.constructor.name} executed, adding ${this.person} to role ${this.role}`);\n        } else {\n            stat.add_decision(`Couldn't place ${this.person} in role, the role is full`);\n        }\n    }\n\n    get title() {\n        return `If on ${this.person}`\n    }\n\n    get description() {\n        return `Also be on ${this.role}`;\n    }\n}\n\nclass SecondaryAction extends Rule {\n    owner: Person;\n\n    execute(schedule_at_date: ScheduleAtDate, schedule: ScheduleWithRules) {\n\n    }\n}\n\nclass TryToScheduleWith extends SecondaryAction {\n    private other_person: Person;\n    private reach: Availability;\n    private max_number_of_times: number;\n    private success_executions: number = 0;\n\n    constructor(other_person: Person, reach: Availability, max_number = 99999) {\n        super();\n        this.other_person = other_person;\n        this.reach = reach;\n        this.max_number_of_times = max_number;\n    }\n\n    execute(schedule_at_date: ScheduleAtDate, schedule: ScheduleWithRules) {\n        // If this line includes a use of self, does it also include a use of the other person?\n        if (schedule_at_date.includes_person(this.owner)) {\n            if (!schedule_at_date.includes_person(this.other_person)) {\n                //\n                // TODO: mark somehow that this is a movement, and it shouldn't be reprocessed?\n                // Only because we might get into a situation where we move someone, only to move them again with the next rule\n                // or a secondary action for someone else\n\n                // Is there some place in the schedule where we could move the person, within the allowed threshold?\n                let closest = schedule.closest_schedule_date(schedule_at_date.date, (s): number | boolean => {\n                    // Not interested in the same one\n                    if (s == schedule_at_date) {\n                        return false;\n                    }\n                    // This SD must include the other person\n                    if (!s.includes_person(this.other_person)) {\n                        return false;\n                    }\n\n                    // It's not us, and it does contain the other person! Yay!\n                    return Math.abs(daysBetween(schedule_at_date.date, s.date));\n                });\n\n                if (closest && this.success_executions < this.max_number_of_times) {\n                    console.log(`We should try to move ${this.owner} because they are not on with ${this.other_person}`);\n                    console.log(` - Try to move them to ${closest.date.toDateString()}`);\n\n                    let reason = `Moved from ${schedule_at_date.date.toDateString()} to be with ${this.other_person.name}`;\n                    schedule_at_date.move_person(this.owner, closest, reason);\n\n                    this.success_executions++;\n                }\n            }\n        }\n    }\n\n    get title() {\n        return `If scheduled on...`;\n    }\n\n    get description() {\n        return `Try to team with ${this.other_person.initials} within ${this.reach.description(true)}, max ${this.max_number_of_times}`;\n    }\n}\n\nexport {\n    UsageWeightedSequential,\n    WeightedRoles,\n    FixedRoleOnDate,\n    OnThisDate,\n    AssignedToRoleCondition,\n    ConditionalRule,\n    ConditionAction,\n    ScheduleOn,\n    SecondaryAction,\n    TryToScheduleWith,\n    Rule\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/rule_based/rules.ts","import {ScheduleAtDate, ScheduleInput} from \"../shared\";\nimport {Role} from \"../role\";\nimport {Person} from \"../people\";\nimport * as _ from 'lodash';\nimport {Logger} from \"ionic-logging-service\";\nimport {dayAndHourForDate} from \"../common/date-utils\";\nimport {RuleFacts} from \"./rule-facts\";\nimport {LoggingWrapper} from \"../../common/logging-wrapper\";\nimport {SafeJSON} from \"../../common/json/safe-stringify\";\nimport {Assignment} from \"../assignment\";\nimport {Service} from \"../service\";\n\nclass ScheduleWithRules {\n    params: ScheduleInput;\n    facts: RuleFacts;\n    free_text: {};\n\n    private logger: Logger;\n    private previous_scheduler: ScheduleWithRules;\n\n    constructor(input: ScheduleInput, previous: ScheduleWithRules = null) {\n        this.logger = LoggingWrapper.getLogger(\"scheduler\");\n\n        this.params = input;\n        this.params.validate();\n        this.free_text = {};\n        if (previous) {\n            this.warmup_using(previous);\n        }\n        this.clear_working_state();\n    }\n\n    get dates(): Array<ScheduleAtDate> {\n        return this.facts.schedule_dates;\n    }\n\n    get assignments(): Array<Assignment> {\n        return this.params.service.assignments;\n    }\n\n    get service(): Service {\n        return this.params.service;\n    }\n\n    create_schedule() {\n        if (!this.params.service) {\n            throw new Error(\"No service defined, cannot create the schedule\");\n        }\n        let schedule_duration = this.params.schedule_duration_in_days;\n        this.logger.info(\"Working from \" + this.params.start_date + \" to: \" + this.params.end_date);\n        this.logger.debug(\"Schedule is \" + schedule_duration + \" days long\");\n\n        let role_groups = this.params.service.roles_in_layout_order_grouped;\n        let role_names = role_groups.map(g => SafeJSON.stringify(g.map(r => r.name)));\n        this.logger.debug(\"Roles (in order of importance): \" + SafeJSON.stringify(role_names));\n\n        this.facts.begin();\n\n        role_groups.forEach(rg => this.process_role_group(rg));\n\n        this.process_secondary_actions();\n    }\n\n    process_role_group(role_group: Array<Role>) {\n        this.facts.begin_new_role_group(role_group);\n\n        let current_date = this.params.start_date;\n        this.logger.debug(\"\\r\\nNext group: \" + SafeJSON.stringify(role_group.map(r => r.name)));\n\n        // Iterate through all dates\n        let iterations = 0;\n\n        while (current_date.valueOf() <= this.params.end_date.valueOf()) {\n            this.logger.debug(\"Next date: \" + current_date);\n\n            for (let role of role_group) {\n                this.facts.begin_new_role(current_date);\n                // Put everyone who wants to be doing something specifically on a certain date in place first\n                this.process_role(current_date, role, role_group);\n            }\n\n            // Move to the next date\n            current_date = this.choose_next_schedule_date(current_date);\n\n            // This is taking 10,000 reasons too far!\n            iterations++;\n            if (iterations > 10000) {\n                this.logger.error(\"Max iterations - bug!?\");\n                break\n            }\n\n        }\n    }\n\n    layout_specific_roles(current_date: Date, role: Role): Array<Assignment> {\n        // Check if anyone has specifics for this date\n        let placements = new Array<Assignment>();\n        this.assignments.forEach(assignment => {\n            // Find out if they want to do something specifically on this day\n            let specificRolesForDate = assignment.specific_roles_for_date(current_date);\n            if (specificRolesForDate) {\n                let applicable_roles = specificRolesForDate.filter(r => r.uuid == role.uuid);\n                if (applicable_roles) {\n                    applicable_roles.forEach(role => {\n                        this.facts.place_person_in_role(assignment, role, current_date, true, true, \"because they want to be on specifically\");\n                        placements.push(assignment);\n                    });\n                }\n            }\n        });\n        return placements;\n    }\n\n    is_role_filled_for_date(role: Role, date: Date) {\n        if (!this.facts) {\n            return false;\n        }\n        let specific_day = this.facts.get_schedule_for_date(date);\n        let peopleInRole = specific_day.people_in_role(role);\n        return peopleInRole.length >= role.maximum_count;\n    }\n\n    process_role(current_date: Date, role: Role, role_group: Array<Role>) {\n        if (!this.facts) {\n            throw new Error(\"No facts defined. Cannot process role\");\n        }\n        let specific_day = this.facts.get_schedule_for_date(current_date);\n\n        // If already at max for this role, ignore it.\n        if (this.is_role_filled_for_date(role, current_date)) {\n            this.logger.debug(\"Not processing \" + role.name + \", already have \" + role.maximum_count + \" slotted in\");\n            return;\n        }\n\n        // For this date, try to layout all people\n        let people_for_this_role = this.service.assignments_with_role(role);\n\n        // Setup our available people (which at the beginning, is 'everyone')\n        if (people_for_this_role.length == 0) {\n            // this.logger.debug(\"Laying out role: \" + role.name + \" ... skipping (no one to do it)\");\n            return;\n        }\n\n        let iteration_max = people_for_this_role.length;\n        let person_placed_into_role = null;\n\n        this.facts.add_decision(\"Role: \" + role.name, false);\n        let specifically_placed_people = this.layout_specific_roles(current_date, role);\n\n        while (iteration_max > 0 && specific_day.number_of_people_in_role(role) < role.maximum_count) {\n            iteration_max--;\n\n            let next_suitable_assignment = this.facts.get_next_suitable_assignment_for(role);\n            if (next_suitable_assignment == null) {\n                this.facts.add_decision(\"No people available for role \" + role.name);\n                break;\n            }\n\n            let message = \"Can \" + next_suitable_assignment.name + \" do role \" + role.name + \"?\";\n            this.facts.add_decision(message);\n\n            if (_.includes(specific_day.people_in_role(role), next_suitable_assignment.person)) {\n                let message = \"Skipping \" + next_suitable_assignment.name + \", they are already on it\";\n                // TODO: Fix? this is a hack to make sure we don't infinite loop. If we get here, looping would bring us right back unless we change engine state\n                this.facts.use_this_person_in_role(next_suitable_assignment, role);\n                this.facts.add_decision(message);\n                continue;\n            }\n\n            let next_wanted_role_for_assignment = this.facts.get_next_suitable_role_for_assignment(next_suitable_assignment);\n\n            // Only let this happen if the role is within the current group being processed\n            // TODO: This could be optional (might not want role_groups being mutually exclusive like this)\n            if (_.includes(role_group, next_wanted_role_for_assignment) && !this.is_role_filled_for_date(next_wanted_role_for_assignment, current_date)) {\n                if (next_wanted_role_for_assignment.uuid != role.uuid) {\n\n                    let other_decision = \"Putting \" + next_suitable_assignment.name + \" into \" + next_wanted_role_for_assignment + \" instead of \" + role + \" due to a role weighting\";\n\n                    if (this.facts.place_person_in_role(next_suitable_assignment, next_wanted_role_for_assignment, current_date, true, true, other_decision)) {\n                        // now continue with the loop, because we still havn't found someone for the role we were originally looking for.\n                        this.facts.add_decision(\"Check role \" + role + \" again because of weighted placement\");\n                        continue;\n                    }\n                }\n            }\n\n            // OK. So. Turns out the role is the same.\n            // Place the person, and we're done filling this role.\n            let did_place = this.facts.place_person_in_role(next_suitable_assignment, role, current_date);\n            if (did_place) {\n                person_placed_into_role = next_suitable_assignment;\n            }\n\n            let numberOfPeopleInRole = specific_day.number_of_people_in_role(role);\n            if (numberOfPeopleInRole >= role.maximum_count) {\n                this.facts.add_decision(\"Done with role.\");\n            }\n\n            if (person_placed_into_role) {\n                this.facts.set_decisions_for(person_placed_into_role, role, current_date);\n                person_placed_into_role = null;\n            }\n        }\n\n        if (specifically_placed_people.length) {\n            specifically_placed_people.forEach(p => {\n                this.facts.set_decisions_for(p, role, current_date, false);\n            });\n            this.facts.clear_decisions();\n        }\n    }\n\n    private choose_next_schedule_date(date: Date): Date {\n        let next_date = new Date(date);\n        // this.logger.debug(\"Moving from date ... : \" + next_date);\n        next_date.setDate(date.getDate() + this.params.days_per_period);\n        // this.logger.debug(\".... to date ... : \" + next_date);\n        return next_date;\n    }\n\n    private clear_working_state() {\n        this.facts = new RuleFacts(this.service);\n        if (this.previous_scheduler) {\n            this.facts.copyUsageDataFrom(this.previous_scheduler.facts);\n            this.logger.info(\"Taking usage data from previous schedule...\");\n        }\n    }\n\n    jsonResult(minimized: boolean = false) {\n        // An array of dictionaries\n        // Each dict is ordered keys, being in order of the role\n\n        // These 'people' end up being our roles.\n        // Thing is, we want to know ALL people, in order...\n        // So I think - lets do this for ALL roles first\n        let ordered_roles = this.service.roles_in_layout_order;\n        let dates = this.facts.schedule_dates;\n\n        let rows = [];\n        for (let schedule_for_day of dates) {\n            // We create a dict, in order, for EVERY key of ordered_roles\n            let rowDict = {};\n\n            rowDict['date'] = schedule_for_day.date;\n            rowDict['date_key'] = schedule_for_day.date_key;\n\n            // Look at each known role. Fill in the people fulfilling that role\n            for (let role of ordered_roles) {\n                // Do we have a value, for this?\n                let free_text = this.notes_for_date(schedule_for_day.date, role);\n                let value_for_cell = schedule_for_day.people_in_role(role);\n                rowDict[role.name] = [...free_text, ...value_for_cell];\n            }\n\n            // Add the row\n            rows.push(rowDict);\n        }\n        return rows;\n    }\n\n    jsonFields() {\n        let ordered_roles = this.service.roles_in_layout_order;\n        let field_names = ordered_roles.map(r => {\n            return r.name;\n        });\n        return [\n            \"Date\",\n            ...field_names\n        ]\n    }\n\n    reasons_for(person: Person, date: Date): Array<string> {\n        let specific_day = this.facts.get_schedule_for_date(date);\n        let score = specific_day.score_for(person);\n        if (score) {\n            return score.decisions;\n        }\n        return [];\n    }\n\n    is_person_in_exclusion_zone(person: Person, role: Role, date_for_row: Date) {\n        return this.facts.is_person_in_exclusion_zone(person, role, date_for_row);\n    }\n\n    add_note(date: Date, role: Role, note: string) {\n        let role_map = this.get_role_map_for(date, role);\n        role_map.push(note);\n    }\n\n    notes_for_date(date: Date, role: Role): string[] {\n        return this.get_role_map_for(date, role);\n    }\n\n    private get_role_map_for(date: Date, role: Role): string[] {\n        if (!this.free_text) {\n            this.free_text = {};\n        }\n\n        let date_key = dayAndHourForDate(date);\n        if (!this.free_text[date_key]) {\n            this.free_text[date_key] = {};\n        }\n\n        let role_map = this.free_text[date_key];\n        if (!role_map[role.uuid]) {\n            role_map[role.uuid] = [];\n        }\n        return role_map[role.uuid];\n    }\n\n    warmup_using(previous_schedule: ScheduleWithRules) {\n        this.previous_scheduler = previous_schedule;\n        this.logger.info(\"Warming up using a previous schedule...\");\n    }\n\n    private process_secondary_actions() {\n        // Check everyone that has secondary actions\n        this.service.assignments.forEach(assignment => {\n            let secondary_actions = assignment.secondary_actions;\n            secondary_actions.forEach(secondary_action => {\n                /*\n                Iterate all dates in the schedule. Does the action want to do anything?\n                 */\n                for (let schedule_on_date of this.dates) {\n                    secondary_action.execute(schedule_on_date, this);\n                }\n            });\n        });\n    }\n\n    closest_schedule_date(date: Date, distance_predicate: (sd) => number | boolean): ScheduleAtDate {\n        let min_distance: number = 32767;\n        let chosen_sd = null;\n        this.dates.forEach(sd => {\n            let this_distance = distance_predicate(sd);\n            if (typeof this_distance === 'boolean') {\n                if (!this_distance) {\n                    return;\n                }\n            }\n            if (typeof this_distance === 'number') {\n                if (this_distance < min_distance) {\n                    min_distance = this_distance;\n                    chosen_sd = sd;\n                }\n            }\n        });\n        return chosen_sd;\n    }\n}\n\nexport {\n    ScheduleWithRules\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/rule_based/scheduler.ts","import {Person} from \"./people\";\nimport {Role} from \"./role\";\nimport {AssignedToRoleCondition, ConditionalRule, Rule, SecondaryAction, WeightedRoles} from \"./rule_based/rules\";\nimport {action, computed} from \"mobx\";\nimport {check_if_undefined, delete_from_array} from \"./common/base_model\";\nimport {dayAndHourForDate} from \"./common/date-utils\";\n\nclass Assignment {\n    person: Person;\n\n    role_weightings: Map<Role, number>;\n    specific_roles: Map<string, Array<Role>>;\n\n    private condition_rules: Array<ConditionalRule>;\n    private secondary_action_list: Array<SecondaryAction>;\n\n    constructor(person: Person = new Person()) {\n        this.person = person;\n        this.role_weightings = new Map<Role, number>();\n        this.specific_roles = new Map<string, Array<Role>>();\n        this.secondary_action_list = [];\n        this.condition_rules = [];\n    }\n\n    @action\n    add_role(r: Role, weighting = 1): Assignment {\n        check_if_undefined(this.person, \"Cannot add a nil or undefined person\");\n        check_if_undefined(r, \"Cannot add a nil or undefined role\");\n        this.role_weightings.set(r, weighting);\n        return this;\n    }\n\n    set_weight_for_role(r: Role, new_weight: number) {\n        if (this.role_weightings.has(r)) {\n            this.role_weightings.set(r, new_weight);\n        }\n    }\n\n    weight_for_role(r: Role): number {\n        let weight = this.role_weightings.get(r);\n        if (weight) {\n            return weight;\n        }\n        return 0;\n    }\n\n    @action\n    remove_role(r: Role): Assignment {\n        this.role_weightings.delete(r);\n        return this;\n    }\n\n    role_rules(): Array<Rule> {\n        let rules = [];\n\n        // TODO: Hmm. Could add unavailability dates as rules?\n        // Have a rule that returns NO roles if the person is unavailable.\n        // Could do that on the Pick as well. Here might be a little cleaner, model wise.\n\n        // Add in weighted role distribution\n        let weighting = new WeightedRoles(this.role_weightings);\n        rules.push(weighting);\n\n        return rules;\n    }\n\n    get role_names(): string {\n        return this.roles.map(r => r.name).join(\", \")\n    }\n\n    @computed\n    get roles(): Array<Role> {\n        let iterable = this.role_weightings.keys();\n        return Array.from(iterable);\n    }\n\n    @computed\n    get highest_role_layout_priority(): number {\n        return this.roles.reduce((previousMax, role) => {\n            return Math.max(previousMax, role.layout_priority);\n        }, 0);\n    }\n\n    get name(): string {\n        return this.person.name;\n    }\n\n    put_on_specific_role_for_date(role: Role, date: Date) {\n        let key = dayAndHourForDate(date);\n        if (!this.specific_roles.has(key)) {\n            this.specific_roles.set(key, new Array<Role>());\n        }\n        let role_list = this.specific_roles.get(key);\n        role_list.push(role);\n    }\n\n    specific_roles_for_date(date: Date): Array<Role> {\n        let key = dayAndHourForDate(date);\n        return this.specific_roles.get(key);\n    }\n\n    get max_role_layout_priority(): number {\n        return this.roles.reduce((prev, role) => {\n            return Math.max(prev, role.layout_priority);\n        }, 0);\n    }\n\n    get conditional_rules(): Array<ConditionalRule> {\n        return this.condition_rules;\n    }\n\n    get secondary_actions(): Array<SecondaryAction> {\n        return this.secondary_action_list;\n    }\n\n    delete_rule(rule: Rule) {\n        let list: Array<Rule> = this.conditional_rules;\n        if (rule instanceof SecondaryAction) {\n            list = this.secondary_actions;\n        }\n        delete_from_array(list, rule);\n    }\n\n    add_secondary_action(action: SecondaryAction) {\n        if (action) {\n            // Assign the owner\n            action.owner = this.person;\n            this.secondary_action_list.push(action);\n        }\n    }\n\n    if_assigned_to(role: Role): ConditionalRule {\n        this.add_role(role);\n\n        let roleRule = new AssignedToRoleCondition(role);\n        this.condition_rules.push(roleRule);\n        return roleRule;\n    }\n\n    has_primary_role(role: Role) {\n        let matching_roles = this.roles.filter(r => {\n            return r.uuid == role.uuid;\n        });\n        return matching_roles.length > 0;\n    }\n\n\n}\n\nexport {\n    Assignment\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/assignment.ts","///<reference path=\"./fix.broken.gapi.types.d.ts\"/>\n///<reference path=\"../../node_modules/@types/gapi.client.sheets/index.d.ts\"/>\nimport {ApplicationRef, Injectable} from \"@angular/core\";\nimport {credentials, DISCOVERY_DOCS, SCOPES} from \"./auth-common\";\nimport {Observable} from \"rxjs/Observable\";\nimport {ScheduleWithRules} from \"../scheduling/rule_based/scheduler\";\nimport {Subject} from \"rxjs/Subject\";\nimport {fromPromise} from \"rxjs/observable/fromPromise\"\n\nimport * as _ from 'lodash';\n\nimport {Logger} from \"ionic-logging-service\";\nimport {formatDateForGoogleSpreadsheet} from \"../scheduling/common/date-utils\";\nimport {LoggingWrapper} from \"./logging-wrapper\";\nimport {ServerProvider} from \"../providers/server/server\";\nimport {RootStore} from \"../store/root\";\nimport {SavedState, UIStore} from \"../store/UIState\";\nimport Spreadsheet = gapi.client.sheets.Spreadsheet;\nimport Sheet = gapi.client.sheets.Sheet;\nimport ValueRange = gapi.client.sheets.ValueRange;\n\nconst API_KEY = \"AIzaSyCVhzG0pEB1NfZsxpdPPon3XhEK4pctEYE\";\n\n\n@Injectable()\nclass GAPIS {\n    private init_done: boolean;\n    private callback: any;\n\n    private logger: Logger;\n\n    constructor(private rootStore: RootStore,\n                private server: ServerProvider,\n                private appRef: ApplicationRef) {\n        this.logger = LoggingWrapper.getLogger(\"google\");\n    }\n\n    init(callback = null) {\n        this.logger.info(\"Loading GAPI...\");\n        this.callback = callback;\n\n        this.initClient = this.initClient.bind(this);\n        this.loadDrive = this.loadDrive.bind(this);\n        this.updateSigninStatus = this.updateSigninStatus.bind(this);\n\n        this.loadAuthentication();\n    }\n\n    authenticate() {\n        if (!this.init_done) {\n            this.init(this.authenticate);\n            return;\n        }\n        // gapi.auth2.getAuthInstance().signIn();\n        gapi.auth2.getAuthInstance().grantOfflineAccess().then(this.offlineAccess.bind(this));\n\n    }\n\n    offlineAccess(json) {\n        const {code} = json;\n        this.server.storeGoogleAccessCode(code).subscribe(r => {\n            if (!r.ok) {\n                this.logger.error(r.detail)\n            } else {\n                this.logger.info(\"Server stored and converted the one-time code to a token!\");\n            }\n        })\n    }\n\n    signout() {\n        if (!this.init_done) {\n            this.init(this.signout);\n            return;\n        }\n        gapi.auth2.getAuthInstance().signOut();\n    }\n\n    list_all_sheets(): Observable<any> {\n        this.logger.info(\"Listing all sheets\");\n        let sheets_only = {\n            q: \"mimeType='application/vnd.google-apps.spreadsheet'\"\n        };\n        return Observable.create((observable) => {\n            gapi.client.drive.files.list(sheets_only).then((response) => {\n                let files = response.result.files;\n                // for(let file of files) {\n                // this.logger.info(\"got: \" + SafeJSON.stringify(file));\n                observable.next(files);\n                // }\n                observable.complete();\n            });\n        });\n    }\n\n    private initClient() {\n        this.logger.info(\"Initializing GAPI...\");\n        gapi.client.init({\n            apiKey: API_KEY,\n            clientId: credentials.installed.client_id,\n            discoveryDocs: DISCOVERY_DOCS,\n            scope: SCOPES.join(\" \")\n        }).then(() => {\n            // Listen for sign-in state changes.\n            gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n\n            // Handle the initial sign-in state.\n            this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n\n            this.init_done = true;\n            if (this.callback) {\n                this.callback();\n                this.callback = null;\n            }\n        });\n    }\n\n    private updateSigninStatus(isSignedIn: boolean) {\n        this.logger.info(\"Updating signed in state to: \" + isSignedIn);\n        let store = this.ui_store;\n        store.signed_in_to_google = isSignedIn;\n        this.appRef.tick();\n    }\n\n    private loadAuthentication() {\n        this.logger.info(\"Loading Auth API...\");\n        gapi.load('client:auth2', this.loadDrive);\n    }\n\n    private loadDrive() {\n        this.logger.info(\"Loading drive API...\");\n        gapi.client.load('drive', 'v3').then((v) => {\n            this.loadSheets();\n        });\n    }\n\n    private loadSheets() {\n        this.logger.info(\"Loading sheets API...\");\n        gapi.client.load('sheets', 'v4').then((v) => {\n            this.initClient();\n        });\n    }\n\n    get state(): SavedState {\n        return this.rootStore.state;\n    }\n\n    get ui_store(): UIStore {\n        return this.rootStore.ui_store;\n    }\n\n    public load_sheet_with_id(sheet_id): Observable<Spreadsheet> {\n        return Observable.create((observer) => {\n            this.logger.info(\"Loading spreadsheet with ID: \" + sheet_id);\n            if (sheet_id == null || sheet_id == \"\") {\n                // throw new Error(\"No sheet\");\n                throw new Error(\"No sheet ID specified\");\n            }\n            // Try to read this sheet to see if we can\n            let request = {spreadsheetId: sheet_id, includeGridData: true};\n            gapi.client.sheets.spreadsheets.get(request).then((result) => {\n                // this.logger.info(\"Hey! We got the sheet! Awesome!\");\n                observer.next(result.result);\n                observer.complete();\n            });\n        });\n    }\n\n    range_for_sheet(s: Sheet, range?: string): string {\n        if (!range) {\n            return \"'\" + s.properties.title + \"'\";\n        }\n        return \"'\" + s.properties.title + \"'!\" + range;\n    }\n\n    read_spreadsheet_data(spreadsheet: Spreadsheet, sheet: Sheet): Observable<Array<any>> {\n        let promise = gapi.client.sheets.spreadsheets.values.get({\n            spreadsheetId: spreadsheet.spreadsheetId,\n            range: this.range_for_sheet(sheet),\n            includeGridData: true\n        });\n\n        return fromPromise(promise).map(v => {\n            let result = v['result'];\n            return result['values'];\n        });\n    }\n\n    clear_and_write_schedule(spreadsheet: Spreadsheet, sheet: Sheet, schedule: ScheduleWithRules): Observable<number> {\n        // Righteo. Lets do a batch update!\n        let progressObservable = new Subject<number>();\n        progressObservable.next(0);\n        let num_format_rules = sheet.conditionalFormats ? sheet.conditionalFormats.length : 0;\n        this.logger.info(\"Clearing sheet (with \" + num_format_rules + \" format rules)...\");\n\n        gapi.client.sheets.spreadsheets.values.clear({\n            spreadsheetId: spreadsheet.spreadsheetId,\n            range: this.range_for_sheet(sheet)\n        }).then((clear_response) => {\n            progressObservable.next(0.25);\n            this.logger.info(\"Sending new data...\");\n            let fields = schedule.jsonFields();\n            let rows = schedule.jsonResult().map(row => {\n                // Want to remap this structure\n                let new_row = [formatDateForGoogleSpreadsheet(row.date)];\n                for (let field of fields) {\n                    if (field == 'Date') continue;\n                    let all_names = _.map(row[field], p => p.name);\n                    new_row.push(_.join(all_names, \", \"));\n                }\n                return new_row;\n            });\n\n            let data: ValueRange[] = [\n                {\n                    range: this.range_for_sheet(sheet, \"1:1\"),\n                    values: [fields]\n                }\n            ];\n\n            let row_index = 2;\n            for (let r of rows) {\n                data.push({\n                    range: this.range_for_sheet(sheet, \"\" + row_index + \":\" + row_index),\n                    values: [r]\n                });\n                row_index++;\n            }\n\n            let searchRow = rows.length + 5;\n            let searchCondition = \"=and(search($B$\" + searchRow + \",B2), len($B$\" + searchRow + \")>0)\";\n\n            // Add in the Search Titles\n            data.push({\n                range: this.range_for_sheet(sheet, \"B\" + (searchRow - 1) + \":B\" + (searchRow - 1)),\n                values: [['Super Search!']]\n            });\n            data.push({\n                range: this.range_for_sheet(sheet, \"\" + (searchRow) + \":\" + (searchRow)),\n                values: [['Enter name here:']]\n            });\n\n            progressObservable.next(0.5);\n            gapi.client.sheets.spreadsheets.values.batchUpdate({\n                spreadsheetId: spreadsheet.spreadsheetId,\n                resource: {\n                    valueInputOption: \"USER_ENTERED\",\n                    data: data\n                }\n            }).then((r) => {\n                progressObservable.next(0.66);\n                this.logger.info(\"Updated all data. Formatting...\");\n                let requests = [];\n                for (let index = num_format_rules - 1; index >= 0; index--) {\n                    requests.push({\n                            deleteConditionalFormatRule: {\n                                sheetId: sheet.properties.sheetId,\n                                index: 0\n                            },\n                        }\n                    )\n                }\n                if (requests.length > 0) {\n                    progressObservable.next(0.75);\n                    gapi.client.sheets.spreadsheets.batchUpdate({\n                        spreadsheetId: spreadsheet.spreadsheetId,\n                        requests: requests\n                    }).then(this.setConditionalFormats(spreadsheet, sheet, rows, fields, searchCondition, progressObservable));\n                } else {\n                    this.setConditionalFormats(spreadsheet, sheet, rows, fields, searchCondition, progressObservable);\n                }\n            })\n        });\n        return progressObservable;\n    }\n\n    private setConditionalFormats(spreadsheet: gapi.client.sheets.Spreadsheet, sheet: gapi.client.sheets.Sheet, rows: string[][], fields: any[], searchCondition: string, progressObservable: Subject<number>) {\n        progressObservable.next(0.85);\n        gapi.client.sheets.spreadsheets.batchUpdate({\n            spreadsheetId: spreadsheet.spreadsheetId,\n            requests: [\n                {\n                    addConditionalFormatRule: {\n                        rule: {\n                            ranges: [\n                                {\n                                    sheetId: sheet.properties.sheetId,\n                                    startRowIndex: 1,\n                                    endRowIndex: rows.length + 1\n                                }\n                            ],\n                            booleanRule: {\n                                condition: {\n                                    type: \"CUSTOM_FORMULA\",\n                                    values: [\n                                        {\n                                            userEnteredValue: \"=$A2<today()\"\n                                        }\n                                    ]\n                                },\n                                format: {\n                                    textFormat: {\n                                        foregroundColor: {\n                                            red: 0.2, green: 0.2, blue: 0.2\n                                        },\n                                    },\n                                }\n                            }\n                        },\n                        index: 0\n                    }\n                }\n            ]\n        }).then((v) => {\n            progressObservable.next(0.95);\n            gapi.client.sheets.spreadsheets.batchUpdate({\n                spreadsheetId: spreadsheet.spreadsheetId,\n                requests: [\n                    {\n                        addConditionalFormatRule: {\n                            rule: {\n                                ranges: [\n                                    {\n                                        sheetId: sheet.properties.sheetId,\n                                        startRowIndex: 1,\n                                        endRowIndex: rows.length + 1,\n                                        startColumnIndex: 1,\n                                        endColumnIndex: fields.length\n                                    }\n                                ],\n                                booleanRule: {\n                                    condition: {\n                                        type: \"CUSTOM_FORMULA\",\n                                        values: [\n                                            {\n                                                userEnteredValue: searchCondition\n                                            }\n                                        ]\n                                    },\n                                    format: {\n                                        textFormat: {\n                                            foregroundColor: {\n                                                red: 1, green: 1, blue: 1\n                                            },\n                                        },\n                                        backgroundColor: {\n                                            red: 0.5, green: 0.6, blue: 0.2\n                                        }\n                                    }\n                                }\n                            },\n                            index: 0\n                        },\n                    },\n                    {\n                        repeatCell: {\n                            range: {\n                                sheetId: sheet.properties.sheetId,\n                                startRowIndex: 0,\n                                endRowIndex: 1\n                            },\n                            cell: {\n                                userEnteredFormat: {\n                                    textFormat: {\n                                        bold: true\n                                    }\n                                }\n                            },\n                            fields: \"userEnteredFormat.textFormat.bold\"\n                        },\n                    },\n                    {\n                        autoResizeDimensions: {\n                            dimensions: {\n                                sheetId: sheet.properties.sheetId,\n                                dimension: \"COLUMNS\",\n                                startIndex: 0,\n                                endIndex: 20\n                            }\n                        }\n                    }\n                ]\n            }).then((r) => {\n                progressObservable.next(1.0);\n                this.logger.info(\"Finished updating Google Sheet\");\n                progressObservable.complete();\n            })\n        });\n    }\n}\n\n\nexport {\n    GAPIS\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/gapis-auth.ts","import {HttpClient, HttpHeaders} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {ConfigurationService} from \"ionic-configuration-service\";\nimport {LoginResponse, ValidationResponse} from \"../../common/interfaces\";\nimport {Observable} from \"rxjs/Observable\";\nimport \"rxjs/add/operator/map\";\nimport {Logger, LoggingService} from \"ionic-logging-service\";\nimport {RootStore} from \"../../store/root\";\nimport {isUndefined} from \"util\";\nimport {SafeJSON} from \"../../common/json/safe-stringify\";\nimport \"rxjs/add/observable/from\";\n\n@Injectable()\nexport class ServerProvider {\n    logger: Logger;\n\n    constructor(public http: HttpClient,\n                public store: RootStore,\n                public loggingService: LoggingService,\n                public config: ConfigurationService) {\n        this.logger = this.loggingService.getLogger(\"server\")\n    }\n\n    private server_url(path): string {\n        let server = this.config.getValue(\"server\");\n        return `${server['url']}/api/${path}`;\n    }\n\n    isUsernameAvailableAndGood(username: string): Observable<string> {\n        let url = this.server_url(\"validate_login/\" + `?email=${username}`);\n        return this.http.get(url).map(r => {\n            if ('in_use' in r) {\n                return r['in_use'] == false ? \"good\" : \"bad\"\n            }\n            return \"bad\";\n        });\n    }\n\n\n    loginUser(username: string, password: string): Observable<ValidationResponse> {\n        let url = this.server_url(\"login/\" + `?email=${username}&password=${password}`);\n        return this.http.get(url).map(r => {\n            let res = Object.assign(new LoginResponse(), r);\n            if (res.ok) {\n                if (res['token'])\n                    this.store.ui_store.saved_state.login_token = res['token'];\n            }\n            return res;\n        });\n    }\n\n    validateLoginToken(): Observable<ValidationResponse> {\n        let token = this.store.ui_store.saved_state.login_token;\n        if (isUndefined(token)) {\n            return Observable.from([{ok: false, detail: 'No token is defined', user: null}]);\n        }\n        this.logger.info(`Validating login token: ${SafeJSON.stringify(token)}`);\n        let url = this.server_url(\"validate_token/?token=\" + token);\n        return this.http.get(url).map(r => {\n            let vr: ValidationResponse = {\n                ok: r['ok'],\n                detail: r['detail'],\n                user: r['user']\n            };\n            this.store.ui_store.login_token_validated = vr.ok;\n            return vr;\n        })\n    }\n\n    // // I wonder, can the client use the servers google token to talk to it?\n    // // Unlikely?\n    // get_sheets() {\n    //     this.logger.info(\"Listing all sheets\");\n    //     let sheets_only = {\n    //         q: \"mimeType='application/vnd.google-apps.spreadsheet'\"\n    //     };\n    //     return Observable.create((observable) => {\n    //         let url = this.server_url(\"/sheets/\");\n    //         gapi.client.drive.files.list(sheets_only).then((response) => {\n    //             let files = response.result.files;\n    //             // for(let file of files) {\n    //             // this.logger.info(\"got: \" + SafeJSON.Stringify(file));\n    //             observable.next(files);\n    //             // }\n    //             observable.complete();\n    //         });\n    //     });\n    //\n    // }\n\n    get headers() {\n        if (this.store) {\n            if (this.store.ui_store.signed_in) {\n                let token = this.store.ui_store.saved_state.login_token;\n                return new HttpHeaders({'Authorization': `Token ${token}`});\n            }\n        }\n        return null;\n    }\n\n    get options() {\n        let options = {};\n        let headers = this.headers;\n        if (headers) {\n            options['headers'] = headers;\n        }\n        return options;\n    }\n\n    storeGoogleAccessCode(code: string): Observable<ValidationResponse> {\n        let url = this.server_url(\"token/\");\n        this.logger.info(`Sending access token`);\n        return this.http.post(url, {code: code}, this.options).map(r => {\n            // If we get back a JSON with 'ok'. Otherwise expect 'detail' to contain the error.\n            if (r.hasOwnProperty('ok') && r['ok']) {\n                return new LoginResponse(true);\n            }\n            this.logger.info(`Token store returned: ${SafeJSON.stringify(r)}`);\n            return new LoginResponse(false, r['detail']);\n        })\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/server/server.ts","import {Person} from \"./people\";\nimport {throwOnInvalidDate} from \"./common/date-utils\";\nimport {RuleFacts} from \"./rule_based/rule-facts\";\nimport {Logger} from \"ionic-logging-service\";\nimport {LoggingWrapper} from \"../common/logging-wrapper\";\nimport {observable} from \"mobx\";\n\nexport enum AvailabilityUnit {\n    // Models availability such as \"every 4 weeks\".\n    // Use Availability\n    AVAIL_ANYTIME = 'anytime',\n    EVERY_N_DAYS = 'every_days',\n    EVERY_N_WEEKS = 'every_weeks',\n\n    // Models availability such as \"every 2 out of 3\"\n    // Use AvailabilityEveryNOfM\n    EVERY_N_OF_M_WEEKS = 'every_n_of_m',\n}\n\nexport class Availability {\n    period: number;\n    unit: AvailabilityUnit;\n    protected logger: Logger;\n\n    constructor(period: number = 1, unit: AvailabilityUnit = AvailabilityUnit.AVAIL_ANYTIME) {\n        this.period = period;\n        this.unit = unit;\n        this.logger = LoggingWrapper.getLogger(\"scheduler.availability\");\n    }\n\n    get_end_date_from(date: Date) {\n        let end_date = new Date(date);\n        switch (this.unit) {\n            case AvailabilityUnit.AVAIL_ANYTIME:\n                end_date.setDate(date.getDate() + 1);\n                break;\n\n            case AvailabilityUnit.EVERY_N_DAYS:\n                end_date.setDate(date.getDate() + this.period - 1);\n                break;\n\n            case AvailabilityUnit.EVERY_N_WEEKS:\n                end_date.setDate(date.getDate() + (7 * this.period) - 1);\n                break;\n        }\n        return end_date;\n    }\n\n    every(a_number: number, unit: AvailabilityUnit) {\n        this.period = a_number;\n        this.unit = unit;\n    }\n\n    is_available(person: Person, date: Date, facts: RuleFacts, record_unavailability: boolean) {\n        return true;\n    }\n\n    static StringForUnit(unit: AvailabilityUnit) {\n        switch (unit) {\n            case AvailabilityUnit.EVERY_N_WEEKS:\n                return \"Every N weeks\";\n            case AvailabilityUnit.EVERY_N_DAYS:\n                return \"Every N days\";\n            case AvailabilityUnit.AVAIL_ANYTIME:\n                return \"Anytime\";\n            case AvailabilityUnit.EVERY_N_OF_M_WEEKS:\n                return \"Every N of M\";\n        }\n    }\n\n    public unit_description(singular: boolean): string {\n        switch (this.unit) {\n            case AvailabilityUnit.EVERY_N_WEEKS:\n                return singular ? \"week\" : \"weeks\";\n            case AvailabilityUnit.EVERY_N_DAYS:\n                return singular ? \"day\" : \"days\";\n        }\n        return \"\";\n    }\n\n    public toString(): string {\n        return this.description();\n    }\n\n    public description(short: boolean = false) {\n        if (this.unit == AvailabilityUnit.AVAIL_ANYTIME) {\n            return \"anytime\";\n        }\n        if (this.period == 1) {\n            return `${!short ? 'Every ' : ''}${this.period} ${this.unit_description(true)} `\n        }\n        return `${!short ? 'Every ' : \"\"}${this.period} ${this.unit_description(false)} `\n    }\n}\n\nexport class AvailabilityEveryNOfM extends Availability {\n    period_to_look_at: number;\n\n    constructor(every: number, of_weeks: number) {\n        super(every, AvailabilityUnit.EVERY_N_OF_M_WEEKS);\n        this.period_to_look_at = of_weeks;\n    }\n\n    // Always returns one week.\n    get_end_date_from(date: Date): Date {\n        let end_date = new Date(date);\n        end_date.setDate(date.getDate() + (7) - 1);\n        return end_date;\n    }\n\n    is_available(person: Person, date: Date, facts: RuleFacts, record_unavailability: boolean) {\n        // How many times have I done something .... in the last 'M' weeks?\n        throwOnInvalidDate(date);\n        let end_date = new Date(date);\n        let start_date = new Date(date);\n        start_date.setDate(date.getDate() - (this.period_to_look_at * 7) + 1);\n\n        if (record_unavailability) {\n            // facts.add_decision(\"Checking from \" + start_date.toDateString() + \" to \" + end_date.toDateString());\n        }\n\n\n        // Count the number of times this person has done something\n        let number_of_placements = facts.placements_for_person(person, start_date, end_date);\n        let num_placements = number_of_placements.length;\n        let is_available = num_placements < this.period;\n\n        this.logger.info(`${person.name} is available: ${is_available}. ${num_placements} < ${this.period}`);\n\n        if (record_unavailability) {\n            facts.add_decision(`Looking between ${start_date.toDateString()} and ${end_date.toDateString()}. Have ${num_placements} in those dates`);\n            let rule = `Rule is every ${this.period} of ${this.period_to_look_at}`;\n            if (is_available) {\n                facts.add_decision(` - Available. ${rule}. Would cause ${num_placements + 1} out of ${this.period_to_look_at}`);\n            } else {\n                facts.add_decision(` - Unavailable. ${rule}. Would cause ${num_placements + 1} out of ${this.period_to_look_at}`);\n            }\n        }\n        return is_available;\n    }\n\n    public toString(): string {\n        return `Every ${this.period} in ${this.period_to_look_at} weeks`;\n    }\n}\n\nexport class SchedulePrefs {\n    @observable slip_aggressiveness: number;\n    @observable fill_aggresiveness: number;\n    @observable preferred_leader: Person;\n    @observable availability: Availability;\n\n    constructor() {\n        this.slip_aggressiveness = 0;\n        this.fill_aggresiveness = 0;\n        this.availability = new Availability();\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scheduling/availability.ts"],"sourceRoot":""}